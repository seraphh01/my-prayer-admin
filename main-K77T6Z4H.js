import{b as bl,c as xl,f as Iu,g as Sl}from"./chunk-X5YLR3NI.js";import{$ as I,$a as T,A as za,Aa as mn,Ab as ge,B as cn,Ba as qe,Bb as hl,C as Ct,Ca as nl,Cb as Qi,D as Bs,Da as Ut,Db as fl,E as Ga,Ea as sl,Eb as ml,F as Wa,Fa as Zs,Fb as Xi,G as qa,Ga as X,Gb as pl,H as dn,Ha as se,Hb as xe,I as Ge,Ia as Y,Ib as je,J as un,Ja as Js,Jb as oe,K as ye,Ka as Ye,Kb as gl,L as te,La as $t,Lb as _l,M as Xe,Ma as F,Mb as io,N as E,Na as pn,Nb as vl,O as ne,Oa as gn,Ob as yl,P as Ya,Pa as Zi,Q as z,Qa as Qs,R as Hs,Ra as Xs,S as D,Sa as Bt,T as M,Ta as C,U as zs,Ua as li,V as Ka,Va as h,W as Vt,Wa as m,X as Za,Xa as ie,Y as Wi,Ya as Et,Z as et,Za as Mt,_ as Tt,_a as Z,a as La,aa as k,ab as y,b as Va,ba as We,bb as eo,c as ja,ca as Ja,cb as _,d as Ls,da as ai,db as ci,e as Vs,ea as Qa,eb as we,f as Le,fa as Xa,fb as ue,g as Ve,ga as be,gb as ol,h as St,ha as Me,hb as O,i as Se,ia as Gs,ib as P,j as V,ja as Ws,jb as N,k as Gi,ka as Oe,kb as Ce,l as Ua,la as el,lb as ut,m as $a,ma as hn,mb as al,n as H,na as tl,nb as ht,o as ni,oa as jt,ob as ft,p as Re,pa as qs,pb as to,q as js,qa as qi,qb as _n,r as ln,ra as il,rb as di,s as Us,sa as Ys,sb as ll,t as Ba,ta as Yi,tb as It,u as Lt,ua as Ks,ub as Ji,v as si,va as rl,vb as kt,w as oi,wa as Ki,wb as cl,x as Ha,xa as v,xb as ui,y as $s,ya as A,yb as dl,z as wt,za as fn,zb as ul}from"./chunk-TEPJ4FVT.js";import{a as S,b as q,e as dt,g as Eu,h as Mu,i as u}from"./chunk-ODN5LVDJ.js";var Qo=dt(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Zo=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}};Jo.default=Zo});var ea=dt(Er=>{"use strict";var Dc=Er&&Er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Er,"__esModule",{value:!0});var Kf=Dc((Sl(),Mu(Iu))),Zf=Dc(Qo()),Xo=class{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=Kf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,e){return this.headers=Object.assign({},this.headers),this.headers[i]=e,this}then(i,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let t=this.fetch,n=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>u(this,null,function*(){var o,l,a;let c=null,d=null,g=null,b=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){let K=yield s.text();K===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=K:d=JSON.parse(K))}let w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),R=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&R&&R.length>1&&(g=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,b=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let w=yield s.text();try{c=JSON.parse(w),Array.isArray(c)&&s.status===404&&(d=[],c=null,b=200,x="OK")}catch{s.status===404&&w===""?(b=204,x="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((a=c?.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,b=200,x="OK"),c&&this.shouldThrowOnError)throw new Zf.default(c)}return{error:c,data:d,count:g,status:b,statusText:x}}));return this.shouldThrowOnError||(n=n.catch(s=>{var o,l,a;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(l=s?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=s?.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(i,e)}};Er.default=Xo});var ia=dt(Mr=>{"use strict";var Jf=Mr&&Mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mr,"__esModule",{value:!0});var Qf=Jf(ea()),ta=class extends Qf.default{select(i){let e=!1,t=(i??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:s=n}={}){let o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${i}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:e,referencedTable:t=e}={}){let n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${i}`),this}range(i,e,{foreignTable:t,referencedTable:n=t}={}){let s=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${i}`),this.url.searchParams.set(o,`${e-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){var l;let a=[i?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mr.default=ta});var zn=dt(Ir=>{"use strict";var Xf=Ir&&Ir.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ir,"__esModule",{value:!0});var em=Xf(ia()),ra=class extends em.default{eq(i,e){return this.url.searchParams.append(i,`eq.${e}`),this}neq(i,e){return this.url.searchParams.append(i,`neq.${e}`),this}gt(i,e){return this.url.searchParams.append(i,`gt.${e}`),this}gte(i,e){return this.url.searchParams.append(i,`gte.${e}`),this}lt(i,e){return this.url.searchParams.append(i,`lt.${e}`),this}lte(i,e){return this.url.searchParams.append(i,`lte.${e}`),this}like(i,e){return this.url.searchParams.append(i,`like.${e}`),this}likeAllOf(i,e){return this.url.searchParams.append(i,`like(all).{${e.join(",")}}`),this}likeAnyOf(i,e){return this.url.searchParams.append(i,`like(any).{${e.join(",")}}`),this}ilike(i,e){return this.url.searchParams.append(i,`ilike.${e}`),this}ilikeAllOf(i,e){return this.url.searchParams.append(i,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(i,e){return this.url.searchParams.append(i,`ilike(any).{${e.join(",")}}`),this}is(i,e){return this.url.searchParams.append(i,`is.${e}`),this}in(i,e){let t=Array.from(new Set(e)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(i,`in.(${t})`),this}contains(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cs.{${e.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(e)}`),this}containedBy(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cd.{${e.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(e)}`),this}rangeGt(i,e){return this.url.searchParams.append(i,`sr.${e}`),this}rangeGte(i,e){return this.url.searchParams.append(i,`nxl.${e}`),this}rangeLt(i,e){return this.url.searchParams.append(i,`sl.${e}`),this}rangeLte(i,e){return this.url.searchParams.append(i,`nxr.${e}`),this}rangeAdjacent(i,e){return this.url.searchParams.append(i,`adj.${e}`),this}overlaps(i,e){return typeof e=="string"?this.url.searchParams.append(i,`ov.${e}`):this.url.searchParams.append(i,`ov.{${e.join(",")}}`),this}textSearch(i,e,{config:t,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");let o=t===void 0?"":`(${t})`;return this.url.searchParams.append(i,`${s}fts${o}.${e}`),this}match(i){return Object.entries(i).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(i,e,t){return this.url.searchParams.append(i,`not.${e}.${t}`),this}or(i,{foreignTable:e,referencedTable:t=e}={}){let n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${i})`),this}filter(i,e,t){return this.url.searchParams.append(i,`${e}.${t}`),this}};Ir.default=ra});var sa=dt(Ar=>{"use strict";var tm=Ar&&Ar.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ar,"__esModule",{value:!0});var kr=tm(zn()),na=class{constructor(i,{headers:e={},schema:t,fetch:n}){this.url=i,this.headers=e,this.schema=t,this.fetch=n}select(i,{head:e=!1,count:t}={}){let n=e?"HEAD":"GET",s=!1,o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),t&&(this.headers.Prefer=`count=${t}`),new kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:e,defaultToNull:t=!0}={}){let n="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),t||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(i)){let o=i.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){let l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:s=!0}={}){let o="POST",l=[`resolution=${t?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){let a=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(a.length>0){let c=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new kr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:e}={}){let t="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),this.headers.Prefer=n.join(","),new kr.default({method:t,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){let e="DELETE",t=[];return i&&t.push(`count=${i}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new kr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ar.default=na});var Rc=dt(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.version=void 0;Gn.version="0.0.0-automated"});var Oc=dt(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.DEFAULT_HEADERS=void 0;var im=Rc();Wn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${im.version}`}});var Nc=dt(Dr=>{"use strict";var Pc=Dr&&Dr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dr,"__esModule",{value:!0});var rm=Pc(sa()),nm=Pc(zn()),sm=Oc(),oa=class r{constructor(i,{headers:e={},schema:t,fetch:n}={}){this.url=i,this.headers=Object.assign(Object.assign({},sm.DEFAULT_HEADERS),e),this.schemaName=t,this.fetch=n}from(i){let e=new URL(`${this.url}/${i}`);return new rm.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,e={},{head:t=!1,get:n=!1,count:s}={}){let o,l=new URL(`${this.url}/rpc/${i}`),a;t||n?(o=t?"HEAD":"GET",Object.entries(e).filter(([d,g])=>g!==void 0).map(([d,g])=>[d,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([d,g])=>{l.searchParams.append(d,g)})):(o="POST",a=e);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new nm.default({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};Dr.default=oa});var Bc=dt(ve=>{"use strict";var Ci=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.PostgrestError=ve.PostgrestBuilder=ve.PostgrestTransformBuilder=ve.PostgrestFilterBuilder=ve.PostgrestQueryBuilder=ve.PostgrestClient=void 0;var Fc=Ci(Nc());ve.PostgrestClient=Fc.default;var Lc=Ci(sa());ve.PostgrestQueryBuilder=Lc.default;var Vc=Ci(zn());ve.PostgrestFilterBuilder=Vc.default;var jc=Ci(ia());ve.PostgrestTransformBuilder=jc.default;var Uc=Ci(ea());ve.PostgrestBuilder=Uc.default;var $c=Ci(Qo());ve.PostgrestError=$c.default;ve.default={PostgrestClient:Fc.default,PostgrestQueryBuilder:Lc.default,PostgrestFilterBuilder:Vc.default,PostgrestTransformBuilder:jc.default,PostgrestBuilder:Uc.default,PostgrestError:$c.default}});var no=class extends ul{supportsDOMEvents=!0},so=class r extends no{static makeCurrent(){dl(new r)}onAndCancel(i,e,t){return i.addEventListener(e,t),()=>{i.removeEventListener(e,t)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.remove()}createElement(i,e){return e=e||this.getDefaultDocument(),e.createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return e==="window"?window:e==="document"?i:e==="body"?i.body:null}getBaseHref(i){let e=Au();return e==null?null:Du(e)}resetBaseElement(){er=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return pl(document.cookie,i)}},er=null;function Au(){return er=er||document.querySelector("base"),er?er.getAttribute("href"):null}function Du(r){return new URL(r,document.baseURI).pathname}var Ru=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),oo=new z(""),Ml=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,t){this._zone=t,e.forEach(n=>{n.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){let t=this._eventNameToPlugin.get(e);if(t)return t;if(t=this._plugins.find(s=>s.supports(e)),!t)throw new te(5101,!1);return this._eventNameToPlugin.set(e,t),t}static \u0275fac=function(t){return new(t||r)(D(oo),D(Me))};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),yn=class{_doc;constructor(i){this._doc=i}manager},vn="ng-app-id";function wl(r){for(let i of r)i.remove()}function Cl(r,i){let e=i.createElement("style");return e.textContent=r,e}function Ou(r,i,e,t){let n=r.head?.querySelectorAll(`style[${vn}="${i}"],link[${vn}="${i}"]`);if(n)for(let s of n)s.removeAttribute(vn),s instanceof HTMLLinkElement?t.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function ao(r,i){let e=i.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var Il=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,t,n,s={}){this.doc=e,this.appId=t,this.nonce=n,this.isServer=io(s),Ou(e,t,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,t){for(let n of e)this.addUsage(n,this.inline,Cl);t?.forEach(n=>this.addUsage(n,this.external,ao))}removeStyles(e,t){for(let n of e)this.removeUsage(n,this.inline);t?.forEach(n=>this.removeUsage(n,this.external))}addUsage(e,t,n){let s=t.get(e);s?s.usage++:t.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,n(e,this.doc)))})}removeUsage(e,t){let n=t.get(e);n&&(n.usage--,n.usage<=0&&(wl(n.elements),t.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])wl(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[t,{elements:n}]of this.inline)n.push(this.addElement(e,Cl(t,this.doc)));for(let[t,{elements:n}]of this.external)n.push(this.addElement(e,ao(t,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,t){return this.nonce&&t.setAttribute("nonce",this.nonce),this.isServer&&t.setAttribute(vn,this.appId),e.appendChild(t)}static \u0275fac=function(t){return new(t||r)(D(ge),D(hn),D(qi,8),D(jt))};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),ro={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},uo=/%COMP%/g,kl="%COMP%",Pu=`_nghost-${kl}`,Nu=`_ngcontent-${kl}`,Fu=!0,Lu=new z("",{providedIn:"root",factory:()=>Fu});function Vu(r){return Nu.replace(uo,r)}function ju(r){return Pu.replace(uo,r)}function Al(r,i){return i.map(e=>e.replace(uo,r))}var bn=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,t,n,s,o,l,a,c=null){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=l,this.ngZone=a,this.nonce=c,this.platformIsServer=io(l),this.defaultRenderer=new tr(e,o,a,this.platformIsServer)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;this.platformIsServer&&t.encapsulation===Yi.ShadowDom&&(t=q(S({},t),{encapsulation:Yi.Emulated}));let n=this.getOrCreateRenderer(e,t);return n instanceof xn?n.applyToHost(e):n instanceof ir&&n.applyStyles(),n}getOrCreateRenderer(e,t){let n=this.rendererByCompId,s=n.get(t.id);if(!s){let o=this.doc,l=this.ngZone,a=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(t.encapsulation){case Yi.Emulated:s=new xn(a,c,t,this.appId,d,o,l,g);break;case Yi.ShadowDom:return new lo(a,c,e,t,o,l,this.nonce,g);default:s=new ir(a,c,t,d,o,l,g);break}n.set(t.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(t){return new(t||r)(D(Ml),D(Il),D(hn),D(Lu),D(ge),D(jt),D(Me),D(qi))};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),tr=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(i,e,t,n){this.eventManager=i,this.doc=e,this.ngZone=t,this.platformIsServer=n}destroy(){}destroyNode=null;createElement(i,e){return e?this.doc.createElementNS(ro[e]||e,i):this.doc.createElement(i)}createComment(i){return this.doc.createComment(i)}createText(i){return this.doc.createTextNode(i)}appendChild(i,e){(Tl(i)?i.content:i).appendChild(e)}insertBefore(i,e,t){i&&(Tl(i)?i.content:i).insertBefore(e,t)}removeChild(i,e){e.remove()}selectRootElement(i,e){let t=typeof i=="string"?this.doc.querySelector(i):i;if(!t)throw new te(-5104,!1);return e||(t.textContent=""),t}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,t,n){if(n){e=n+":"+e;let s=ro[n];s?i.setAttributeNS(s,e,t):i.setAttribute(e,t)}else i.setAttribute(e,t)}removeAttribute(i,e,t){if(t){let n=ro[t];n?i.removeAttributeNS(n,e):i.removeAttribute(`${t}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,t,n){n&(Ki.DashCase|Ki.Important)?i.style.setProperty(e,t,n&Ki.Important?"important":""):i.style[e]=t}removeStyle(i,e,t){t&Ki.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,t){i!=null&&(i[e]=t)}setValue(i,e){i.nodeValue=e}listen(i,e,t){if(typeof i=="string"&&(i=ui().getGlobalEventTarget(this.doc,i),!i))throw new Error(`Unsupported event target ${i} for event ${e}`);return this.eventManager.addEventListener(i,e,this.decoratePreventDefault(t))}decoratePreventDefault(i){return e=>{if(e==="__ngUnwrap__")return i;(this.platformIsServer?this.ngZone.runGuarded(()=>i(e)):i(e))===!1&&e.preventDefault()}}};function Tl(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var lo=class extends tr{sharedStylesHost;hostEl;shadowRoot;constructor(i,e,t,n,s,o,l,a){super(i,s,o,a),this.sharedStylesHost=e,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Al(n.id,n.styles);for(let g of c){let b=document.createElement("style");l&&b.setAttribute("nonce",l),b.textContent=g,this.shadowRoot.appendChild(b)}let d=n.getExternalStyles?.();if(d)for(let g of d){let b=ao(g,s);l&&b.setAttribute("nonce",l),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,t){return super.insertBefore(this.nodeOrShadowRoot(i),e,t)}removeChild(i,e){return super.removeChild(null,e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ir=class extends tr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(i,e,t,n,s,o,l,a){super(i,s,o,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=n,this.styles=a?Al(a,t.styles):t.styles,this.styleUrls=t.getExternalStyles?.(a)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xn=class extends ir{contentAttr;hostAttr;constructor(i,e,t,n,s,o,l,a){let c=n+"-"+t.id;super(i,e,t,s,o,l,a,c),this.contentAttr=Vu(c),this.hostAttr=ju(c)}applyToHost(i){this.applyStyles(),this.setAttribute(i,this.hostAttr,"")}createElement(i,e){let t=super.createElement(i,e);return super.setAttribute(t,this.contentAttr,""),t}},Uu=(()=>{class r extends yn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}static \u0275fac=function(t){return new(t||r)(D(ge))};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),El=["alt","control","meta","shift"],$u={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bu={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},Hu=(()=>{class r extends yn{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,t,n){let s=r.parseEventName(t),o=r.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ui().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let t=e.toLowerCase().split("."),n=t.shift();if(t.length===0||!(n==="keydown"||n==="keyup"))return null;let s=r._normalizeKey(t.pop()),o="",l=t.indexOf("code");if(l>-1&&(t.splice(l,1),o="code."),El.forEach(c=>{let d=t.indexOf(c);d>-1&&(t.splice(d,1),o+=c+".")}),o+=s,t.length!=0||s.length===0)return null;let a={};return a.domEventName=n,a.fullKey=o,a}static matchEventFullKeyCode(e,t){let n=$u[e.key]||e.key,s="";return t.indexOf("code.")>-1&&(n=e.code,s="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),El.forEach(o=>{if(o!==n){let l=Bu[o];l(e)&&(s+=o+".")}}),s+=n,s===t)}static eventCallback(e,t,n){return s=>{r.matchEventFullKeyCode(s,e)&&n.runGuarded(()=>t(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(t){return new(t||r)(D(ge))};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})();function Dl(r,i){return ll(S({rootComponent:r},zu(i)))}function zu(r){return{appProviders:[...Ku,...r?.providers??[]],platformProviders:Yu}}function Gu(){so.makeCurrent()}function Wu(){return new Gs}function qu(){return el(document),document}var Yu=[{provide:jt,useValue:gl},{provide:tl,useValue:Gu,multi:!0},{provide:ge,useFactory:qu,deps:[]}];var Ku=[{provide:Za,useValue:"root"},{provide:Gs,useFactory:Wu,deps:[]},{provide:oo,useClass:Uu,multi:!0,deps:[ge,Me,jt]},{provide:oo,useClass:Hu,multi:!0,deps:[ge]},bn,Il,Ml,{provide:mn,useExisting:bn},{provide:yl,useClass:Ru,deps:[]},[]];var Rl=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(t){return new(t||r)(D(ge))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var U="primary",_r=Symbol("RouteTitle"),go=class{params;constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function _i(r){return new go(r)}function Qu(r,i,e){let t=e.path.split("/");if(t.length>r.length||e.pathMatch==="full"&&(i.hasChildren()||t.length<r.length))return null;let n={};for(let s=0;s<t.length;s++){let o=t[s],l=r[s];if(o[0]===":")n[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:r.slice(0,t.length),posParams:n}}function Xu(r,i){if(r.length!==i.length)return!1;for(let e=0;e<r.length;++e)if(!tt(r[e],i[e]))return!1;return!0}function tt(r,i){let e=r?_o(r):void 0,t=i?_o(i):void 0;if(!e||!t||e.length!=t.length)return!1;let n;for(let s=0;s<e.length;s++)if(n=e[s],!Gl(r[n],i[n]))return!1;return!0}function _o(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function Gl(r,i){if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;let e=[...r].sort(),t=[...i].sort();return e.every((n,s)=>t[s]===n)}else return r===i}function Wl(r){return r.length>0?r[r.length-1]:null}function Dt(r){return Ua(r)?r:gn(r)?Se(Promise.resolve(r)):V(r)}var eh={exact:Yl,subset:Kl},ql={exact:th,subset:ih,ignored:()=>!0};function Ol(r,i,e){return eh[e.paths](r.root,i.root,e.matrixParams)&&ql[e.queryParams](r.queryParams,i.queryParams)&&!(e.fragment==="exact"&&r.fragment!==i.fragment)}function th(r,i){return tt(r,i)}function Yl(r,i,e){if(!zt(r.segments,i.segments)||!Cn(r.segments,i.segments,e)||r.numberOfChildren!==i.numberOfChildren)return!1;for(let t in i.children)if(!r.children[t]||!Yl(r.children[t],i.children[t],e))return!1;return!0}function ih(r,i){return Object.keys(i).length<=Object.keys(r).length&&Object.keys(i).every(e=>Gl(r[e],i[e]))}function Kl(r,i,e){return Zl(r,i,i.segments,e)}function Zl(r,i,e,t){if(r.segments.length>e.length){let n=r.segments.slice(0,e.length);return!(!zt(n,e)||i.hasChildren()||!Cn(n,e,t))}else if(r.segments.length===e.length){if(!zt(r.segments,e)||!Cn(r.segments,e,t))return!1;for(let n in i.children)if(!r.children[n]||!Kl(r.children[n],i.children[n],t))return!1;return!0}else{let n=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!zt(r.segments,n)||!Cn(r.segments,n,t)||!r.children[U]?!1:Zl(r.children[U],i,s,t)}}function Cn(r,i,e){return i.every((t,n)=>ql[e](r[n].parameters,t.parameters))}var pt=class{root;queryParams;fragment;_queryParamMap;constructor(i=new G([],{}),e={},t=null){this.root=i,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=_i(this.queryParams),this._queryParamMap}toString(){return sh.serialize(this)}},G=class{segments;children;parent=null;constructor(i,e){this.segments=i,this.children=e,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tn(this)}},Ht=class{path;parameters;_parameterMap;constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap??=_i(this.parameters),this._parameterMap}toString(){return Ql(this)}};function rh(r,i){return zt(r,i)&&r.every((e,t)=>tt(e.parameters,i[t].parameters))}function zt(r,i){return r.length!==i.length?!1:r.every((e,t)=>e.path===i[t].path)}function nh(r,i){let e=[];return Object.entries(r.children).forEach(([t,n])=>{t===U&&(e=e.concat(i(n,t)))}),Object.entries(r.children).forEach(([t,n])=>{t!==U&&(e=e.concat(i(n,t)))}),e}var vr=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:()=>new vi,providedIn:"root"})}return r})(),vi=class{parse(i){let e=new yo(i);return new pt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){let e=`/${rr(i.root,!0)}`,t=lh(i.queryParams),n=typeof i.fragment=="string"?`#${oh(i.fragment)}`:"";return`${e}${t}${n}`}},sh=new vi;function Tn(r){return r.segments.map(i=>Ql(i)).join("/")}function rr(r,i){if(!r.hasChildren())return Tn(r);if(i){let e=r.children[U]?rr(r.children[U],!1):"",t=[];return Object.entries(r.children).forEach(([n,s])=>{n!==U&&t.push(`${n}:${rr(s,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=nh(r,(t,n)=>n===U?[rr(r.children[U],!1)]:[`${n}:${rr(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[U]!=null?`${Tn(r)}/${e[0]}`:`${Tn(r)}/(${e.join("//")})`}}function Jl(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sn(r){return Jl(r).replace(/%3B/gi,";")}function oh(r){return encodeURI(r)}function vo(r){return Jl(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function En(r){return decodeURIComponent(r)}function Pl(r){return En(r.replace(/\+/g,"%20"))}function Ql(r){return`${vo(r.path)}${ah(r.parameters)}`}function ah(r){return Object.entries(r).map(([i,e])=>`;${vo(i)}=${vo(e)}`).join("")}function lh(r){let i=Object.entries(r).map(([e,t])=>Array.isArray(t)?t.map(n=>`${Sn(e)}=${Sn(n)}`).join("&"):`${Sn(e)}=${Sn(t)}`).filter(e=>e);return i.length?`?${i.join("&")}`:""}var ch=/^[^\/()?;#]+/;function ho(r){let i=r.match(ch);return i?i[0]:""}var dh=/^[^\/()?;=#]+/;function uh(r){let i=r.match(dh);return i?i[0]:""}var hh=/^[^=?&#]+/;function fh(r){let i=r.match(hh);return i?i[0]:""}var mh=/^[^&#]+/;function ph(r){let i=r.match(mh);return i?i[0]:""}var yo=class{url;remaining;constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new G([],{}):new G([],this.parseChildren())}parseQueryParams(){let i={};if(this.consumeOptional("?"))do this.parseQueryParam(i);while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(t[U]=new G(i,e)),t}parseSegment(){let i=ho(this.remaining);if(i===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(i),new Ht(En(i),this.parseMatrixParams())}parseMatrixParams(){let i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){let e=uh(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let n=ho(this.remaining);n&&(t=n,this.capture(t))}i[En(e)]=En(t)}parseQueryParam(i){let e=fh(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let o=ph(this.remaining);o&&(t=o,this.capture(t))}let n=Pl(e),s=Pl(t);if(i.hasOwnProperty(n)){let o=i[n];Array.isArray(o)||(o=[o],i[n]=o),o.push(s)}else i[n]=s}parseParens(i){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=ho(this.remaining),n=this.remaining[t.length];if(n!=="/"&&n!==")"&&n!==";")throw new te(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):i&&(s=U);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[U]:new G([],o),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return this.peekStartsWith(i)?(this.remaining=this.remaining.substring(i.length),!0):!1}capture(i){if(!this.consumeOptional(i))throw new te(4011,!1)}};function Xl(r){return r.segments.length>0?new G([],{[U]:r}):r}function ec(r){let i={};for(let[t,n]of Object.entries(r.children)){let s=ec(n);if(t===U&&s.segments.length===0&&s.hasChildren())for(let[o,l]of Object.entries(s.children))i[o]=l;else(s.segments.length>0||s.hasChildren())&&(i[t]=s)}let e=new G(r.segments,i);return gh(e)}function gh(r){if(r.numberOfChildren===1&&r.children[U]){let i=r.children[U];return new G(r.segments.concat(i.segments),i.children)}return r}function Gt(r){return r instanceof pt}function _h(r,i,e=null,t=null){let n=tc(r);return ic(n,i,e,t)}function tc(r){let i;function e(s){let o={};for(let a of s.children){let c=e(a);o[a.outlet]=c}let l=new G(s.url,o);return s===r&&(i=l),l}let t=e(r.root),n=Xl(t);return i??n}function ic(r,i,e,t){let n=r;for(;n.parent;)n=n.parent;if(i.length===0)return fo(n,n,n,e,t);let s=vh(i);if(s.toRoot())return fo(n,n,new G([],{}),e,t);let o=yh(s,n,r),l=o.processChildren?or(o.segmentGroup,o.index,s.commands):nc(o.segmentGroup,o.index,s.commands);return fo(n,o.segmentGroup,l,e,t)}function Mn(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function cr(r){return typeof r=="object"&&r!=null&&r.outlets}function fo(r,i,e,t,n){let s={};t&&Object.entries(t).forEach(([a,c])=>{s[a]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let o;r===i?o=e:o=rc(r,i,e);let l=Xl(ec(o));return new pt(l,s,n)}function rc(r,i,e){let t={};return Object.entries(r.children).forEach(([n,s])=>{s===i?t[n]=e:t[n]=rc(s,i,e)}),new G(r.segments,t)}var In=class{isAbsolute;numberOfDoubleDots;commands;constructor(i,e,t){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=t,i&&t.length>0&&Mn(t[0]))throw new te(4003,!1);let n=t.find(cr);if(n&&n!==Wl(t))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vh(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new In(!0,0,r);let i=0,e=!1,t=r.reduce((n,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([a,c])=>{l[a]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:l}]}if(s.segmentPath)return[...n,s.segmentPath]}return typeof s!="string"?[...n,s]:o===0?(s.split("/").forEach((l,a)=>{a==0&&l==="."||(a==0&&l===""?e=!0:l===".."?i++:l!=""&&n.push(l))}),n):[...n,s]},[]);return new In(e,i,t)}var mi=class{segmentGroup;processChildren;index;constructor(i,e,t){this.segmentGroup=i,this.processChildren=e,this.index=t}};function yh(r,i,e){if(r.isAbsolute)return new mi(i,!0,0);if(!e)return new mi(i,!1,NaN);if(e.parent===null)return new mi(e,!0,0);let t=Mn(r.commands[0])?0:1,n=e.segments.length-1+t;return bh(e,n,r.numberOfDoubleDots)}function bh(r,i,e){let t=r,n=i,s=e;for(;s>n;){if(s-=n,t=t.parent,!t)throw new te(4005,!1);n=t.segments.length}return new mi(t,!1,n-s)}function xh(r){return cr(r[0])?r[0].outlets:{[U]:r}}function nc(r,i,e){if(r??=new G([],{}),r.segments.length===0&&r.hasChildren())return or(r,i,e);let t=Sh(r,i,e),n=e.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let s=new G(r.segments.slice(0,t.pathIndex),{});return s.children[U]=new G(r.segments.slice(t.pathIndex),r.children),or(s,0,n)}else return t.match&&n.length===0?new G(r.segments,{}):t.match&&!r.hasChildren()?bo(r,i,e):t.match?or(r,0,n):bo(r,i,e)}function or(r,i,e){if(e.length===0)return new G(r.segments,{});{let t=xh(e),n={};if(Object.keys(t).some(s=>s!==U)&&r.children[U]&&r.numberOfChildren===1&&r.children[U].segments.length===0){let s=or(r.children[U],i,e);return new G(r.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[s]=nc(r.children[s],i,o))}),Object.entries(r.children).forEach(([s,o])=>{t[s]===void 0&&(n[s]=o)}),new G(r.segments,n)}}function Sh(r,i,e){let t=0,n=i,s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(t>=e.length)return s;let o=r.segments[n],l=e[t];if(cr(l))break;let a=`${l}`,c=t<e.length-1?e[t+1]:null;if(n>0&&a===void 0)break;if(a&&c&&typeof c=="object"&&c.outlets===void 0){if(!Fl(a,c,o))return s;t+=2}else{if(!Fl(a,{},o))return s;t++}n++}return{match:!0,pathIndex:n,commandIndex:t}}function bo(r,i,e){let t=r.segments.slice(0,i),n=0;for(;n<e.length;){let s=e[n];if(cr(s)){let a=wh(s.outlets);return new G(t,a)}if(n===0&&Mn(e[0])){let a=r.segments[i];t.push(new Ht(a.path,Nl(e[0]))),n++;continue}let o=cr(s)?s.outlets[U]:`${s}`,l=n<e.length-1?e[n+1]:null;o&&l&&Mn(l)?(t.push(new Ht(o,Nl(l))),n+=2):(t.push(new Ht(o,{})),n++)}return new G(t,{})}function wh(r){let i={};return Object.entries(r).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(i[e]=bo(new G([],{}),0,t))}),i}function Nl(r){let i={};return Object.entries(r).forEach(([e,t])=>i[e]=`${t}`),i}function Fl(r,i,e){return r==e.path&&tt(i,e.parameters)}var ar="imperative",he=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(he||{}),Ue=class{id;url;constructor(i,e){this.id=i,this.url=e}},yi=class extends Ue{type=he.NavigationStart;navigationTrigger;restoredState;constructor(i,e,t="imperative",n=null){super(i,e),this.navigationTrigger=t,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},it=class extends Ue{urlAfterRedirects;type=he.NavigationEnd;constructor(i,e,t){super(i,e),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ne=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Ne||{}),kn=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(kn||{}),mt=class extends Ue{reason;code;type=he.NavigationCancel;constructor(i,e,t,n){super(i,e),this.reason=t,this.code=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},At=class extends Ue{reason;code;type=he.NavigationSkipped;constructor(i,e,t,n){super(i,e),this.reason=t,this.code=n}},dr=class extends Ue{error;target;type=he.NavigationError;constructor(i,e,t,n){super(i,e),this.error=t,this.target=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},An=class extends Ue{urlAfterRedirects;state;type=he.RoutesRecognized;constructor(i,e,t,n){super(i,e),this.urlAfterRedirects=t,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xo=class extends Ue{urlAfterRedirects;state;type=he.GuardsCheckStart;constructor(i,e,t,n){super(i,e),this.urlAfterRedirects=t,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},So=class extends Ue{urlAfterRedirects;state;shouldActivate;type=he.GuardsCheckEnd;constructor(i,e,t,n,s){super(i,e),this.urlAfterRedirects=t,this.state=n,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wo=class extends Ue{urlAfterRedirects;state;type=he.ResolveStart;constructor(i,e,t,n){super(i,e),this.urlAfterRedirects=t,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Co=class extends Ue{urlAfterRedirects;state;type=he.ResolveEnd;constructor(i,e,t,n){super(i,e),this.urlAfterRedirects=t,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},To=class{route;type=he.RouteConfigLoadStart;constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Eo=class{route;type=he.RouteConfigLoadEnd;constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mo=class{snapshot;type=he.ChildActivationStart;constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Io=class{snapshot;type=he.ChildActivationEnd;constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{snapshot;type=he.ActivationStart;constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ao=class{snapshot;type=he.ActivationEnd;constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dn=class{routerEvent;position;anchor;type=he.Scroll;constructor(i,e,t){this.routerEvent=i,this.position=e,this.anchor=t}toString(){let i=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${i}')`}},ur=class{},bi=class{url;navigationBehaviorOptions;constructor(i,e){this.url=i,this.navigationBehaviorOptions=e}};function Ch(r,i){return r.providers&&!r._injector&&(r._injector=Zs(r.providers,i,`Route: ${r.path}`)),r._injector??i}function Ke(r){return r.outlet||U}function Th(r,i){let e=r.filter(t=>Ke(t)===i);return e.push(...r.filter(t=>Ke(t)!==i)),e}function yr(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let i=r.parent;i;i=i.parent){let e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Do=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return yr(this.route?.snapshot)??this.rootInjector}constructor(i){this.rootInjector=i,this.children=new br(this.rootInjector)}},br=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,t){let n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Do(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(t){return new(t||r)(D(Wi))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Rn=class{_root;constructor(i){this._root=i}get root(){return this._root.value}parent(i){let e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){let e=Ro(i,this._root);return e?e.children.map(t=>t.value):[]}firstChild(i){let e=Ro(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){let e=Oo(i,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==i)}pathFromRoot(i){return Oo(i,this._root).map(e=>e.value)}};function Ro(r,i){if(r===i.value)return i;for(let e of i.children){let t=Ro(r,e);if(t)return t}return null}function Oo(r,i){if(r===i.value)return[i];for(let e of i.children){let t=Oo(r,e);if(t.length)return t.unshift(i),t}return[]}var Pe=class{value;children;constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}};function fi(r){let i={};return r&&r.children.forEach(e=>i[e.value.outlet]=e),i}var On=class extends Rn{snapshot;constructor(i,e){super(i),this.snapshot=e,Bo(this,i)}toString(){return this.snapshot.toString()}};function sc(r){let i=Eh(r),e=new Ve([new Ht("",{})]),t=new Ve({}),n=new Ve({}),s=new Ve({}),o=new Ve(""),l=new Ie(e,t,s,o,n,U,r,i.root);return l.snapshot=i.root,new On(new Pe(l,[]),i)}function Eh(r){let i={},e={},t={},n="",s=new pi([],i,t,n,e,U,r,null,{});return new Nn("",new Pe(s,[]))}var Ie=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(i,e,t,n,s,o,l,a){this.urlSubject=i,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=n,this.dataSubject=s,this.outlet=o,this.component=l,this._futureSnapshot=a,this.title=this.dataSubject?.pipe(H(c=>c[_r]))??V(void 0),this.url=i,this.params=e,this.queryParams=t,this.fragment=n,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(i=>_i(i))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(i=>_i(i))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pn(r,i,e="emptyOnly"){let t,{routeConfig:n}=r;return i!==null&&(e==="always"||n?.path===""||!i.component&&!i.routeConfig?.loadComponent)?t={params:S(S({},i.params),r.params),data:S(S({},i.data),r.data),resolve:S(S(S(S({},r.data),i.data),n?.data),r._resolvedData)}:t={params:S({},r.params),data:S({},r.data),resolve:S(S({},r.data),r._resolvedData??{})},n&&ac(n)&&(t.resolve[_r]=n.title),t}var pi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[_r]}constructor(i,e,t,n,s,o,l,a,c){this.url=i,this.params=e,this.queryParams=t,this.fragment=n,this.data=s,this.outlet=o,this.component=l,this.routeConfig=a,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_i(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_i(this.queryParams),this._queryParamMap}toString(){let i=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${i}', path:'${e}')`}},Nn=class extends Rn{url;constructor(i,e){super(e),this.url=i,Bo(this,e)}toString(){return oc(this._root)}};function Bo(r,i){i.value._routerState=r,i.children.forEach(e=>Bo(r,e))}function oc(r){let i=r.children.length>0?` { ${r.children.map(oc).join(", ")} } `:"";return`${r.value}${i}`}function mo(r){if(r.snapshot){let i=r.snapshot,e=r._futureSnapshot;r.snapshot=e,tt(i.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),i.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),tt(i.params,e.params)||r.paramsSubject.next(e.params),Xu(i.url,e.url)||r.urlSubject.next(e.url),tt(i.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Po(r,i){let e=tt(r.params,i.params)&&rh(r.url,i.url),t=!r.parent!=!i.parent;return e&&!t&&(!r.parent||Po(r.parent,i.parent))}function ac(r){return typeof r.title=="string"||r.title===null}var Mh=new z(""),Ho=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=U;activateEvents=new be;deactivateEvents=new be;attachEvents=new be;detachEvents=new be;routerOutletData=Ws(void 0);parentContexts=M(br);location=M(nl);changeDetector=M(di);inputBinder=M(jn,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:n}=e.name;if(t)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=e;let n=this.location,o=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,a=new No(e,l,n.injector,this.routerOutletData);this.activated=n.createComponent(o,{index:n.length,injector:a,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=Y({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tt]})}return r})(),No=class r{route;childContexts;parent;outletData;__ngOutletInjector(i){return new r(this.route,this.childContexts,i,this.outletData)}constructor(i,e,t,n){this.route=i,this.childContexts=e,this.parent=t,this.outletData=n}get(i,e){return i===Ie?this.route:i===br?this.childContexts:i===Mh?this.outletData:this.parent.get(i,e)}},jn=new z(""),Ll=(()=>{class r{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:t}=e,n=ni([t.queryParams,t.params,t.data]).pipe(Ge(([s,o,l],a)=>(l=S(S(S({},s),o),l),a===0?V(l):Promise.resolve(l)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==t||t.component===null){this.unsubscribeFromRouteData(e);return}let o=cl(t.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:l}of o.inputs)e.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(e,n)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})();function Ih(r,i,e){let t=hr(r,i._root,e?e._root:void 0);return new On(t,i)}function hr(r,i,e){if(e&&r.shouldReuseRoute(i.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=i.value;let n=kh(r,i,e);return new Pe(t,n)}else{if(r.shouldAttach(i.value)){let s=r.retrieve(i.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=i.value,o.children=i.children.map(l=>hr(r,l)),o}}let t=Ah(i.value),n=i.children.map(s=>hr(r,s));return new Pe(t,n)}}function kh(r,i,e){return i.children.map(t=>{for(let n of e.children)if(r.shouldReuseRoute(t.value,n.value.snapshot))return hr(r,t,n);return hr(r,t)})}function Ah(r){return new Ie(new Ve(r.url),new Ve(r.params),new Ve(r.queryParams),new Ve(r.fragment),new Ve(r.data),r.outlet,r.component,r)}var fr=class{redirectTo;navigationBehaviorOptions;constructor(i,e){this.redirectTo=i,this.navigationBehaviorOptions=e}},lc="ngNavigationCancelingError";function Fn(r,i){let{redirectTo:e,navigationBehaviorOptions:t}=Gt(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,n=cc(!1,Ne.Redirect);return n.url=e,n.navigationBehaviorOptions=t,n}function cc(r,i){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[lc]=!0,e.cancellationCode=i,e}function Dh(r){return dc(r)&&Gt(r.url)}function dc(r){return!!r&&r[lc]}var Rh=(r,i,e,t)=>H(n=>(new Fo(i,n.targetRouterState,n.currentRouterState,e,t).activate(r),n)),Fo=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(i,e,t,n,s){this.routeReuseStrategy=i,this.futureState=e,this.currState=t,this.forwardEvent=n,this.inputBindingEnabled=s}activate(i){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,i),mo(this.futureState.root),this.activateChildRoutes(e,t,i)}deactivateChildRoutes(i,e,t){let n=fi(e);i.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,n[o],t),delete n[o]}),Object.values(n).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(i,e,t){let n=i.value,s=e?e.value:null;if(n===s)if(n.component){let o=t.getContext(n.outlet);o&&this.deactivateChildRoutes(i,e,o.children)}else this.deactivateChildRoutes(i,e,t);else s&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){let t=e.getContext(i.value.outlet),n=t&&i.value.component?t.children:e,s=fi(i);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);if(t&&t.outlet){let o=t.outlet.detach(),l=t.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:o,route:i,contexts:l})}}deactivateRouteAndOutlet(i,e){let t=e.getContext(i.value.outlet),n=t&&i.value.component?t.children:e,s=fi(i);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(i,e,t){let n=fi(e);i.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],t),this.forwardEvent(new Ao(s.value.snapshot))}),i.children.length&&this.forwardEvent(new Io(i.value.snapshot))}activateRoutes(i,e,t){let n=i.value,s=e?e.value:null;if(mo(n),n===s)if(n.component){let o=t.getOrCreateContext(n.outlet);this.activateChildRoutes(i,e,o.children)}else this.activateChildRoutes(i,e,t);else if(n.component){let o=t.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let l=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),mo(l.route.value),this.activateChildRoutes(i,null,o.children)}else o.attachRef=null,o.route=n,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(i,null,o.children)}else this.activateChildRoutes(i,null,t)}},Ln=class{path;route;constructor(i){this.path=i,this.route=this.path[this.path.length-1]}},gi=class{component;route;constructor(i,e){this.component=i,this.route=e}};function Oh(r,i,e){let t=r._root,n=i?i._root:null;return nr(t,n,e,[t.value])}function Ph(r){let i=r.routeConfig?r.routeConfig.canActivateChild:null;return!i||i.length===0?null:{node:r,guards:i}}function Si(r,i){let e=Symbol(),t=i.get(r,e);return t===e?typeof r=="function"&&!Ya(r)?r:i.get(r):t}function nr(r,i,e,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=fi(i);return r.children.forEach(o=>{Nh(o,s[o.value.outlet],e,t.concat([o.value]),n),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,l])=>lr(l,e.getContext(o),n)),n}function Nh(r,i,e,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=i?i.value:null,l=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let a=Fh(o,s,s.routeConfig.runGuardsAndResolvers);a?n.canActivateChecks.push(new Ln(t)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?nr(r,i,l?l.children:null,t,n):nr(r,i,e,t,n),a&&l&&l.outlet&&l.outlet.isActivated&&n.canDeactivateChecks.push(new gi(l.outlet.component,o))}else o&&lr(i,l,n),n.canActivateChecks.push(new Ln(t)),s.component?nr(r,null,l?l.children:null,t,n):nr(r,null,e,t,n);return n}function Fh(r,i,e){if(typeof e=="function")return e(r,i);switch(e){case"pathParamsChange":return!zt(r.url,i.url);case"pathParamsOrQueryParamsChange":return!zt(r.url,i.url)||!tt(r.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Po(r,i)||!tt(r.queryParams,i.queryParams);case"paramsChange":default:return!Po(r,i)}}function lr(r,i,e){let t=fi(r),n=r.value;Object.entries(t).forEach(([s,o])=>{n.component?i?lr(o,i.children.getContext(s),e):lr(o,null,e):lr(o,i,e)}),n.component?i&&i.outlet&&i.outlet.isActivated?e.canDeactivateChecks.push(new gi(i.outlet.component,n)):e.canDeactivateChecks.push(new gi(null,n)):e.canDeactivateChecks.push(new gi(null,n))}function xr(r){return typeof r=="function"}function Lh(r){return typeof r=="boolean"}function Vh(r){return r&&xr(r.canLoad)}function jh(r){return r&&xr(r.canActivate)}function Uh(r){return r&&xr(r.canActivateChild)}function $h(r){return r&&xr(r.canDeactivate)}function Bh(r){return r&&xr(r.canMatch)}function uc(r){return r instanceof $a||r?.name==="EmptyError"}var wn=Symbol("INITIAL_VALUE");function xi(){return Ge(r=>ni(r.map(i=>i.pipe(wt(1),dn(wn)))).pipe(H(i=>{for(let e of i)if(e!==!0){if(e===wn)return wn;if(e===!1||Hh(e))return e}return!0}),Lt(i=>i!==wn),wt(1)))}function Hh(r){return Gt(r)||r instanceof fr}function zh(r,i){return Re(e=>{let{targetSnapshot:t,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?V(q(S({},e),{guardsResult:!0})):Gh(o,t,n,r).pipe(Re(l=>l&&Lh(l)?Wh(t,s,r,i):V(l)),H(l=>q(S({},e),{guardsResult:l})))})}function Gh(r,i,e,t){return Se(r).pipe(Re(n=>Jh(n.component,n.route,e,i,t)),Ct(n=>n!==!0,!0))}function Wh(r,i,e,t){return Se(i).pipe(oi(n=>ln(Yh(n.route.parent,t),qh(n.route,t),Zh(r,n.path,e),Kh(r,n.route,e))),Ct(n=>n!==!0,!0))}function qh(r,i){return r!==null&&i&&i(new ko(r)),V(!0)}function Yh(r,i){return r!==null&&i&&i(new Mo(r)),V(!0)}function Kh(r,i,e){let t=i.routeConfig?i.routeConfig.canActivate:null;if(!t||t.length===0)return V(!0);let n=t.map(s=>Us(()=>{let o=yr(i)??e,l=Si(s,o),a=jh(l)?l.canActivate(i,r):et(o,()=>l(i,r));return Dt(a).pipe(Ct())}));return V(n).pipe(xi())}function Zh(r,i,e){let t=i[i.length-1],s=i.slice(0,i.length-1).reverse().map(o=>Ph(o)).filter(o=>o!==null).map(o=>Us(()=>{let l=o.guards.map(a=>{let c=yr(o.node)??e,d=Si(a,c),g=Uh(d)?d.canActivateChild(t,r):et(c,()=>d(t,r));return Dt(g).pipe(Ct())});return V(l).pipe(xi())}));return V(s).pipe(xi())}function Jh(r,i,e,t,n){let s=i&&i.routeConfig?i.routeConfig.canDeactivate:null;if(!s||s.length===0)return V(!0);let o=s.map(l=>{let a=yr(i)??n,c=Si(l,a),d=$h(c)?c.canDeactivate(r,i,e,t):et(a,()=>c(r,i,e,t));return Dt(d).pipe(Ct())});return V(o).pipe(xi())}function Qh(r,i,e,t){let n=i.canLoad;if(n===void 0||n.length===0)return V(!0);let s=n.map(o=>{let l=Si(o,r),a=Vh(l)?l.canLoad(i,e):et(r,()=>l(i,e));return Dt(a)});return V(s).pipe(xi(),hc(t))}function hc(r){return Va(ye(i=>{if(typeof i!="boolean")throw Fn(r,i)}),H(i=>i===!0))}function Xh(r,i,e,t){let n=i.canMatch;if(!n||n.length===0)return V(!0);let s=n.map(o=>{let l=Si(o,r),a=Bh(l)?l.canMatch(i,e):et(r,()=>l(i,e));return Dt(a)});return V(s).pipe(xi(),hc(t))}var mr=class{segmentGroup;constructor(i){this.segmentGroup=i||null}},pr=class extends Error{urlTree;constructor(i){super(),this.urlTree=i}};function hi(r){return Gi(new mr(r))}function ef(r){return Gi(new te(4e3,!1))}function tf(r){return Gi(cc(!1,Ne.GuardRejected))}var Lo=class{urlSerializer;urlTree;constructor(i,e){this.urlSerializer=i,this.urlTree=e}lineralizeSegments(i,e){let t=[],n=e.root;for(;;){if(t=t.concat(n.segments),n.numberOfChildren===0)return V(t);if(n.numberOfChildren>1||!n.children[U])return ef(`${i.redirectTo}`);n=n.children[U]}}applyRedirectCommands(i,e,t,n,s){if(typeof e!="string"){let l=e,{queryParams:a,fragment:c,routeConfig:d,url:g,outlet:b,params:x,data:f,title:w}=n,R=et(s,()=>l({params:x,data:f,queryParams:a,fragment:c,routeConfig:d,url:g,outlet:b,title:w}));if(R instanceof pt)throw new pr(R);e=R}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,t);if(e[0]==="/")throw new pr(o);return o}applyRedirectCreateUrlTree(i,e,t,n){let s=this.createSegmentGroup(i,e.root,t,n);return new pt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){let t={};return Object.entries(i).forEach(([n,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);t[n]=e[l]}else t[n]=s}),t}createSegmentGroup(i,e,t,n){let s=this.createSegments(i,e.segments,t,n),o={};return Object.entries(e.children).forEach(([l,a])=>{o[l]=this.createSegmentGroup(i,a,t,n)}),new G(s,o)}createSegments(i,e,t,n){return e.map(s=>s.path[0]===":"?this.findPosParam(i,s,n):this.findOrReturn(s,t))}findPosParam(i,e,t){let n=t[e.path.substring(1)];if(!n)throw new te(4001,!1);return n}findOrReturn(i,e){let t=0;for(let n of e){if(n.path===i.path)return e.splice(t),n;t++}return i}},Vo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rf(r,i,e,t,n){let s=fc(r,i,e);return s.matched?(t=Ch(i,t),Xh(t,i,e,n).pipe(H(o=>o===!0?s:S({},Vo)))):V(s)}function fc(r,i,e){if(i.path==="**")return nf(e);if(i.path==="")return i.pathMatch==="full"&&(r.hasChildren()||e.length>0)?S({},Vo):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let n=(i.matcher||Qu)(e,r,i);if(!n)return S({},Vo);let s={};Object.entries(n.posParams??{}).forEach(([l,a])=>{s[l]=a.path});let o=n.consumed.length>0?S(S({},s),n.consumed[n.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function nf(r){return{matched:!0,parameters:r.length>0?Wl(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function Vl(r,i,e,t){return e.length>0&&af(r,e,t)?{segmentGroup:new G(i,of(t,new G(e,r.children))),slicedSegments:[]}:e.length===0&&lf(r,e,t)?{segmentGroup:new G(r.segments,sf(r,e,t,r.children)),slicedSegments:e}:{segmentGroup:new G(r.segments,r.children),slicedSegments:e}}function sf(r,i,e,t){let n={};for(let s of e)if(Un(r,i,s)&&!t[Ke(s)]){let o=new G([],{});n[Ke(s)]=o}return S(S({},t),n)}function of(r,i){let e={};e[U]=i;for(let t of r)if(t.path===""&&Ke(t)!==U){let n=new G([],{});e[Ke(t)]=n}return e}function af(r,i,e){return e.some(t=>Un(r,i,t)&&Ke(t)!==U)}function lf(r,i,e){return e.some(t=>Un(r,i,t))}function Un(r,i,e){return(r.hasChildren()||i.length>0)&&e.pathMatch==="full"?!1:e.path===""}function cf(r,i,e){return i.length===0&&!r.children[e]}var jo=class{};function df(r,i,e,t,n,s,o="emptyOnly"){return new Uo(r,i,e,t,n,o,s).recognize()}var uf=31,Uo=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(i,e,t,n,s,o,l){this.injector=i,this.configLoader=e,this.rootComponentType=t,this.config=n,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=l,this.applyRedirects=new Lo(this.urlSerializer,this.urlTree)}noMatchError(i){return new te(4002,`'${i.segmentGroup}'`)}recognize(){let i=Vl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(i).pipe(H(({children:e,rootSnapshot:t})=>{let n=new Pe(t,e),s=new Nn("",n),o=_h(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(i){let e=new pi([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,i,U,e).pipe(H(t=>({children:t,rootSnapshot:e})),si(t=>{if(t instanceof pr)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof mr?this.noMatchError(t):t}))}processSegmentGroup(i,e,t,n,s){return t.segments.length===0&&t.hasChildren()?this.processChildren(i,e,t,s):this.processSegment(i,e,t,t.segments,n,!0,s).pipe(H(o=>o instanceof Pe?[o]:[]))}processChildren(i,e,t,n){let s=[];for(let o of Object.keys(t.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(oi(o=>{let l=t.children[o],a=Th(e,o);return this.processSegmentGroup(i,a,l,o,n)}),Wa((o,l)=>(o.push(...l),o)),$s(null),Ga(),Re(o=>{if(o===null)return hi(t);let l=mc(o);return hf(l),V(l)}))}processSegment(i,e,t,n,s,o,l){return Se(e).pipe(oi(a=>this.processSegmentAgainstRoute(a._injector??i,e,a,t,n,s,o,l).pipe(si(c=>{if(c instanceof mr)return V(null);throw c}))),Ct(a=>!!a),si(a=>{if(uc(a))return cf(t,n,s)?V(new jo):hi(t);throw a}))}processSegmentAgainstRoute(i,e,t,n,s,o,l,a){return Ke(t)!==o&&(o===U||!Un(n,s,t))?hi(n):t.redirectTo===void 0?this.matchSegmentAgainstRoute(i,n,t,s,o,a):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(i,n,e,t,s,o,a):hi(n)}expandSegmentAgainstRouteUsingRedirect(i,e,t,n,s,o,l){let{matched:a,parameters:c,consumedSegments:d,positionalParamSegments:g,remainingSegments:b}=fc(e,n,s);if(!a)return hi(e);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uf&&(this.allowRedirects=!1));let x=new pi(s,c,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,jl(n),Ke(n),n.component??n._loadedComponent??null,n,Ul(n)),f=Pn(x,l,this.paramsInheritanceStrategy);x.params=Object.freeze(f.params),x.data=Object.freeze(f.data);let w=this.applyRedirects.applyRedirectCommands(d,n.redirectTo,g,x,i);return this.applyRedirects.lineralizeSegments(n,w).pipe(Re(R=>this.processSegment(i,t,e,R.concat(b),o,!1,l)))}matchSegmentAgainstRoute(i,e,t,n,s,o){let l=rf(e,t,n,i,this.urlSerializer);return t.path==="**"&&(e.children={}),l.pipe(Ge(a=>a.matched?(i=t._injector??i,this.getChildConfig(i,t,n).pipe(Ge(({routes:c})=>{let d=t._loadedInjector??i,{parameters:g,consumedSegments:b,remainingSegments:x}=a,f=new pi(b,g,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,jl(t),Ke(t),t.component??t._loadedComponent??null,t,Ul(t)),w=Pn(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(w.params),f.data=Object.freeze(w.data);let{segmentGroup:R,slicedSegments:K}=Vl(e,b,x,c);if(K.length===0&&R.hasChildren())return this.processChildren(d,c,R,f).pipe(H(pe=>new Pe(f,pe)));if(c.length===0&&K.length===0)return V(new Pe(f,[]));let Te=Ke(t)===s;return this.processSegment(d,c,R,K,Te?U:s,!0,f).pipe(H(pe=>new Pe(f,pe instanceof Pe?[pe]:[])))}))):hi(e)))}getChildConfig(i,e,t){return e.children?V({routes:e.children,injector:i}):e.loadChildren?e._loadedRoutes!==void 0?V({routes:e._loadedRoutes,injector:e._loadedInjector}):Qh(i,e,t,this.urlSerializer).pipe(Re(n=>n?this.configLoader.loadChildren(i,e).pipe(ye(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):tf(e))):V({routes:[],injector:i})}};function hf(r){r.sort((i,e)=>i.value.outlet===U?-1:e.value.outlet===U?1:i.value.outlet.localeCompare(e.value.outlet))}function ff(r){let i=r.value.routeConfig;return i&&i.path===""}function mc(r){let i=[],e=new Set;for(let t of r){if(!ff(t)){i.push(t);continue}let n=i.find(s=>t.value.routeConfig===s.value.routeConfig);n!==void 0?(n.children.push(...t.children),e.add(n)):i.push(t)}for(let t of e){let n=mc(t.children);i.push(new Pe(t.value,n))}return i.filter(t=>!e.has(t))}function jl(r){return r.data||{}}function Ul(r){return r.resolve||{}}function mf(r,i,e,t,n,s){return Re(o=>df(r,i,e,t,o.extractedUrl,n,s).pipe(H(({state:l,tree:a})=>q(S({},o),{targetSnapshot:l,urlAfterRedirects:a}))))}function pf(r,i){return Re(e=>{let{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return V(e);let s=new Set(n.map(a=>a.route)),o=new Set;for(let a of s)if(!o.has(a))for(let c of pc(a))o.add(c);let l=0;return Se(o).pipe(oi(a=>s.has(a)?gf(a,t,r,i):(a.data=Pn(a,a.parent,r).resolve,V(void 0))),ye(()=>l++),Bs(1),Re(a=>l===o.size?V(e):St))})}function pc(r){let i=r.children.map(e=>pc(e)).flat();return[r,...i]}function gf(r,i,e,t){let n=r.routeConfig,s=r._resolve;return n?.title!==void 0&&!ac(n)&&(s[_r]=n.title),_f(s,r,i,t).pipe(H(o=>(r._resolvedData=o,r.data=Pn(r,r.parent,e).resolve,null)))}function _f(r,i,e,t){let n=_o(r);if(n.length===0)return V({});let s={};return Se(n).pipe(Re(o=>vf(r[o],i,e,t).pipe(Ct(),ye(l=>{if(l instanceof fr)throw Fn(new vi,l);s[o]=l}))),Bs(1),za(s),si(o=>uc(o)?St:Gi(o)))}function vf(r,i,e,t){let n=yr(i)??t,s=Si(r,n),o=s.resolve?s.resolve(i,e):et(n,()=>s(i,e));return Dt(o)}function po(r){return Ge(i=>{let e=r(i);return e?Se(e).pipe(H(()=>i)):V(i)})}var gc=(()=>{class r{buildTitle(e){let t,n=e.root;for(;n!==void 0;)t=this.getResolvedTitleForRoute(n)??t,n=n.children.find(s=>s.outlet===U);return t}getResolvedTitleForRoute(e){return e.data[_r]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:()=>M(yf),providedIn:"root"})}return r})(),yf=(()=>{class r extends gc{title;constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static \u0275fac=function(t){return new(t||r)(D(Rl))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Sr=new z("",{providedIn:"root",factory:()=>({})}),bf=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=X({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){t&1&&ie(0,"router-outlet")},dependencies:[Ho],encapsulation:2})}return r})();function zo(r){let i=r.children&&r.children.map(zo),e=i?q(S({},r),{children:i}):S({},r);return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==U&&(e.component=bf),e}var gr=new z(""),Go=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(_n);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return V(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=Dt(e.loadComponent()).pipe(H(_c),ye(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),cn(()=>{this.componentLoaders.delete(e)})),n=new Vs(t,()=>new Le).pipe(Ls());return this.componentLoaders.set(e,n),n}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return V({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let s=xf(t,this.compiler,e,this.onLoadEndListener).pipe(cn(()=>{this.childrenLoaders.delete(t)})),o=new Vs(s,()=>new Le).pipe(Ls());return this.childrenLoaders.set(t,o),o}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function xf(r,i,e,t){return Dt(r.loadChildren()).pipe(H(_c),Re(n=>n instanceof sl||Array.isArray(n)?V(n):Se(i.compileModuleAsync(n))),H(n=>{t&&t(r);let s,o,l=!1;return Array.isArray(n)?(o=n,l=!0):(s=n.create(e).injector,o=s.get(gr,[],{optional:!0,self:!0}).flat()),{routes:o.map(zo),injector:s}}))}function Sf(r){return r&&typeof r=="object"&&"default"in r}function _c(r){return Sf(r)?r.default:r}var Wo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:()=>M(wf),providedIn:"root"})}return r})(),wf=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),vc=new z(""),yc=new z("");function Cf(r,i,e){let t=r.get(yc),n=r.get(ge);return r.get(Me).runOutsideAngular(()=>{if(!n.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),l=n.startViewTransition(()=>(s(),Tf(r))),{onViewTransitionCreated:a}=t;return a&&et(r,()=>a({transition:l,from:i,to:e})),o})}function Tf(r){return new Promise(i=>{Ys({read:()=>setTimeout(i)},{injector:r})})}var bc=new z(""),qo=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Le;transitionAbortSubject=new Le;configLoader=M(Go);environmentInjector=M(Wi);urlSerializer=M(vr);rootContexts=M(br);location=M(Xi);inputBindingEnabled=M(jn,{optional:!0})!==null;titleStrategy=M(gc);options=M(Sr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Wo);createViewTransition=M(vc,{optional:!0});navigationErrorHandler=M(bc,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>V(void 0);rootComponentType=null;constructor(){let e=n=>this.events.next(new To(n)),t=n=>this.events.next(new Eo(n));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(q(S(S({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,n){return this.transitions=new Ve({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ar,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lt(s=>s.id!==0),H(s=>q(S({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ge(s=>{let o=!1,l=!1;return V(s).pipe(Ge(a=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ne.SupersededByNewNavigation),St;this.currentTransition=s,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?q(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&d!=="reload"){let g="";return this.events.next(new At(a.id,this.urlSerializer.serialize(a.rawUrl),g,kn.IgnoredSameUrlNavigation)),a.resolve(!1),St}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return V(a).pipe(Ge(g=>{let b=this.transitions?.getValue();return this.events.next(new yi(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),b!==this.transitions?.getValue()?St:Promise.resolve(g)}),mf(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ye(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=q(S({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let b=new An(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(b)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:g,extractedUrl:b,source:x,restoredState:f,extras:w}=a,R=new yi(g,this.urlSerializer.serialize(b),x,f);this.events.next(R);let K=sc(this.rootComponentType).snapshot;return this.currentTransition=s=q(S({},a),{targetSnapshot:K,urlAfterRedirects:b,extras:q(S({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,V(s)}else{let g="";return this.events.next(new At(a.id,this.urlSerializer.serialize(a.extractedUrl),g,kn.IgnoredByUrlHandlingStrategy)),a.resolve(!1),St}}),ye(a=>{let c=new xo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),H(a=>(this.currentTransition=s=q(S({},a),{guards:Oh(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),s)),zh(this.environmentInjector,a=>this.events.next(a)),ye(a=>{if(s.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Fn(this.urlSerializer,a.guardsResult);let c=new So(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),Lt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Ne.GuardRejected),!1)),po(a=>{if(a.guards.canActivateChecks.length)return V(a).pipe(ye(c=>{let d=new wo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Ge(c=>{let d=!1;return V(c).pipe(pf(this.paramsInheritanceStrategy,this.environmentInjector),ye({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Ne.NoDataFromResolver)}}))}),ye(c=>{let d=new Co(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),po(a=>{let c=d=>{let g=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(d.routeConfig).pipe(ye(b=>{d.component=b}),H(()=>{})));for(let b of d.children)g.push(...c(b));return g};return ni(c(a.targetSnapshot.root)).pipe($s(null),wt(1))}),po(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:a,targetSnapshot:c}=s,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Se(d).pipe(H(()=>s)):V(s)}),H(a=>{let c=Ih(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=s=q(S({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),ye(()=>{this.events.next(new ur)}),Rh(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),wt(1),ye({next:a=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new it(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{o=!0}}),un(this.transitionAbortSubject.pipe(ye(a=>{throw a}))),cn(()=>{!o&&!l&&this.cancelNavigationTransition(s,"",Ne.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),si(a=>{if(l=!0,dc(a))this.events.next(new mt(s.id,this.urlSerializer.serialize(s.extractedUrl),a.message,a.cancellationCode)),Dh(a)?this.events.next(new bi(a.url,a.navigationBehaviorOptions)):s.resolve(!1);else{let c=new dr(s.id,this.urlSerializer.serialize(s.extractedUrl),a,s.targetSnapshot??void 0);try{let d=et(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof fr){let{message:g,cancellationCode:b}=Fn(this.urlSerializer,d);this.events.next(new mt(s.id,this.urlSerializer.serialize(s.extractedUrl),g,b)),this.events.next(new bi(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return St}))}))}cancelNavigationTransition(e,t,n){let s=new mt(e.id,this.urlSerializer.serialize(e.extractedUrl),t,n);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==t?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ef(r){return r!==ar}var Mf=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:()=>M(If),providedIn:"root"})}return r})(),$o=class{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}},If=(()=>{class r extends $o{static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),xc=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:()=>M(kf),providedIn:"root"})}return r})(),kf=(()=>{class r extends xc{location=M(Xi);urlSerializer=M(vr);options=M(Sr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=M(Wo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=sc(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof yi)this.stateMemento=this.createStateMemento();else if(e instanceof At)this.rawUrlTree=t.initialUrl;else if(e instanceof An){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(t.targetBrowserUrl??n,t)}}else e instanceof ur?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(t.targetBrowserUrl??this.rawUrlTree,t)):e instanceof mt&&(e.code===Ne.GuardRejected||e.code===Ne.NoDataFromResolver)?this.restoreHistory(t):e instanceof dr?this.restoreHistory(t,!0):e instanceof it&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let n=e instanceof pt?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl){let s=this.browserPageId,o=S(S({},t.extras.state),this.generateNgRouterState(t.id,s));this.location.replaceState(n,"",o)}else{let s=S(S({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(n,"",s)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,s=this.currentPageId-n;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),sr=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(sr||{});function Sc(r,i){r.events.pipe(Lt(e=>e instanceof it||e instanceof mt||e instanceof dr||e instanceof At),H(e=>e instanceof it||e instanceof At?sr.COMPLETE:(e instanceof mt?e.code===Ne.Redirect||e.code===Ne.SupersededByNewNavigation:!1)?sr.REDIRECTING:sr.FAILED),Lt(e=>e!==sr.REDIRECTING),wt(1)).subscribe(()=>{i()})}var Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Df={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_e=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(pn);stateManager=M(xc);options=M(Sr,{optional:!0})||{};pendingTasks=M(Xa);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(qo);urlSerializer=M(vr);location=M(Xi);urlHandlingStrategy=M(Wo);_events=new Le;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(Mf);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(gr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(jn,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new La;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let n=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(n!==null&&s!==null){if(this.stateManager.handleRouterEvent(t,s),t instanceof mt&&t.code!==Ne.Redirect&&t.code!==Ne.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof it)this.navigated=!0;else if(t instanceof bi){let o=t.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(t.url,n.currentRawUrl),a=S({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ef(n.source)},o);this.scheduleNavigation(l,ar,null,a,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}Of(t)&&this._events.next(t)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ar,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,n){let s={replaceUrl:!0},o=n?.navigationId?n:null;if(n){let a=S({},n);delete a.navigationId,delete a.\u0275routerPageId,Object.keys(a).length!==0&&(s.state=a)}let l=this.parseUrl(e);this.scheduleNavigation(l,t,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(zo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:n,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:a}=t,c=a?this.currentUrlTree.fragment:o,d=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":d=S(S({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let g;try{let b=n?n.snapshot:this.routerState.snapshot.root;g=tc(b)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),g=this.currentUrlTree.root}return ic(g,e,d,c??null)}navigateByUrl(e,t={skipLocationChange:!1}){let n=Gt(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,ar,null,t)}navigate(e,t={skipLocationChange:!1}){return Rf(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let n;if(t===!0?n=S({},Af):t===!1?n=S({},Df):n=t,Gt(e))return Ol(this.currentUrlTree,e,n);let s=this.parseUrl(e);return Ol(this.currentUrlTree,s,n)}removeEmptyProps(e){return Object.entries(e).reduce((t,[n,s])=>(s!=null&&(t[n]=s),t),{})}scheduleNavigation(e,t,n,s,o){if(this.disposed)return Promise.resolve(!1);let l,a,c;o?(l=o.resolve,a=o.reject,c=o.promise):c=new Promise((g,b)=>{l=g,a=b});let d=this.pendingTasks.add();return Sc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:l,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(g=>Promise.reject(g))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Rf(r){for(let i=0;i<r.length;i++)if(r[i]==null)throw new te(4008,!1)}function Of(r){return!(r instanceof ur)&&!(r instanceof bi)}var $e=(()=>{class r{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Le;constructor(e,t,n,s,o,l){this.router=e,this.route=t,this.tabIndexAttribute=n,this.renderer=s,this.el=o,this.locationStrategy=l;let a=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=a==="a"||a==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof it&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,t,n,s,o){let l=this.urlTree;if(l===null||this.isAnchorElement&&(e!==0||t||n||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let a={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,a),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let t=this.href===null?null:rl(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(e,t){let n=this.renderer,s=this.el.nativeElement;t!==null?n.setAttribute(s,e,t):n.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Gt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(t){return new(t||r)(A(_e),A(Ie),Ja("tabindex"),A(qe),A(Oe),A(Qi))};static \u0275dir=Y({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,n){t&1&&T("click",function(o){return n.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),t&2&&Bt("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",It],skipLocationChange:[2,"skipLocationChange","skipLocationChange",It],replaceUrl:[2,"replaceUrl","replaceUrl",It],routerLink:"routerLink"},features:[$t,Tt]})}return r})();var Vn=class{};var Pf=(()=>{class r{router;injector;preloadingStrategy;loader;subscription;constructor(e,t,n,s,o){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Lt(e=>e instanceof it),oi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){let n=[];for(let s of t){s.providers&&!s._injector&&(s._injector=Zs(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,l=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&n.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&n.push(this.processRoutes(l,s.children??s._loadedRoutes))}return Se(n).pipe(js())}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{let n;t.loadChildren&&t.canLoad===void 0?n=this.loader.loadChildren(e,t):n=V(null);let s=n.pipe(Re(o=>o===null?V(void 0):(t._loadedRoutes=o.routes,t._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(t.loadComponent&&!t._loadedComponent){let o=this.loader.loadComponent(t);return Se([s,o]).pipe(js())}else return s})}static \u0275fac=function(t){return new(t||r)(D(_e),D(_n),D(Wi),D(Vn),D(Go))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),wc=new z(""),Nf=(()=>{class r{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,t,n,s,o={}){this.urlSerializer=e,this.transitions=t,this.viewportScroller=n,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof yi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof it?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof At&&e.code===kn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Dn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,t))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(t){fn()};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})();function Cc(r,...i){return Vt([{provide:gr,multi:!0,useValue:r},[],{provide:Ie,useFactory:Tc,deps:[_e]},{provide:Qs,multi:!0,useFactory:Ec},i.map(e=>e.\u0275providers)])}function Tc(r){return r.routerState.root}function wr(r,i){return{\u0275kind:r,\u0275providers:i}}function Ec(){let r=M(ai);return i=>{let e=r.get(Xs);if(i!==e.components[0])return;let t=r.get(_e),n=r.get(Mc);r.get(Yo)===1&&t.initialNavigation(),r.get(Ic,null,Hs.Optional)?.setUpPreloading(),r.get(wc,null,Hs.Optional)?.init(),t.resetRootComponentType(e.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var Mc=new z("",{factory:()=>new Le}),Yo=new z("",{providedIn:"root",factory:()=>1});function Ff(){return wr(2,[{provide:Yo,useValue:0},{provide:Zi,multi:!0,deps:[ai],useFactory:i=>{let e=i.get(hl,Promise.resolve());return()=>e.then(()=>new Promise(t=>{let n=i.get(_e),s=i.get(Mc);Sc(n,()=>{t(!0)}),i.get(qo).afterPreactivation=()=>(t(!0),s.closed?V(void 0):s),n.initialNavigation()}))}}])}function Lf(){return wr(3,[{provide:Zi,multi:!0,useFactory:()=>{let i=M(_e);return()=>{i.setUpLocationChangeListener()}}},{provide:Yo,useValue:2}])}var Ic=new z("");function Vf(r){return wr(0,[{provide:Ic,useExisting:Pf},{provide:Vn,useExisting:r}])}function jf(){return wr(8,[Ll,{provide:jn,useExisting:Ll}])}function Uf(r){let i=[{provide:vc,useValue:Cf},{provide:yc,useValue:S({skipNextTransition:!!r?.skipInitialTransition},r)}];return wr(9,i)}var $l=new z("ROUTER_FORROOT_GUARD"),$f=[Xi,{provide:vr,useClass:vi},_e,br,{provide:Ie,useFactory:Tc,deps:[_e]},Go,[]],kc=(()=>{class r{constructor(e){}static forRoot(e,t){return{ngModule:r,providers:[$f,[],{provide:gr,multi:!0,useValue:e},{provide:$l,useFactory:Gf,deps:[[_e,new zs,new Ka]]},t?.errorHandler?{provide:bc,useValue:t.errorHandler}:[],{provide:Sr,useValue:t||{}},t?.useHash?Hf():zf(),Bf(),t?.preloadingStrategy?Vf(t.preloadingStrategy).\u0275providers:[],t?.initialNavigation?Wf(t):[],t?.bindToComponentInputs?jf().\u0275providers:[],t?.enableViewTransitions?Uf().\u0275providers:[],qf()]}}static forChild(e){return{ngModule:r,providers:[{provide:gr,multi:!0,useValue:e}]}}static \u0275fac=function(t){return new(t||r)(D($l,8))};static \u0275mod=se({type:r});static \u0275inj=ne({})}return r})();function Bf(){return{provide:wc,useFactory:()=>{let r=M(vl),i=M(Me),e=M(Sr),t=M(qo),n=M(vr);return e.scrollOffset&&r.setOffset(e.scrollOffset),new Nf(n,t,r,i,e)}}}function Hf(){return{provide:Qi,useClass:ml}}function zf(){return{provide:Qi,useClass:fl}}function Gf(r){return"guarded"}function Wf(r){return[r.initialNavigation==="disabled"?Lf().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Ff().\u0275providers:[]]}var Bl=new z("");function qf(){return[{provide:Bl,useFactory:Ec},{provide:Qs,multi:!0,useExisting:Bl}]}var Ac=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)};var Cr=class extends Error{constructor(i,e="FunctionsError",t){super(i),this.name=e,this.context=t}},$n=class extends Cr{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}},Bn=class extends Cr{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}},Hn=class extends Cr{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}},Ko=function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r}(Ko||{});var Yf=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},Tr=class{constructor(i,{headers:e={},customFetch:t,region:n=Ko.Any}={}){this.url=i,this.headers=e,this.region=n,this.fetch=Ac(t)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i,e={}){var t;return Yf(this,void 0,void 0,function*(){try{let{headers:n,method:s,body:o}=e,l={},{region:a}=e;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));let d=yield this.fetch(`${this.url}/${i}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(f=>{throw new $n(f)}),g=d.headers.get("x-relay-error");if(g&&g==="true")throw new Bn(d);if(!d.ok)throw new Hn(d);let b=((t=d.headers.get("Content-Type"))!==null&&t!==void 0?t:"text/plain").split(";")[0].trim(),x;return b==="application/json"?x=yield d.json():b==="application/octet-stream"?x=yield d.blob():b==="text/event-stream"?x=d:b==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null}}catch(n){return{data:null,error:n}}})}};var Hc=Eu(Bc(),1),{PostgrestClient:zc,PostgrestQueryBuilder:ev,PostgrestFilterBuilder:tv,PostgrestTransformBuilder:iv,PostgrestBuilder:rv,PostgrestError:nv}=Hc.default;var Gc="2.11.2";var Wc={"X-Client-Info":`realtime-js/${Gc}`},qc="1.0.0",qn=1e4,Yc=1e3,Ti=function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r}(Ti||{}),Fe=function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r}(Fe||{}),Be=function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r}(Be||{}),aa=function(r){return r.websocket="websocket",r}(aa||{}),Wt=function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r}(Wt||{});var Yn=class{constructor(){this.HEADER_LENGTH=1}decode(i,e){return i.constructor===ArrayBuffer?e(this._binaryDecode(i)):e(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){let e=new DataView(i),t=new TextDecoder;return this._decodeBroadcast(i,e,t)}_decodeBroadcast(i,e,t){let n=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,l=t.decode(i.slice(o,o+n));o=o+n;let a=t.decode(i.slice(o,o+s));o=o+s;let c=JSON.parse(t.decode(i.slice(o,i.byteLength)));return{ref:null,topic:l,event:a,payload:c}}};var Ei=class{constructor(i,e){this.callback=i,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ee=function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r}(ee||{}),ca=(r,i,e={})=>{var t;let n=(t=e.skipTypes)!==null&&t!==void 0?t:[];return Object.keys(i).reduce((s,o)=>(s[o]=om(o,r,i,n),s),{})},om=(r,i,e,t)=>{let n=i.find(l=>l.name===r),s=n?.type,o=e[r];return s&&!t.includes(s)?Kc(s,o):la(o)},Kc=(r,i)=>{if(r.charAt(0)==="_"){let e=r.slice(1,r.length);return dm(i,e)}switch(r){case ee.bool:return am(i);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return lm(i);case ee.json:case ee.jsonb:return cm(i);case ee.timestamp:return um(i);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return la(i);default:return la(i)}},la=r=>r,am=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},lm=r=>{if(typeof r=="string"){let i=parseFloat(r);if(!Number.isNaN(i))return i}return r},cm=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(i){return console.log(`JSON parse error: ${i}`),r}return r},dm=(r,i)=>{if(typeof r!="string")return r;let e=r.length-1,t=r[e];if(r[0]==="{"&&t==="}"){let s,o=r.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>Kc(i,l))}return r},um=r=>typeof r=="string"?r.replace(" ","T"):r,Kn=r=>{let i=r;return i=i.replace(/^ws/i,"http"),i=i.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),i.replace(/\/+$/,"")};var Mi=class{constructor(i,e,t={},n=qn){this.channel=i,this.event=e,this.payload=t,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,e){var t;return this._hasReceived(i)&&e((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:i,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let i=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:e}){this.recHooks.filter(t=>t.status===i).forEach(t=>t.callback(e))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}};var Rr=class r{constructor(i,e){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let t=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},n=>{let{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r.syncState(this.state,n,s,o),this.pendingDiffs.forEach(a=>{this.state=r.syncDiff(this.state,a,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(t.diff,{},n=>{let{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=r.syncDiff(this.state,n,s,o),l())}),this.onJoin((n,s,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:s,newPresences:o})}),this.onLeave((n,s,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,e,t,n){let s=this.cloneDeep(i),o=this.transformState(e),l={},a={};return this.map(s,(c,d)=>{o[c]||(a[c]=d)}),this.map(o,(c,d)=>{let g=s[c];if(g){let b=d.map(R=>R.presence_ref),x=g.map(R=>R.presence_ref),f=d.filter(R=>x.indexOf(R.presence_ref)<0),w=g.filter(R=>b.indexOf(R.presence_ref)<0);f.length>0&&(l[c]=f),w.length>0&&(a[c]=w)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:a},t,n)}static syncDiff(i,e,t,n){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return t||(t=()=>{}),n||(n=()=>{}),this.map(s,(l,a)=>{var c;let d=(c=i[l])!==null&&c!==void 0?c:[];if(i[l]=this.cloneDeep(a),d.length>0){let g=i[l].map(x=>x.presence_ref),b=d.filter(x=>g.indexOf(x.presence_ref)<0);i[l].unshift(...b)}t(l,d,a)}),this.map(o,(l,a)=>{let c=i[l];if(!c)return;let d=a.map(g=>g.presence_ref);c=c.filter(g=>d.indexOf(g.presence_ref)<0),i[l]=c,n(l,c,a),c.length===0&&delete i[l]}),i}static map(i,e){return Object.getOwnPropertyNames(i).map(t=>e(t,i[t]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((e,t)=>{let n=i[t];return"metas"in n?e[t]=n.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[t]=n,e},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var gt=function(r){return r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR",r}(gt||{});var Or=class r{constructor(i,e={config:{}},t){this.topic=i,this.params=e,this.socket=t,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Mi(this,Be.join,this.params,this.timeout),this.rejoinTimer=new Ei(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Be.reply,{},(n,s)=>{this._trigger(this._replyEventName(s),n)}),this.presence=new Rr(this),this.broadcastEndpointURL=Kn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(i,e=this.timeout){var t,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(d=>i?.(gt.CHANNEL_ERROR,d)),this._onClose(()=>i?.(gt.CLOSED));let a={},c={broadcast:s,presence:o,postgres_changes:(n=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(d=>d.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",g=>u(this,[g],function*({postgres_changes:d}){var b;if(this.socket.setAuth(),d===void 0){i?.(gt.SUBSCRIBED);return}else{let x=this.bindings.postgres_changes,f=(b=x?.length)!==null&&b!==void 0?b:0,w=[];for(let R=0;R<f;R++){let K=x[R],{filter:{event:Te,schema:pe,table:Ee,filter:Ae}}=K,xt=d&&d[R];if(xt&&xt.event===Te&&xt.schema===pe&&xt.table===Ee&&xt.filter===Ae)w.push(Object.assign(Object.assign({},K),{id:xt.id}));else{this.unsubscribe(),i?.(gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,i&&i(gt.SUBSCRIBED);return}})).receive("error",d=>{i?.(gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{i?.(gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){return u(this,arguments,function*(i,e={}){return yield this.send({type:"presence",event:"track",payload:i},e.timeout||this.timeout)})}untrack(){return u(this,arguments,function*(i={}){return yield this.send({type:"presence",event:"untrack"},i)})}on(i,e,t){return this._on(i,e,t)}send(t){return u(this,arguments,function*(i,e={}){var n,s;if(!this._canPush()&&i.type==="broadcast"){let{event:o,payload:l}=i,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{let d=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=e.timeout)!==null&&n!==void 0?n:this.timeout);return yield(s=d.body)===null||s===void 0?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,a,c;let d=this._push(i.type,i,e.timeout||this.timeout);i.type==="broadcast"&&!(!((c=(a=(l=this.params)===null||l===void 0?void 0:l.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Fe.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Be.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(t=>{let n=new Mi(this,Be.leave,{},i);n.receive("ok",()=>{e(),t("ok")}).receive("timeout",()=>{e(),t("timed out")}).receive("error",()=>{t("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_fetchWithTimeout(i,e,t){return u(this,null,function*(){let n=new AbortController,s=setTimeout(()=>n.abort(),t),o=yield this.socket.fetch(i,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(s),o})}_push(i,e,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Mi(this,i,e,t);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(i,e,t){return e}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,e,t){var n,s;let o=i.toLocaleLowerCase(),{close:l,error:a,leave:c,join:d}=Be;if(t&&[l,a,c,d].indexOf(o)>=0&&t!==this._joinRef())return;let b=this._onMessage(o,e,t);if(e&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var f,w,R;return((f=x.filter)===null||f===void 0?void 0:f.event)==="*"||((R=(w=x.filter)===null||w===void 0?void 0:w.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===o}).map(x=>x.callback(b,t)):(s=this.bindings[o])===null||s===void 0||s.filter(x=>{var f,w,R,K,Te,pe;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){let Ee=x.id,Ae=(f=x.filter)===null||f===void 0?void 0:f.event;return Ee&&((w=e.ids)===null||w===void 0?void 0:w.includes(Ee))&&(Ae==="*"||Ae?.toLocaleLowerCase()===((R=e.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{let Ee=(Te=(K=x?.filter)===null||K===void 0?void 0:K.event)===null||Te===void 0?void 0:Te.toLocaleLowerCase();return Ee==="*"||Ee===((pe=e?.event)===null||pe===void 0?void 0:pe.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof b=="object"&&"ids"in b){let f=b.data,{schema:w,table:R,commit_timestamp:K,type:Te,errors:pe}=f;b=Object.assign(Object.assign({},{schema:w,table:R,commit_timestamp:K,eventType:Te,new:{},old:{},errors:pe}),this._getPayloadRecords(f))}x.callback(b,t)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,e,t){let n=i.toLocaleLowerCase(),s={type:n,filter:e,callback:t};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(i,e){let t=i.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(n=>{var s;return!(((s=n.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===t&&r.isEqual(n.filter,e))}),this}static isEqual(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(let t in i)if(i[t]!==e[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Be.close,{},i)}_onError(i){this._on(Be.error,{},e=>i(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(i))}_getPayloadRecords(i){let e={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(e.new=ca(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(e.old=ca(i.columns,i.old_record)),e}};var fm=()=>{},mm=typeof WebSocket<"u",pm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Pr=class{constructor(i,e){var t;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Wc,this.params={},this.timeout=qn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fm,this.conn=null,this.sendBuffer=[],this.serializer=new Yn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>import("./chunk-NPJLHOA5.js").then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${i}/${aa.websocket}`,this.httpEndpoint=Kn(i),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let n=(t=e?.params)===null||t===void 0?void 0:t.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=e?.encode?e.encode:(s,o)=>o(JSON.stringify(s)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ei(()=>u(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(mm){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new da(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-GFTZZNGD.js").then(({default:i})=>{this.conn=new i(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qc}))}disconnect(i,e){this.conn&&(this.conn.onclose=function(){},i?this.conn.close(i,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(i){return u(this,null,function*(){let e=yield i.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return u(this,null,function*(){let i=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),i})}log(i,e,t){this.logger(i,e,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Ti.connecting:return Wt.Connecting;case Ti.open:return Wt.Open;case Ti.closing:return Wt.Closing;default:return Wt.Closed}}isConnected(){return this.connectionState()===Wt.Open}channel(i,e={config:{}}){let t=new Or(`realtime:${i}`,e,this);return this.channels.push(t),t}push(i){let{topic:e,event:t,payload:n,ref:s}=i,o=()=>{this.encode(i,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${e} ${t} (${s})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(i=null){return u(this,null,function*(){let e=i||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let t=null;try{t=JSON.parse(atob(e.split(".")[1]))}catch{}if(t&&t.exp&&!(Math.floor(Date.now()/1e3)-t.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${t.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${t.exp}`);this.accessTokenValue=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Be.access_token,{access_token:e})})}})}sendHeartbeat(){return u(this,null,function*(){var i;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(i=this.conn)===null||i===void 0||i.close(Yc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let e=this.channels.find(t=>t.topic===i&&(t._isJoined()||t._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${i}"`),e.unsubscribe())}_remove(i){this.channels=this.channels.filter(e=>e._joinRef()!==i._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_onConnMessage(i){this.decode(i.data,e=>{let{topic:t,event:n,payload:s,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${o&&"("+o+")"||""}`,s),this.channels.filter(l=>l._isMember(t)).forEach(l=>l._trigger(n,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(e))})}_onConnOpen(){return u(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(i=>i())})}_onConnClose(i){this.log("transport","close",i),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(i))}_onConnError(i){this.log("transport",i.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(i))}_triggerChanError(){this.channels.forEach(i=>i._trigger(Be.error))}_appendParams(i,e){if(Object.keys(e).length===0)return i;let t=i.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${i}${t}${n}`}_workerObjectUrl(i){let e;if(i)e=i;else{let t=new Blob([pm],{type:"application/javascript"});e=URL.createObjectURL(t)}return e}};var da=class{constructor(i,e,t){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ti.connecting,this.send=()=>{},this.url=null,this.url=i,this.close=t.close}};var Ii=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function le(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Zn=class extends Ii{constructor(i,e){super(i),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},qt=class extends Ii{constructor(i,e){super(i),this.name="StorageUnknownError",this.originalError=e}};var gm=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},Qn=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)},Zc=()=>gm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),Jn=r=>{if(Array.isArray(r))return r.map(e=>Jn(e));if(typeof r=="function"||r!==Object(r))return r;let i={};return Object.entries(r).forEach(([e,t])=>{let n=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));i[n]=Jn(t)}),i};var Yt=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},ua=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),_m=(r,i,e)=>Yt(void 0,void 0,void 0,function*(){let t=yield Zc();r instanceof t&&!e?.noResolveJson?r.json().then(n=>{i(new Zn(ua(n),r.status||500))}).catch(n=>{i(new qt(ua(n),n))}):i(new qt(ua(r),r))}),vm=(r,i,e,t)=>{let n={method:r,headers:i?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},i?.headers),t&&(n.body=JSON.stringify(t)),Object.assign(Object.assign({},n),e))};function Nr(r,i,e,t,n,s){return Yt(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(e,vm(i,t,n,s)).then(a=>{if(!a.ok)throw a;return t?.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>_m(a,l,t))})})}function ki(r,i,e,t){return Yt(this,void 0,void 0,function*(){return Nr(r,"GET",i,e,t)})}function nt(r,i,e,t,n){return Yt(this,void 0,void 0,function*(){return Nr(r,"POST",i,t,n,e)})}function Jc(r,i,e,t,n){return Yt(this,void 0,void 0,function*(){return Nr(r,"PUT",i,t,n,e)})}function Qc(r,i,e,t){return Yt(this,void 0,void 0,function*(){return Nr(r,"HEAD",i,Object.assign(Object.assign({},e),{noResolveJson:!0}),t)})}function Xn(r,i,e,t,n){return Yt(this,void 0,void 0,function*(){return Nr(r,"DELETE",i,t,n,e)})}var ke=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},ym={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},es=class{constructor(i,e={},t,n){this.url=i,this.headers=e,this.bucketId=t,this.fetch=Qn(n)}uploadOrUpdate(i,e,t,n){return ke(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Xc),n),l=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(o.upsert)}),a=o.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=t,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));let c=this._removeEmptyFolders(e),d=this._getFinalPath(c),g=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:i,body:s,headers:l},o?.duplex?{duplex:o.duplex}:{})),b=yield g.json();return g.ok?{data:{path:c,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(s){if(le(s))return{data:null,error:s};throw s}})}upload(i,e,t){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,e,t)})}uploadToSignedUrl(i,e,t,n){return ke(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(i),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",e);try{let a,c=Object.assign({upsert:Xc.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.append("cacheControl",c.cacheControl)):(a=t,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);let g=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),b=yield g.json();return g.ok?{data:{path:s,fullPath:b.Key},error:null}:{data:null,error:b}}catch(a){if(le(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(i,e){return ke(this,void 0,void 0,function*(){try{let t=this._getFinalPath(i),n=Object.assign({},this.headers);e?.upsert&&(n["x-upsert"]="true");let s=yield nt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:n}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new Ii("No token returned by API");return{data:{signedUrl:o.toString(),path:i,token:l},error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}})}update(i,e,t){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,e,t)})}move(i,e,t){return ke(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}copy(i,e,t){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}createSignedUrl(i,e,t){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(i),s=yield nt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:this.headers}),o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}createSignedUrls(i,e,t){return ke(this,void 0,void 0,function*(){try{let n=yield nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:i},{headers:this.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}download(i,e){return ke(this,void 0,void 0,function*(){let n=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let l=this._getFinalPath(i);return{data:yield(yield ki(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(le(l))return{data:null,error:l};throw l}})}info(i){return ke(this,void 0,void 0,function*(){let e=this._getFinalPath(i);try{let t=yield ki(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Jn(t),error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}})}exists(i){return ke(this,void 0,void 0,function*(){let e=this._getFinalPath(i);try{return yield Qc(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(t){if(le(t)&&t instanceof qt){let n=t.originalError;if([400,404].includes(n?.status))return{data:!1,error:t}}throw t}})}getPublicUrl(i,e){let t=this._getFinalPath(i),n=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);let l=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${c}`)}}}remove(i){return ke(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(e){if(le(e))return{data:null,error:e};throw e}})}list(i,e,t){return ke(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},ym),e),{prefix:i||""});return{data:yield nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){let e=[];return i.width&&e.push(`width=${i.width}`),i.height&&e.push(`height=${i.height}`),i.resize&&e.push(`resize=${i.resize}`),i.format&&e.push(`format=${i.format}`),i.quality&&e.push(`quality=${i.quality}`),e.join("&")}};var ed="2.7.1";var td={"X-Client-Info":`storage-js/${ed}`};var Ai=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},ts=class{constructor(i,e={},t){this.url=i,this.headers=Object.assign(Object.assign({},td),e),this.fetch=Qn(t)}listBuckets(){return Ai(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}})}getBucket(i){return Ai(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(e){if(le(e))return{data:null,error:e};throw e}})}createBucket(i,e={public:!1}){return Ai(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}})}updateBucket(i,e){return Ai(this,void 0,void 0,function*(){try{return{data:yield Jc(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}})}emptyBucket(i){return Ai(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(le(e))return{data:null,error:e};throw e}})}deleteBucket(i){return Ai(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(e){if(le(e))return{data:null,error:e};throw e}})}};var Fr=class extends ts{constructor(i,e={},t){super(i,e,t)}from(i){return new es(this.url,this.headers,i,this.fetch)}};var id="2.47.10";var Lr="";typeof Deno<"u"?Lr="deno":typeof document<"u"?Lr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lr="react-native":Lr="node";var bm={"X-Client-Info":`supabase-js-${Lr}/${id}`},rd={headers:bm},nd={schema:"public"},sd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},od={};Sl();var xm=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},Sm=r=>{let i;return r?i=r:typeof fetch>"u"?i=bl:i=fetch,(...e)=>i(...e)},wm=()=>typeof Headers>"u"?xl:Headers,ad=(r,i,e)=>{let t=Sm(e),n=wm();return(s,o)=>xm(void 0,void 0,void 0,function*(){var l;let a=(l=yield i())!==null&&l!==void 0?l:r,c=new n(o?.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),t(s,Object.assign(Object.assign({},o),{headers:c}))})};var Cm=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})};function ld(r){return r.replace(/\/$/,"")}function cd(r,i){let{db:e,auth:t,realtime:n,global:s}=r,{db:o,auth:l,realtime:a,global:c}=i,d={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},l),t),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),s),accessToken:()=>Cm(this,void 0,void 0,function*(){return""})};return r.accessToken?d.accessToken=r.accessToken:delete d.accessToken,d}var is="2.67.3";var dd="http://localhost:9999",ud="supabase.auth.token";var hd={"X-Client-Info":`gotrue-js/${is}`},ha=10;var Vr="X-Supabase-Api-Version",fa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function fd(r){return Math.round(Date.now()/1e3)+r}function md(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let i=Math.random()*16|0;return(r=="x"?i:i&3|8).toString(16)})}var Ze=()=>typeof window<"u"&&typeof document<"u",Kt={tested:!1,writable:!1},Rt=()=>{if(!Ze())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kt.tested)return Kt.writable;let r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Kt.tested=!0,Kt.writable=!0}catch{Kt.tested=!0,Kt.writable=!1}return Kt.writable};function pd(r){let i={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,s)=>{i[s]=n})}catch{}return e.searchParams.forEach((t,n)=>{i[n]=t}),i}var rs=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)},gd=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ma=(r,i,e)=>u(void 0,null,function*(){yield r.setItem(i,JSON.stringify(e))}),Ur=(r,i)=>u(void 0,null,function*(){let e=yield r.getItem(i);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),$r=(r,i)=>u(void 0,null,function*(){yield r.removeItem(i)});function Tm(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",t,n,s,o,l,a,c,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)o=i.indexOf(r.charAt(d++)),l=i.indexOf(r.charAt(d++)),a=i.indexOf(r.charAt(d++)),c=i.indexOf(r.charAt(d++)),t=o<<2|l>>4,n=(l&15)<<4|a>>2,s=(a&3)<<6|c,e=e+String.fromCharCode(t),a!=64&&n!=0&&(e=e+String.fromCharCode(n)),c!=64&&s!=0&&(e=e+String.fromCharCode(s));return e}var jr=class r{constructor(){this.promise=new r.promiseConstructor((i,e)=>{this.resolve=i,this.reject=e})}};jr.promiseConstructor=Promise;function pa(r){let i=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=r.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!i.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let t=e[1];return JSON.parse(Tm(t))}function _d(r){return u(this,null,function*(){return yield new Promise(i=>{setTimeout(()=>i(null),r)})})}function vd(r,i){return new Promise((t,n)=>{u(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield r(s);if(!i(s,null,o)){t(o);return}}catch(o){if(!i(s,o)){n(o);return}}})})}function Em(r){return("0"+r.toString(16)).substr(-2)}function Mm(){let i=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(i),Array.from(i,Em).join("")}function Im(r){return u(this,null,function*(){let e=new TextEncoder().encode(r),t=yield crypto.subtle.digest("SHA-256",e),n=new Uint8Array(t);return Array.from(n).map(s=>String.fromCharCode(s)).join("")})}function km(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Am(r){return u(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;let e=yield Im(r);return km(e)})}function Zt(r,i,e=!1){return u(this,null,function*(){let t=Mm(),n=t;e&&(n+="/PASSWORD_RECOVERY"),yield ma(r,`${i}-code-verifier`,n);let s=yield Am(t);return[s,t===s?"plain":"s256"]})}var Dm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yd(r){let i=r.headers.get(Vr);if(!i||!i.match(Dm))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}var Br=class extends Error{constructor(i,e,t){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=t}};function j(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}var ns=class extends Br{constructor(i,e,t){super(i,e,t),this.name="AuthApiError",this.status=e,this.code=t}};function bd(r){return j(r)&&r.name==="AuthApiError"}var Di=class extends Br{constructor(i,e){super(i),this.name="AuthUnknownError",this.originalError=e}},_t=class extends Br{constructor(i,e,t,n){super(i,t,n),this.name=e,this.status=t}},He=class extends _t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function xd(r){return j(r)&&r.name==="AuthSessionMissingError"}var Ri=class extends _t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Jt=class extends _t{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}},Qt=class extends _t{constructor(i,e=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Sd(r){return j(r)&&r.name==="AuthImplicitGrantRedirectError"}var Hr=class extends _t{constructor(i,e=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Oi=class extends _t{constructor(i,e){super(i,"AuthRetryableFetchError",e,void 0)}};function ss(r){return j(r)&&r.name==="AuthRetryableFetchError"}var zr=class extends _t{constructor(i,e,t){super(i,"AuthWeakPasswordError",e,"weak_password"),this.reasons=t}};var Rm=function(r,i){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&i.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(r);n<t.length;n++)i.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(r,t[n])&&(e[t[n]]=r[t[n]]);return e},Xt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Om=[502,503,504];function wd(r){return u(this,null,function*(){var i;if(!gd(r))throw new Oi(Xt(r),0);if(Om.includes(r.status))throw new Oi(Xt(r),r.status);let e;try{e=yield r.json()}catch(s){throw new Di(Xt(s),s)}let t,n=yd(r);if(n&&n.getTime()>=fa["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?t=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(t=e.error_code),t){if(t==="weak_password")throw new zr(Xt(e),r.status,((i=e.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(t==="session_not_found")throw new He}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new zr(Xt(e),r.status,e.weak_password.reasons);throw new ns(Xt(e),r.status||500,t)})}var Pm=(r,i,e,t)=>{let n={method:r,headers:i?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),n.body=JSON.stringify(t),Object.assign(Object.assign({},n),e))};function B(r,i,e,t){return u(this,null,function*(){var n;let s=Object.assign({},t?.headers);s[Vr]||(s[Vr]=fa["2024-01-01"].name),t?.jwt&&(s.Authorization=`Bearer ${t.jwt}`);let o=(n=t?.query)!==null&&n!==void 0?n:{};t?.redirectTo&&(o.redirect_to=t.redirectTo);let l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=yield Nm(r,i,e+l,{headers:s,noResolveJson:t?.noResolveJson},{},t?.body);return t?.xform?t?.xform(a):{data:Object.assign({},a),error:null}})}function Nm(r,i,e,t,n,s){return u(this,null,function*(){let o=Pm(i,t,n,s),l;try{l=yield r(e,Object.assign({},o))}catch(a){throw console.error(a),new Oi(Xt(a),0)}if(l.ok||(yield wd(l)),t?.noResolveJson)return l;try{return yield l.json()}catch(a){yield wd(a)}})}function vt(r){var i;let e=null;Fm(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=fd(r.expires_in)));let t=(i=r.user)!==null&&i!==void 0?i:r;return{data:{session:e,user:t},error:null}}function ga(r){let i=vt(r);return!i.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,t)=>e&&typeof t=="string",!0)&&(i.data.weak_password=r.weak_password),i}function st(r){var i;return{data:{user:(i=r.user)!==null&&i!==void 0?i:r},error:null}}function Cd(r){return{data:r,error:null}}function Td(r){let{action_link:i,email_otp:e,hashed_token:t,redirect_to:n,verification_type:s}=r,o=Rm(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:i,email_otp:e,hashed_token:t,redirect_to:n,verification_type:s},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Ed(r){return r}function Fm(r){return r.access_token&&r.refresh_token&&r.expires_in}var Lm=function(r,i){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&i.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(r);n<t.length;n++)i.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(r,t[n])&&(e[t[n]]=r[t[n]]);return e},Pi=class{constructor({url:i="",headers:e={},fetch:t}){this.url=i,this.headers=e,this.fetch=rs(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i,e="global"){return u(this,null,function*(){try{return yield B(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}})}inviteUserByEmail(t){return u(this,arguments,function*(i,e={}){try{return yield B(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:st})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}})}generateLink(i){return u(this,null,function*(){try{let{options:e}=i,t=Lm(i,["options"]),n=Object.assign(Object.assign({},t),e);return"newEmail"in t&&(n.new_email=t?.newEmail,delete n.newEmail),yield B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Td,redirectTo:e?.redirectTo})}catch(e){if(j(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(i){return u(this,null,function*(){try{return yield B(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:st})}catch(e){if(j(e))return{data:{user:null},error:e};throw e}})}listUsers(i){return u(this,null,function*(){var e,t,n,s,o,l,a;try{let c={nextPage:null,lastPage:0,total:0},d=yield B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(e=i?.page)===null||e===void 0?void 0:e.toString())!==null&&t!==void 0?t:"",per_page:(s=(n=i?.perPage)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""},xform:Ed});if(d.error)throw d.error;let g=yield d.json(),b=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return x.length>0&&(x.forEach(f=>{let w=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(f.split(";")[1].split("=")[1]);c[`${R}Page`]=w}),c.total=parseInt(b)),{data:Object.assign(Object.assign({},g),c),error:null}}catch(c){if(j(c))return{data:{users:[]},error:c};throw c}})}getUserById(i){return u(this,null,function*(){try{return yield B(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:st})}catch(e){if(j(e))return{data:{user:null},error:e};throw e}})}updateUserById(i,e){return u(this,null,function*(){try{return yield B(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:e,headers:this.headers,xform:st})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}})}deleteUser(i,e=!1){return u(this,null,function*(){try{return yield B(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:e},xform:st})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}})}_listFactors(i){return u(this,null,function*(){try{let{data:e,error:t}=yield B(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:t}}catch(e){if(j(e))return{data:null,error:e};throw e}})}_deleteFactor(i){return u(this,null,function*(){try{return{data:yield B(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(e){if(j(e))return{data:null,error:e};throw e}})}};var Md={getItem:r=>Rt()?globalThis.localStorage.getItem(r):null,setItem:(r,i)=>{Rt()&&globalThis.localStorage.setItem(r,i)},removeItem:r=>{Rt()&&globalThis.localStorage.removeItem(r)}};function _a(r={}){return{getItem:i=>r[i]||null,setItem:(i,e)=>{r[i]=e},removeItem:i=>{delete r[i]}}}function Id(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ei={debug:!!(globalThis&&Rt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Gr=class extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}},os=class extends Gr{};function va(r,i,e){return u(this,null,function*(){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,i);let t=new globalThis.AbortController;return i>0&&setTimeout(()=>{t.abort(),ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},i),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},n=>u(this,null,function*(){if(n){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return yield e()}finally{ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(i===0)throw ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new os(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ei.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}Id();var Vm={url:dd,storageKey:ud,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Wr=30*1e3,kd=3;function Ad(r,i,e){return u(this,null,function*(){return yield e()})}var ya=(()=>{class r{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=r.nextInstanceID,r.nextInstanceID+=1,this.instanceID>0&&Ze()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Vm),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Pi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rs(s.fetch),this.lock=s.lock||Ad,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ze()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=va:this.lock=Ad,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Rt()?this.storage=Md:(this.memoryStorage={},this.storage=_a(this.memoryStorage)):(this.memoryStorage={},this.storage=_a(this.memoryStorage)),Ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",o=>u(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${is}) ${new Date().toISOString()}`,...e),this}initialize(){return u(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=u(this,null,function*(){return yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return u(this,null,function*(){var e;try{let t=pd(window.location.href),n="none";if(this._isImplicitGrantCallback(t)?n="implicit":(yield this._isPKCECallback(t))&&(n="pkce"),Ze()&&this.detectSessionInUrl&&n!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Sd(o)){let c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:l,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",a),yield this._saveSession(l),setTimeout(()=>u(this,null,function*(){a==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield this._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return j(t)?{error:t}:{error:new Di("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return u(this,null,function*(){var t,n,s;try{let o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:vt}),{data:l,error:a}=o;if(a||!l)return{data:{user:null,session:null},error:a};let c=l.session,d=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(j(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return u(this,null,function*(){var t,n,s;try{let o;if("email"in e){let{email:g,password:b,options:x}=e,f=null,w=null;this.flowType==="pkce"&&([f,w]=yield Zt(this.storage,this.storageKey)),o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:g,password:b,data:(t=x?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:f,code_challenge_method:w},xform:vt})}else if("phone"in e){let{phone:g,password:b,options:x}=e;o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(n=x?.data)!==null&&n!==void 0?n:{},channel:(s=x?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:vt})}else throw new Jt("You must provide either an email or phone number and a password");let{data:l,error:a}=o;if(a||!l)return{data:{user:null,session:null},error:a};let c=l.session,d=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(j(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return u(this,null,function*(){try{let t;if("email"in e){let{email:o,password:l,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ga})}else if("phone"in e){let{phone:o,password:l,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ga})}else throw new Jt("You must provide either an email or phone number and a password");let{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ri}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return u(this,null,function*(){var t,n,s,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return u(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>u(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return u(this,null,function*(){let t=yield Ur(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{let{data:o,error:l}=yield B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:vt});if(yield $r(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ri}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(j(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return u(this,null,function*(){try{let{options:t,provider:n,token:s,access_token:o,nonce:l}=e,a=yield B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:vt}),{data:c,error:d}=a;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ri}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return u(this,null,function*(){var t,n,s,o,l;try{if("email"in e){let{email:a,options:c}=e,d=null,g=null;this.flowType==="pkce"&&([d,g]=yield Zt(this.storage,this.storageKey));let{error:b}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){let{phone:a,options:c}=e,{data:d,error:g}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(l=c?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:g}}throw new Jt("You must provide either an email or phone number.")}catch(a){if(j(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){return u(this,null,function*(){var t,n;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);let{data:l,error:a}=yield B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:vt});if(a)throw a;if(!l)throw new Error("An error occurred on token verification.");let c=l.session,d=l.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(j(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return u(this,null,function*(){var t,n,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=yield Zt(this.storage,this.storageKey)),yield B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Cd})}catch(o){if(j(o))return{data:null,error:o};throw o}})}reauthenticate(){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return u(this,null,function*(){try{return yield this._useSession(e=>u(this,null,function*(){let{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new He;let{error:s}=yield B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(j(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return u(this,null,function*(){try{let t=`${this.url}/resend`;if("email"in e){let{email:n,type:s,options:o}=e,{error:l}=yield B(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){let{phone:n,type:s,options:o}=e,{data:l,error:a}=yield B(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:a}}throw new Jt("You must provide either an email or phone number and a type")}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return this._useSession(t=>u(this,null,function*(){return t}))}))})}_acquireLock(e,t){return u(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=u(this,null,function*(){return yield n,yield t()});return this.pendingInLock.push(u(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>u(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=t();for(this.pendingInLock.push(u(this,null,function*(){try{yield n}catch{}})),yield n;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return u(this,null,function*(){this._debug("#_useSession","begin");try{let t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return u(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=yield Ur(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,g)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,g))})}return{data:{session:e},error:null}}let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return u(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return u(this,null,function*(){try{return e?yield B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:st}):yield this._useSession(t=>u(this,null,function*(){var n,s,o;let{data:l,error:a}=t;if(a)throw a;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new He}:yield B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:st})}))}catch(t){if(j(t))return xd(t)&&(yield this._removeSession(),yield $r(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(n){return u(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(n){return u(this,arguments,function*(e,t={}){try{return yield this._useSession(s=>u(this,null,function*(){let{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new He;let a=o.session,c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=yield Zt(this.storage,this.storageKey));let{data:g,error:b}=yield B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:a.access_token,xform:st});if(b)throw b;return a.user=g.user,yield this._saveSession(a),yield this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}}))}catch(s){if(j(s))return{data:{user:null},error:s};throw s}})}_decodeJWT(e){return pa(e)}setSession(e){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return u(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new He;let t=Date.now()/1e3,n=t,s=!0,o=null,l=pa(e.access_token);if(l.exp&&(n=l.exp,s=n<=t),s){let{session:a,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};o=a}else{let{data:a,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(j(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n;if(!e){let{data:l,error:a}=t;if(a)throw a;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new He;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return u(this,null,function*(){try{if(!Ze())throw new Qt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Hr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qt("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hr("No code detected.");let{data:pe,error:Ee}=yield this._exchangeCodeForSession(e.code);if(Ee)throw Ee;let Ae=new URL(window.location.href);return Ae.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Ae.toString()),{data:{session:pe.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:a,expires_at:c,token_type:d}=e;if(!o||!a||!l||!d)throw new Qt("No session defined in URL");let g=Math.round(Date.now()/1e3),b=parseInt(a),x=g+b;c&&(x=parseInt(c));let f=x-g;f*1e3<=Wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${b}s`);let w=x-b;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,x,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,x,g);let{data:R,error:K}=yield this._getUser(o);if(K)throw K;let Te={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:b,expires_at:x,refresh_token:l,token_type:d,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Te,redirectType:e.type},error:null}}catch(n){if(j(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return u(this,null,function*(){let t=yield Ur(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)})}signOut(){return u(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return u(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>u(this,null,function*(){var n;let{data:s,error:o}=t;if(o)return{error:o};let l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){let{error:a}=yield this.admin.signOut(l,e);if(a&&!(bd(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(yield this._removeSession(),yield $r(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let t=md(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),u(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){this._emitInitialSession(t)}))}),{data:{subscription:n}}}_emitInitialSession(e){return u(this,null,function*(){return yield this._useSession(t=>u(this,null,function*(){var n,s;try{let{data:{session:o},error:l}=t;if(l)throw l;yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(n){return u(this,arguments,function*(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield Zt(this.storage,this.storageKey,!0));try{return yield B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(j(l))return{data:null,error:l};throw l}})}getUserIdentities(){return u(this,null,function*(){var e;try{let{data:t,error:n}=yield this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}})}linkIdentity(e){return u(this,null,function*(){var t;try{let{data:n,error:s}=yield this._useSession(o=>u(this,null,function*(){var l,a,c,d,g;let{data:b,error:x}=o;if(x)throw x;let f=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield B(this.fetch,"GET",f,{headers:this.headers,jwt:(g=(d=b.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})}));if(s)throw s;return Ze()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(j(n))return{data:{provider:e.provider,url:null},error:n};throw n}})}unlinkIdentity(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n,s;let{data:o,error:l}=t;if(l)throw l;return yield B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return u(this,null,function*(){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let n=Date.now();return yield vd(s=>u(this,null,function*(){return s>0&&(yield _d(200*Math.pow(2,s-1))),this._debug(t,"refreshing attempt",s),yield B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vt})}),(s,o)=>{let l=200*Math.pow(2,s);return o&&ss(o)&&Date.now()+l-n<Wr})}catch(n){if(this._debug(t,"error",n),j(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return u(this,null,function*(){let n=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ze()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){return u(this,null,function*(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let n=yield Ur(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&(yield this._removeSession());return}let s=Math.round(Date.now()/1e3),o=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+ha;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${ha}s`),o){if(this.autoRefreshToken&&n.refresh_token){let{error:l}=yield this._callRefreshToken(n.refresh_token);l&&(console.error(l),ss(l)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",l),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}})}_callRefreshToken(e){return u(this,null,function*(){var t,n;if(!e)throw new He;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new jr;let{data:o,error:l}=yield this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new He;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),j(o)){let l={session:null,error:o};return ss(o)||(yield this._removeSession()),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,t,n=!0){return u(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});let o=[],l=Array.from(this.stateChangeEmitters.values()).map(a=>u(this,null,function*(){try{yield a.callback(e,t)}catch(c){o.push(c)}}));if(yield Promise.all(l),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return u(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield ma(this.storage,this.storageKey,e)})}_removeSession(){return u(this,null,function*(){this._debug("#_removeSession()"),yield $r(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ze()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return u(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Wr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>u(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return u(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return u(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return u(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return u(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>u(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(t=>u(this,null,function*(){let{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((n.expires_at*1e3-e)/Wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wr}ms, refresh threshold is ${kd} ticks`),s<=kd&&(yield this._callRefreshToken(n.refresh_token))}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Gr)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return u(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Ze()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>u(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return u(this,null,function*(){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>u(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,n){return u(this,null,function*(){let s=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){let[o,l]=yield Zt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(a.toString())}if(n?.queryParams){let o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n;let{data:s,error:o}=t;return o?{data:null,error:o}:yield B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_enroll(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n,s;let{data:o,error:l}=t;if(l)return{data:null,error:l};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=yield B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_verify(e){return u(this,null,function*(){return this._acquireLock(-1,()=>u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n;let{data:s,error:o}=t;if(o)return{data:null,error:o};let{data:l,error:a}=yield B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:a})}))}catch(t){if(j(t))return{data:null,error:t};throw t}}))})}_challenge(e){return u(this,null,function*(){return this._acquireLock(-1,()=>u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var n;let{data:s,error:o}=t;return o?{data:null,error:o}:yield B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(t){if(j(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return u(this,null,function*(){let{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return u(this,null,function*(){let{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};let n=e?.factors||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return u(this,null,function*(){return this._acquireLock(-1,()=>u(this,null,function*(){return yield this._useSession(e=>u(this,null,function*(){var t,n;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let l=this._decodeJWT(s.access_token),a=null;l.aal&&(a=l.aal);let c=a;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");let g=l.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}))})}}return r.nextInstanceID=0,r})();var jm=ya,ba=jm;var as=class extends ba{constructor(i){super(i)}};var Um=function(r,i,e,t){function n(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):n(d.value).then(l,a)}c((t=t.apply(r,i||[])).next())})},ls=class{constructor(i,e,t){var n,s,o;if(this.supabaseUrl=i,this.supabaseKey=e,!i)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let l=ld(i);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;let a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:nd,realtime:od,auth:Object.assign(Object.assign({},sd),{storageKey:a}),global:rd},d=cd(t??{},c);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ad(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new zc(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Tr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fr(this.storageUrl,this.headers,this.fetch)}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,e={},t={}){return this.rest.rpc(i,e,t)}channel(i,e={config:{}}){return this.realtime.channel(i,e)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var i,e;return Um(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:t}=yield this.auth.getSession();return(e=(i=t.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:n,storageKey:s,flowType:o,lock:l,debug:a},c,d){var g;let b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new as({url:this.authUrl,headers:Object.assign(Object.assign({},b),c),storageKey:s,autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:n,flowType:o,lock:l,debug:a,fetch:d,hasCustomAuthorizationHeader:(g="Authorization"in this.headers)!==null&&g!==void 0?g:!1})}_initRealtimeClient(i){return new Pr(this.realtimeUrl,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(i,e,t){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==t?this.changedAccessToken=t:i==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Dd=(r,i,e)=>new ls(r,i,e);var qr={production:!1,supabaseUrl:"https://nrapqjwyqvwopwoxevlw.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yYXBxand5cXZ3b3B3b3hldmx3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA4MDU2MzQsImV4cCI6MjA0NjM4MTYzNH0.hq-X6YEAD7DG9WIiJhqwRb3ZtMruaEzAbr0Wm4TBoQU"};var J=class r{supabase;constructor(){this.supabase=Dd(qr.supabaseUrl,qr.supabaseKey,{auth:{persistSession:!0}})}get client(){return this.supabase}uploadFile(i,e){return u(this,null,function*(){try{let{data:t,error:n}=yield this.supabase.storage.from("user_upload").exists(e);if(n)throw n;if(t)return`${qr.supabaseUrl}/storage/v1/object/public/user_upload/${e}`;let{data:s,error:o}=yield this.supabase.storage.from("user_upload").upload(e,i),l=`${qr.supabaseUrl}/storage/v1/object/public/user_upload/${e}`;if(o)throw o;return l}catch(t){throw console.error("Error uploading file:",t),t}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var ot=class r{constructor(i){this.supabase=i;this.initSession(),this.supabase.client.auth.onAuthStateChange((e,t)=>{this._session=t,this._user=t?.user??null})}_user=null;_session=null;initSession(){return u(this,null,function*(){let{data:i,error:e}=yield this.supabase.client.auth.getSession();!e&&i.session&&(this._session=i.session,this._user=i.session.user)})}signUp(i,e){return u(this,null,function*(){let{data:t,error:n}=yield this.supabase.client.auth.signUp({email:i,password:e});if(n)throw n;return t})}signIn(i,e){return u(this,null,function*(){let{data:t,error:n}=yield this.supabase.client.auth.signInWithPassword({email:i,password:e});if(n)throw n;return t})}signOut(){return u(this,null,function*(){let{error:i}=yield this.supabase.client.auth.signOut();if(i)throw i})}get session(){return this._session}get user(){return this._user}isLoggedIn(){return!!this._user}static \u0275fac=function(e){return new(e||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function $m(r,i){if(r&1){let e=Z();Et(0),h(1,"nav")(2,"a",1)(3,"b"),_(4,"PANOU ADMINISTRARE"),m()(),h(5,"a",2),_(6,"Toate Rug\u0103ciunile"),m(),h(7,"a",3),_(8,"Tipuri de Rug\u0103ciuni"),m(),h(9,"a",4),_(10,"Sec\u021Biuni"),m(),h(11,"a",5),_(12,"Texte"),m(),h(13,"div",6)(14,"span"),_(15),m(),h(16,"button",7),T("click",function(){I(e);let n=y();return k(n.onLogout())}),_(17,"Delogare"),m()()(),ie(18,"hr"),Mt()}if(r&2){let e=y();v(15),ci(e.auth.user==null?null:e.auth.user.email)}}var cs=class r{constructor(i,e){this.auth=i;this.router=e}title="my-prayer-admin";onLogout(){return u(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/login"])}catch(i){console.error("Error logging out:",i)}})}static \u0275fac=function(e){return new(e||r)(A(ot),A(_e))};static \u0275cmp=X({type:r,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"],[2,"display","inline","color","black"],["routerLink","/prayers"],["routerLink","/prayerTypes"],["routerLink","/sections"],["routerLink","/liturgicalTexts"],[2,"display","flex","float","right","width","min-content","gap","1rem"],[3,"click"]],template:function(e,t){e&1&&(F(0,$m,19,1,"ng-container",0),ie(1,"router-outlet")),e&2&&C("ngIf",t.auth.isLoggedIn())},dependencies:[oe,je,Ho,$e],styles:["nav[_ngcontent-%COMP%]{margin:1rem}a[_ngcontent-%COMP%]{margin-right:1rem;text-decoration:none;color:#790822}"]})};var Ud=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,t){this._renderer=e,this._elementRef=t}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(t){return new(t||r)(A(qe),A(Oe))};static \u0275dir=Y({type:r})}return r})(),en=(()=>{class r extends Ud{static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275dir=Y({type:r,features:[Ye]})}return r})(),Ot=new z(""),Bm={provide:Ot,useExisting:Xe(()=>wa),multi:!0},wa=(()=>{class r extends en{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275dir=Y({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,n){t&1&&T("change",function(o){return n.onChange(o.target.checked)})("blur",function(){return n.onTouched()})},standalone:!1,features:[Ce([Bm]),Ye]})}return r})(),Hm={provide:Ot,useExisting:Xe(()=>ce),multi:!0};function zm(){let r=ui()?ui().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Gm=new z(""),ce=(()=>{class r extends Ud{_compositionMode;_composing=!1;constructor(e,t,n){super(e,t),this._compositionMode=n,this._compositionMode==null&&(this._compositionMode=!zm())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(t){return new(t||r)(A(qe),A(Oe),A(Gm,8))};static \u0275dir=Y({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){t&1&&T("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},standalone:!1,features:[Ce([Hm]),Ye]})}return r})();var $d=new z(""),Bd=new z("");function Hd(r){return r!=null}function zd(r){return gn(r)?Se(r):r}function Gd(r){let i={};return r.forEach(e=>{i=e!=null?S(S({},i),e):i}),Object.keys(i).length===0?null:i}function Wd(r,i){return i.map(e=>e(r))}function Wm(r){return!r.validate}function qd(r){return r.map(i=>Wm(i)?i:e=>i.validate(e))}function qm(r){if(!r)return null;let i=r.filter(Hd);return i.length==0?null:function(e){return Gd(Wd(e,i))}}function Ca(r){return r!=null?qm(qd(r)):null}function Ym(r){if(!r)return null;let i=r.filter(Hd);return i.length==0?null:function(e){let t=Wd(e,i).map(zd);return Ba(t).pipe(H(Gd))}}function Ta(r){return r!=null?Ym(qd(r)):null}function Rd(r,i){return r===null?[i]:Array.isArray(r)?[...r,i]:[r,i]}function Km(r){return r._rawValidators}function Zm(r){return r._rawAsyncValidators}function Sa(r){return r?Array.isArray(r)?r:[r]:[]}function us(r,i){return Array.isArray(r)?r.includes(i):r===i}function Od(r,i){let e=Sa(i);return Sa(r).forEach(n=>{us(e,n)||e.push(n)}),e}function Pd(r,i){return Sa(i).filter(e=>!us(r,e))}var hs=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Ca(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Ta(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i=void 0){this.control&&this.control.reset(i)}hasError(i,e){return this.control?this.control.hasError(i,e):!1}getError(i,e){return this.control?this.control.getError(i,e):null}},Li=class extends hs{name;get formDirective(){return null}get path(){return null}},Xr=class extends hs{_parent=null;name=null;valueAccessor=null},fs=class{_cd;constructor(i){this._cd=i}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Jm={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},W0=q(S({},Jm),{"[class.ng-submitted]":"isSubmitted"}),fe=(()=>{class r extends fs{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(A(Xr,2))};static \u0275dir=Y({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){t&2&&li("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},standalone:!1,features:[Ye]})}return r})(),Yd=(()=>{class r extends fs{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(A(Li,10))};static \u0275dir=Y({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){t&2&&li("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},standalone:!1,features:[Ye]})}return r})();var Yr="VALID",ds="INVALID",Ni="PENDING",Kr="DISABLED",Vi=class{},ms=class extends Vi{value;source;constructor(i,e){super(),this.value=i,this.source=e}},Jr=class extends Vi{pristine;source;constructor(i,e){super(),this.pristine=i,this.source=e}},Qr=class extends Vi{touched;source;constructor(i,e){super(),this.touched=i,this.source=e}},Fi=class extends Vi{status;source;constructor(i,e){super(),this.status=i,this.source=e}};function Kd(r){return(_s(r)?r.validators:r)||null}function Qm(r){return Array.isArray(r)?Ca(r):r||null}function Zd(r,i){return(_s(i)?i.asyncValidators:r)||null}function Xm(r){return Array.isArray(r)?Ta(r):r||null}function _s(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function ep(r,i,e){let t=r.controls;if(!(i?Object.keys(t):t).length)throw new te(1e3,"");if(!t[e])throw new te(1001,"")}function tp(r,i,e){r._forEachChild((t,n)=>{if(e[n]===void 0)throw new te(1002,"")})}var ps=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(i,e){this._assignValidators(i),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get status(){return kt(this.statusReactive)}set status(i){kt(()=>this.statusReactive.set(i))}_status=Ji(()=>this.statusReactive());statusReactive=Ut(void 0);get valid(){return this.status===Yr}get invalid(){return this.status===ds}get pending(){return this.status==Ni}get disabled(){return this.status===Kr}get enabled(){return this.status!==Kr}errors;get pristine(){return kt(this.pristineReactive)}set pristine(i){kt(()=>this.pristineReactive.set(i))}_pristine=Ji(()=>this.pristineReactive());pristineReactive=Ut(!0);get dirty(){return!this.pristine}get touched(){return kt(this.touchedReactive)}set touched(i){kt(()=>this.touchedReactive.set(i))}_touched=Ji(()=>this.touchedReactive());touchedReactive=Ut(!1);get untouched(){return!this.touched}_events=new Le;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._assignValidators(i)}setAsyncValidators(i){this._assignAsyncValidators(i)}addValidators(i){this.setValidators(Od(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(Od(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(Pd(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(Pd(i,this._rawAsyncValidators))}hasValidator(i){return us(this._rawValidators,i)}hasAsyncValidator(i){return us(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){let e=this.touched===!1;this.touched=!0;let t=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsTouched(q(S({},i),{sourceControl:t})),e&&i.emitEvent!==!1&&this._events.next(new Qr(!0,t))}markAllAsTouched(i={}){this.markAsTouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(i))}markAsUntouched(i={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=i.sourceControl??this;this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:t})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,t),e&&i.emitEvent!==!1&&this._events.next(new Qr(!1,t))}markAsDirty(i={}){let e=this.pristine===!0;this.pristine=!1;let t=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsDirty(q(S({},i),{sourceControl:t})),e&&i.emitEvent!==!1&&this._events.next(new Jr(!1,t))}markAsPristine(i={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=i.sourceControl??this;this._forEachChild(n=>{n.markAsPristine({onlySelf:!0,emitEvent:i.emitEvent})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i,t),e&&i.emitEvent!==!1&&this._events.next(new Jr(!0,t))}markAsPending(i={}){this.status=Ni;let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new Fi(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.markAsPending(q(S({},i),{sourceControl:e}))}disable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=Kr,this.errors=null,this._forEachChild(n=>{n.disable(q(S({},i),{onlySelf:!0}))}),this._updateValue();let t=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new ms(this.value,t)),this._events.next(new Fi(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(q(S({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=Yr,this._forEachChild(t=>{t.enable(q(S({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(q(S({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(i,e){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yr||this.status===Ni)&&this._runAsyncValidator(t,i.emitEvent)}let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new ms(this.value,e)),this._events.next(new Fi(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(q(S({},i),{sourceControl:e}))}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kr:Yr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i,e){if(this.asyncValidator){this.status=Ni,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=zd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(n,{emitEvent:e,shouldHaveEmitted:i})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let i=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,i}return!1}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(i){let e=i;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,n)=>t&&t._find(n),this)}getError(i,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i,e,t){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),(i||t)&&this._events.next(new Fi(this.status,e)),this._parent&&this._parent._updateControlsErrors(i,e,t)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?Kr:this.errors?ds:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ni)?Ni:this._anyControlsHaveStatus(ds)?ds:Yr}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i,e){let t=!this._anyControlsDirty(),n=this.pristine!==t;this.pristine=t,this._parent&&!i.onlySelf&&this._parent._updatePristine(i,e),n&&this._events.next(new Jr(this.pristine,e))}_updateTouched(i={},e){this.touched=this._anyControlsTouched(),this._events.next(new Qr(this.touched,e)),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,e)}_onDisabledChange=[];_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){_s(i)&&i.updateOn!=null&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){let e=this._parent&&this._parent.dirty;return!i&&!!e&&!this._parent._anyControlsDirty()}_find(i){return null}_assignValidators(i){this._rawValidators=Array.isArray(i)?i.slice():i,this._composedValidatorFn=Qm(this._rawValidators)}_assignAsyncValidators(i){this._rawAsyncValidators=Array.isArray(i)?i.slice():i,this._composedAsyncValidatorFn=Xm(this._rawAsyncValidators)}},gs=class extends ps{constructor(i,e,t){super(Kd(e),Zd(t,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,t={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,t={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){tp(this,!0,i),Object.keys(i).forEach(t=>{ep(this,!0,t),this.controls[t].setValue(i[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){i!=null&&(Object.keys(i).forEach(t=>{let n=this.controls[t];n&&n.patchValue(i[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((t,n)=>{t.reset(i?i[n]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,t)=>(i[t]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&i(t,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&i(t))return!0;return!1}_reduceValue(){let i={};return this._reduceChildren(i,(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(i,e){let t=i;return this._forEachChild((n,s)=>{t=e(t,n,s)}),t}_allControlsDisabled(){for(let i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}};var Ea=new z("CallSetDisabledState",{providedIn:"root",factory:()=>Ma}),Ma="always";function ip(r,i){return[...i.path,r]}function Jd(r,i,e=Ma){Qd(r,i),i.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&i.valueAccessor.setDisabledState?.(r.disabled),np(r,i),op(r,i),sp(r,i),rp(r,i)}function Nd(r,i){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function rp(r,i){if(i.valueAccessor.setDisabledState){let e=t=>{i.valueAccessor.setDisabledState(t)};r.registerOnDisabledChange(e),i._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function Qd(r,i){let e=Km(r);i.validator!==null?r.setValidators(Rd(e,i.validator)):typeof e=="function"&&r.setValidators([e]);let t=Zm(r);i.asyncValidator!==null?r.setAsyncValidators(Rd(t,i.asyncValidator)):typeof t=="function"&&r.setAsyncValidators([t]);let n=()=>r.updateValueAndValidity();Nd(i._rawValidators,n),Nd(i._rawAsyncValidators,n)}function np(r,i){i.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Xd(r,i)})}function sp(r,i){i.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Xd(r,i),r.updateOn!=="submit"&&r.markAsTouched()})}function Xd(r,i){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function op(r,i){let e=(t,n)=>{i.valueAccessor.writeValue(t),n&&i.viewToModelUpdate(t)};r.registerOnChange(e),i._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function ap(r,i){r==null,Qd(r,i)}function lp(r,i){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(i,e.currentValue)}function cp(r){return Object.getPrototypeOf(r.constructor)===en}function dp(r,i){r._syncPendingControls(),i.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function up(r,i){if(!i)return null;Array.isArray(i);let e,t,n;return i.forEach(s=>{s.constructor===ce?e=s:cp(s)?t=s:n=s}),n||t||e||null}var hp={provide:Li,useExisting:Xe(()=>Ia)},Zr=Promise.resolve(),Ia=(()=>{class r extends Li{callSetDisabledState;get submitted(){return kt(this.submittedReactive)}_submitted=Ji(()=>this.submittedReactive());submittedReactive=Ut(!1);_directives=new Set;form;ngSubmit=new be;options;constructor(e,t,n){super(),this.callSetDisabledState=n,this.form=new gs({},Ca(e),Ta(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Zr.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Jd(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Zr.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Zr.then(()=>{let t=this._findContainer(e.path),n=new gs({});ap(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Zr.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Zr.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),dp(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(t){return new(t||r)(A($d,10),A(Bd,10),A(Ea,8))};static \u0275dir=Y({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){t&1&&T("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ce([hp]),Ye]})}return r})();function Fd(r,i){let e=r.indexOf(i);e>-1&&r.splice(e,1)}function Ld(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var fp=class extends ps{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(i=null,e,t){super(Kd(e),Zd(t,e)),this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_s(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Ld(i)?this.defaultValue=i.value:this.defaultValue=i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Fd(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Fd(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(i){Ld(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};var mp={provide:Xr,useExisting:Xe(()=>de)},Vd=Promise.resolve(),de=(()=>{class r extends Xr{_changeDetectorRef;callSetDisabledState;control=new fp;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new be;constructor(e,t,n,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=up(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let t=e.name.previousValue;this.formDirective.removeControl({name:t,path:this._getPath(t)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),lp(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Jd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Vd.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let t=e.isDisabled.currentValue,n=t!==0&&It(t);Vd.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ip(e,this._parent):[e]}static \u0275fac=function(t){return new(t||r)(A(Li,9),A($d,10),A(Bd,10),A(Ot,10),A(di,8),A(Ea,8))};static \u0275dir=Y({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ce([mp]),Ye,Tt]})}return r})(),eu=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=Y({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})(),pp={provide:Ot,useExisting:Xe(()=>tn),multi:!0},tn=(()=>{class r extends en{writeValue(e){let t=e??"";this.setProperty("value",t)}registerOnChange(e){this.onChange=t=>{e(t==""?null:parseFloat(t))}}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275dir=Y({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,n){t&1&&T("input",function(o){return n.onChange(o.target.value)})("blur",function(){return n.onTouched()})},standalone:!1,features:[Ce([pp]),Ye]})}return r})();var gp={provide:Ot,useExisting:Xe(()=>ji),multi:!0};function tu(r,i){return r==null?`${i}`:(i&&typeof i=="object"&&(i="Object"),`${r}: ${i}`.slice(0,50))}function _p(r){return r.split(":")[0]}var ji=(()=>{class r extends en{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let t=this._getOptionId(e),n=tu(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){let t=_p(e);return this._optionMap.has(t)?this._optionMap.get(t):e}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275dir=Y({type:r,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,n){t&1&&T("change",function(o){return n.onChange(o.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ce([gp]),Ye]})}return r})(),vs=(()=>{class r{_element;_renderer;_select;id;constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(tu(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(t){return new(t||r)(A(Oe),A(qe),A(ji,9))};static \u0275dir=Y({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return r})(),vp={provide:Ot,useExisting:Xe(()=>iu),multi:!0};function jd(r,i){return r==null?`${i}`:(typeof i=="string"&&(i=`'${i}'`),i&&typeof i=="object"&&(i="Object"),`${r}: ${i}`.slice(0,50))}function yp(r){return r.split(":")[0]}var iu=(()=>{class r extends en{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let t;if(Array.isArray(e)){let n=e.map(s=>this._getOptionId(s));t=(s,o)=>{s._setSelected(n.indexOf(o.toString())>-1)}}else t=(n,s)=>{n._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{let n=[],s=t.selectedOptions;if(s!==void 0){let o=s;for(let l=0;l<o.length;l++){let a=o[l],c=this._getOptionValue(a.value);n.push(c)}}else{let o=t.options;for(let l=0;l<o.length;l++){let a=o[l];if(a.selected){let c=this._getOptionValue(a.value);n.push(c)}}}this.value=n,e(n)}}_registerOption(e){let t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){let t=yp(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275dir=Y({type:r,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,n){t&1&&T("change",function(o){return n.onChange(o.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ce([vp]),Ye]})}return r})(),ys=(()=>{class r{_element;_renderer;_select;id;_value;constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(jd(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(jd(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(t){return new(t||r)(A(Oe),A(qe),A(iu,9))};static \u0275dir=Y({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return r})();var bp=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({})}return r})();var me=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Ea,useValue:e.callSetDisabledState??Ma}]}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({imports:[bp]})}return r})();var re=class{constructor(i){this.supabase=i}get client(){return this.supabase.client}getAll(){return u(this,null,function*(){let{data:i,error:e}=yield this.client.from(this.tableName).select("*").order("created_at",{ascending:!0});if(e)throw e;return i??[]})}getById(i){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").eq("id",i).single();if(t)throw t;return e})}create(i){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).insert([i]).select().single();if(t)throw t;return e})}update(i,e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).update(e).eq("id",i).select().single();if(n)throw n;return t})}delete(i){return u(this,null,function*(){let{error:e}=yield this.client.from(this.tableName).delete().eq("id",i);if(e)throw e})}bulkUpdate(i){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).upsert(i).select();if(console.log(t),t||!e)throw t;return e})}};var Ui=class r extends re{constructor(e){super(e);this.supabase=e}tableName="prayers";getAll(){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").order("prayer_type_id",{ascending:!0}).order("sequence",{ascending:!0});if(t)throw t;return e??[]})}getById(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).select("*, sections: prayers_sections(*, section: sections(*)), date_groups: prayer_date_group(*, date_group(*))").order("sequence",{foreignTable:"prayers_sections"}).eq("id",e).single();if(n)throw n;return t})}getParyerWithSectionsRecursively(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.rpc("get_prayer_with_sections_recursive",{request_prayer_id:e});if(n)throw n;return t})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var at=class r extends re{constructor(e){super(e);this.supabase=e}tableName="prayer_type";getAll(){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*");if(t)throw t;return e??[]})}getTree(){return u(this,null,function*(){let{data:e,error:t}=yield this.supabase.client.rpc("get_prayer_types");if(t)throw console.error("Error calling get_prayer_types:",t),t;return e})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var xp=r=>["/prayers",r];function Sp(r,i){if(r&1&&(h(0,"li")(1,"a",5),_(2),m()()),r&2){let e=i.$implicit;v(),C("routerLink",ut(3,xp,e.id)),v(),ue("",e.title," ",e.subtitle!=null&&e.subtitle.length?"- "+e.subtitle:"","")}}var xs=class r{constructor(i,e){this.prayersService=i;this.prayerTypesService=e}prayerTypes=[];prayers=[];newPrayer=null;ngOnInit(){return u(this,null,function*(){this.newPrayer={title:"",subtitle:"",sequence:1},this.prayers=yield this.prayersService.getAll(),this.prayerTypes=yield this.prayerTypesService.getAll()})}addPrayer(){let i=this.newPrayer?.title.trim();i&&this.prayersService.create({title:i}).then(e=>{this.newPrayer={title:"",subtitle:"",sequence:1},this.prayers.splice(0,0,e)}).catch(e=>{alert("Error creating prayer: "+e)})}static \u0275fac=function(e){return new(e||r)(A(Ui),A(at))};static \u0275cmp=X({type:r,selectors:[["app-prayers-list"]],decls:10,vars:2,consts:[[2,"margin-bottom","1rem"],["for","title"],["id","title","type","text","placeholder","Titlu rug\u0103ciune",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){e&1&&(h(0,"div",0)(1,"h2"),_(2,"Rug\u0103ciuni"),m(),h(3,"label",1),_(4,"Adaug\u0103 o rug\u0103ciune nou\u0103: "),m(),h(5,"input",2),N("ngModelChange",function(s){return P(t.newPrayer.title,s)||(t.newPrayer.title=s),s}),m(),h(6,"button",3),T("click",function(){return t.addPrayer()}),_(7,"Adaug\u0103"),m()(),h(8,"ul"),F(9,Sp,3,5,"li",4),m()),e&2&&(v(5),O("ngModel",t.newPrayer.title),v(4),C("ngForOf",t.prayers))},dependencies:[oe,xe,$e,me,ce,fe,de],encapsulation:2})};var Ss=class r extends re{constructor(e){super(e);this.supabase=e}tableName="prayers_sections";create(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).insert([e]).select("*, section: sections(*)").single();if(n)throw n;return t})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var Pt=class r extends re{constructor(e){super(e);this.supabase=e}tableName="sections";static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var ws=class r extends re{constructor(e){super(e);this.supabase=e}tableName="prayer_date_group";create(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).insert([e]).select("*, date_group(*, date_group_type(*))").single();if(n)throw n;return t})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var Cs=class r extends re{constructor(e){super(e);this.supabase=e}tableName="date_group";getAll(){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*, date_group_type(*)").order("date_group_type_id",{ascending:!0});if(t)throw t;return e??[]})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var nu=r=>["/sections",r];function Ep(r,i){if(r&1&&(h(0,"option",13),_(1),m()),r&2){let e=i.$implicit;C("value",e.id),v(),ci(e.type)}}function Mp(r,i){if(r&1){let e=Z();h(0,"div")(1,"div")(2,"h2")(3,"button",5),T("click",function(){I(e);let n=y();return k(n.goBack())}),h(4,"i",10),_(5,"arrow_back"),m()(),_(6),h(7,"button",5),T("click",function(){I(e);let n=y();return k(n.deletePrayer())}),h(8,"i",10),_(9,"delete"),m()()(),h(10,"h3"),_(11,"Detalii rug\u0103ciune"),m(),h(12,"table",11)(13,"tr")(14,"td"),_(15,"Titlu:"),m(),h(16,"td")(17,"input",2),N("ngModelChange",function(n){I(e);let s=y();return P(s.prayer.title,n)||(s.prayer.title=n),k(n)}),m()()(),h(18,"tr")(19,"td"),_(20,"Subtitlu:"),m(),h(21,"td")(22,"input",2),N("ngModelChange",function(n){I(e);let s=y();return P(s.prayer.subtitle,n)||(s.prayer.subtitle=n),k(n)}),m()()(),h(23,"tr")(24,"td"),_(25,"Ordine:"),m(),h(26,"td")(27,"input",12),N("ngModelChange",function(n){I(e);let s=y();return P(s.prayer.sequence,n)||(s.prayer.sequence=n),k(n)}),m()()(),h(28,"tr")(29,"td"),_(30,"Tip:"),m(),h(31,"td")(32,"select",2),N("ngModelChange",function(n){I(e);let s=y();return P(s.prayer.prayer_type_id,n)||(s.prayer.prayer_type_id=n),k(n)}),F(33,Ep,2,2,"option",4),m()()()(),h(34,"button",5),T("click",function(){I(e);let n=y();return k(n.updatePrayer())}),_(35,"Salveaz\u0103"),m()()()}if(r&2){let e=y();v(6),we("",e.prayer.title," "),v(11),O("ngModel",e.prayer.title),v(5),O("ngModel",e.prayer.subtitle),v(5),O("ngModel",e.prayer.sequence),v(5),O("ngModel",e.prayer.prayer_type_id),v(),C("ngForOf",e.prayerTypes)}}function Ip(r,i){r&1&&(h(0,"p"),_(1,"Nu sunt sec\u021Biuni ad\u0103ugate"),m())}function kp(r,i){if(r&1){let e=Z();h(0,"li")(1,"p")(2,"a",14),_(3),m(),h(4,"button",5),T("click",function(){let n=I(e).$implicit,s=y().$implicit,o=y();return k(o.deleteSection(n.id,s.id))}),h(5,"i",15),_(6,"delete"),m()()()()}if(r&2){let e=i.$implicit;v(2),C("routerLink",ut(3,nu,e.section==null?null:e.section.id)),v(),ue("",e.section==null?null:e.section.title," - ",e.section==null?null:e.section.subtitle,"")}}function Ap(r,i){if(r&1&&(h(0,"option",13),_(1),m()),r&2){let e=i.$implicit;C("value",e.id),v(),ci(e.title)}}function Dp(r,i){if(r&1){let e=Z();h(0,"li")(1,"label",16),_(2,"Sec\u021Biune existent\u0103:"),m(),h(3,"select",2),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.newPrayerSection.section_id,n)||(s.newPrayerSection.section_id=n),k(n)}),h(4,"option",17),_(5,"-- Alege\u021Bi --"),m(),F(6,Ap,2,2,"option",4),m(),h(7,"button",5),T("click",function(){I(e);let n=y().$implicit,s=y();return k(s.addPrayerSection(n.id))}),h(8,"i",15),_(9,"save"),m()(),h(10,"button",5),T("click",function(){I(e);let n=y(2);return k(n.hideNewSubsectionForm())}),h(11,"i",15),_(12,"delete"),m()()()}if(r&2){let e=y(2);v(3),O("ngModel",e.newPrayerSection.section_id),v(3),C("ngForOf",e.sections)}}function Rp(r,i){if(r&1){let e=Z();h(0,"li")(1,"label",16),_(2,"Titlu sec\u021Biune nou\u0103:"),m(),h(3,"input",6),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.newSectionTitle,n)||(s.newSectionTitle=n),k(n)}),m(),h(4,"button",5),T("click",function(){I(e);let n=y().$implicit,s=y();return k(s.addNewPrayerSection(n.id))}),h(5,"i",15),_(6,"save"),m()(),h(7,"button",5),T("click",function(){I(e);let n=y(2);return k(n.hideNewSubsectionForm())}),h(8,"i",15),_(9,"delete"),m()()()}if(r&2){let e=y(2);v(3),O("ngModel",e.newSectionTitle)}}function Op(r,i){if(r&1){let e=Z();h(0,"li")(1,"p")(2,"a",14),_(3),m(),h(4,"button",5),T("click",function(){let n=I(e).$implicit,s=y();return k(s.deleteSection(n.id))}),h(5,"i",15),_(6,"delete"),m()(),h(7,"button",5),T("click",function(){let n=I(e).$implicit,s=y();return k(s.displayNewSubsectionForm(n.id))}),h(8,"i",15),_(9,"add"),m()()(),h(10,"ul"),F(11,kp,7,5,"li",1)(12,Dp,13,2,"li",0)(13,Rp,10,1,"li",0),m()()}if(r&2){let e=i.$implicit,t=y();v(2),C("routerLink",ut(6,nu,e.section==null?null:e.section.id)),v(),ue("",e.section==null?null:e.section.title," ",!(e.section==null||e.section.subtitle==null)&&e.section.subtitle.length?"-"+(e.section==null?null:e.section.subtitle):"",""),v(8),C("ngForOf",e.subsections),v(),C("ngIf",(t.newPrayerSection==null?null:t.newPrayerSection.parent_id)===e.id),v(),C("ngIf",(t.newPrayerSection==null?null:t.newPrayerSection.parent_id)===e.id)}}function Pp(r,i){if(r&1&&(h(0,"option",13),_(1),m()),r&2){let e=i.$implicit;C("value",e.id),v(),ue("",e.title," ",e.subtitle!=null&&e.subtitle.length?"- "+e.subtitle:"","")}}function Np(r,i){r&1&&(h(0,"p"),_(1,"Nu sunt grupe de dat\u0103 ad\u0103ugate"),m())}function Fp(r,i){if(r&1){let e=Z();h(0,"li")(1,"p"),_(2),h(3,"button",5),T("click",function(){let n=I(e).$implicit,s=y();return k(s.deletePrayerDateGroup(n.id))}),h(4,"i",15),_(5,"delete"),m()()()()}if(r&2){let e=i.$implicit;v(2),ue(" ",e.date_group==null||e.date_group.date_group_type==null?null:e.date_group.date_group_type.name," - ",e.date_group==null?null:e.date_group.title," ")}}function Lp(r,i){if(r&1&&(h(0,"option",13),_(1),m()),r&2){let e=i.$implicit;C("value",e.id),v(),ue("",e.date_group_type==null?null:e.date_group_type.name," - ",e.title,"")}}var Ts=class r{constructor(i,e,t,n,s,o,l){this.route=i;this.prayersService=e;this.prayerTypesService=t;this.prayerSectionService=n;this.sectionsService=s;this.prayerDateGroupService=o;this.dateGroupService=l}dateGroups=[];prayerTypes=[];sections=[];prayer=null;id;newPrayerSection=null;newSectionTitle="";newPrayerDateGroup=null;ngOnInit(){return u(this,null,function*(){this.id=this.route.snapshot.paramMap.get("id")||"",this.prayer=yield this.prayersService.getParyerWithSectionsRecursively(this.id),this.newPrayerSection={prayer_id:this.id,section_id:"",sequence:1},this.newPrayerDateGroup={prayer_id:this.id,date_group_id:0,sequence:1},yield this.getPrayerTypes(),yield this.getSections(),yield this.getDateGroups()})}getDateGroups(){return u(this,null,function*(){this.dateGroups=yield this.dateGroupService.getAll()})}getPrayerTypes(){return u(this,null,function*(){this.prayerTypes=yield this.prayerTypesService.getAll()})}getSections(){return u(this,null,function*(){this.sections=yield this.sectionsService.getAll()})}updatePrayer(){return u(this,null,function*(){if(!this.prayer)return;(yield this.prayersService.update(this.prayer.id,{title:this.prayer.title,subtitle:this.prayer.subtitle,sequence:this.prayer.sequence,prayer_type_id:this.prayer.prayer_type_id}))&&alert("Prayer updated successfully!")})}deletePrayer(){return u(this,null,function*(){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 rug\u0103ciune?"))try{yield this.prayersService.delete(this.prayer.id),location.href="/prayers"}catch(i){alert("Eroare la \u0219tergerea rug\u0103ciunii: "+i)}})}deleteSection(i,e=null){return u(this,null,function*(){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 sec\u021Biune?"))try{if(yield this.prayerSectionService.delete(i),e){let t=this.prayer.sections.find(n=>n.id===e);t&&(t.subsections=t.subsections?.filter(n=>n.id!==i)??[])}else this.prayer.sections=this.prayer.sections?.filter(t=>t.id!==i)??[]}catch(t){alert("Eroare la \u0219tergerea sec\u021Biunii: "+t)}})}displayNewSubsectionForm(i){this.newPrayerSection.parent_id=i}hideNewSubsectionForm(){this.newPrayerSection.parent_id=null,this.newPrayerSection.section_id=""}addPrayerSection(i=null){this.prayer&&(this.newPrayerSection=q(S({},this.newPrayerSection),{parent_id:i,sequence:1}),this.prayerSectionService.create(this.newPrayerSection).then(e=>{if(this.newPrayerSection={prayer_id:this.id,section_id:"",sequence:1},i){let t=this.prayer.sections.find(n=>n.id===i);t&&t.subsections.push(e)}else this.prayer.sections.push(e)}).catch(e=>{alert("Error creating subsection: "+e)}))}addNewPrayerSection(i=null){this.newSectionTitle&&this.sectionsService.create({title:this.newSectionTitle,audio_url:""}).then(e=>{this.newPrayerSection={prayer_id:this.id,section_id:e.id,sequence:1},this.addPrayerSection(i),this.newSectionTitle=""}).catch(e=>{alert("Error creating section: "+e)})}goBack(){window.history.back()}goToSection(i){location.href=`/sections/${i}`}deletePrayerDateGroup(i){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 grup\u0103 de dat\u0103?"))try{this.prayerDateGroupService.delete(i),this.prayer.date_groups=this.prayer.date_groups?.filter(e=>e.id!==i)??[]}catch(e){alert("Eroare la \u0219tergerea datei: "+e)}}addPrayerDateGroup(){this.prayer&&this.prayerDateGroupService.create(this.newPrayerDateGroup).then(i=>{this.newPrayerDateGroup={prayer_id:this.id,date_group_id:0,sequence:1},this.prayer.date_groups.push(i)}).catch(i=>{alert("Error creating date group: "+i)})}static \u0275fac=function(e){return new(e||r)(A(Ie),A(Ui),A(at),A(Ss),A(Pt),A(ws),A(Cs))};static \u0275cmp=X({type:r,selectors:[["app-prayer-detail"]],decls:43,vars:10,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["placeholder","Titlu",3,"ngModelChange","ngModel"],["for","date_group"],["id","date_group",3,"ngModelChange","ngModel"],["value","0"],[1,"material-icons",2,"font-size","16px"],[2,"border-collapse","collapse","background","transparent"],["type","number",3,"ngModelChange","ngModel"],[3,"value"],[3,"routerLink"],[1,"material-icons",2,"font-size","12px"],["for","section"],["selected",""]],template:function(e,t){e&1&&(F(0,Mp,36,6,"div",0),ie(1,"hr"),h(2,"div")(3,"div")(4,"h3"),_(5,"Sec\u021Biuni"),m(),F(6,Ip,2,0,"p",0),h(7,"ul"),F(8,Op,14,8,"li",1),m()(),ie(9,"hr"),h(10,"div")(11,"h4"),_(12,"Adaug\u0103 o sec\u021Biune existent\u0103"),m(),h(13,"select",2),N("ngModelChange",function(s){return P(t.newPrayerSection.section_id,s)||(t.newPrayerSection.section_id=s),s}),h(14,"option",3),_(15,"-- Alege\u021Bi --"),m(),F(16,Pp,2,3,"option",4),m(),h(17,"button",5),T("click",function(){return t.addPrayerSection()}),_(18,"Adaug\u0103"),m(),h(19,"h4"),_(20,"Creeaza \u0219i adaug\u0103 o sec\u021Biune nou\u0103"),m(),h(21,"input",6),N("ngModelChange",function(s){return P(t.newSectionTitle,s)||(t.newSectionTitle=s),s}),m(),h(22,"button",5),T("click",function(){return t.addNewPrayerSection()}),_(23,"Adaug\u0103"),m()()(),ie(24,"hr"),h(25,"div")(26,"div")(27,"h3"),_(28,"Grupe de dat\u0103"),m(),F(29,Np,2,0,"p",0),h(30,"ul"),F(31,Fp,6,2,"li",1),m(),h(32,"h4"),_(33,"Adaug\u0103 o nou\u0103 grup\u0103 de dat\u0103"),m(),h(34,"label",7),_(35,"Grup\u0103 de dat\u0103: "),m(),h(36,"select",8),N("ngModelChange",function(s){return P(t.newPrayerDateGroup.date_group_id,s)||(t.newPrayerDateGroup.date_group_id=s),s}),h(37,"option",9),_(38,"-- Alege\u021Bi --"),m(),F(39,Lp,2,3,"option",4),m(),ie(40,"br"),h(41,"button",5),T("click",function(){return t.addPrayerDateGroup()}),_(42,"Adaug\u0103"),m()()()),e&2&&(C("ngIf",t.prayer),v(6),C("ngIf",!(!(t.prayer==null||t.prayer.sections==null)&&t.prayer.sections.length)),v(2),C("ngForOf",t.prayer==null?null:t.prayer.sections),v(5),O("ngModel",t.newPrayerSection.section_id),v(3),C("ngForOf",t.sections),v(5),O("ngModel",t.newSectionTitle),v(8),C("ngIf",!(!(t.prayer==null||t.prayer.date_groups==null)&&t.prayer.date_groups.length)),v(2),C("ngForOf",t.prayer==null?null:t.prayer.date_groups),v(5),O("ngModel",t.newPrayerDateGroup.date_group_id),v(3),C("ngForOf",t.dateGroups))},dependencies:[oe,xe,je,me,vs,ys,ce,tn,ji,fe,de,kc,$e],styles:["h2[_ngcontent-%COMP%]{margin-bottom:1rem}"]})};function Vp(r,i){if(r&1){let e=Z();Et(0),h(1,"p"),_(2),h(3,"button",3),T("click",function(){I(e);let n=y();return k(n.enableEdit())}),h(4,"i",4),_(5,"edit"),m()(),h(6,"button",3),T("click",function(){I(e);let n=y();return k(n.addSubtype())}),h(7,"i",4),_(8,"add"),m()(),h(9,"button",3),T("click",function(){I(e);let n=y();return k(n.deleteType())}),h(10,"i",4),_(11,"delete"),m()()(),Mt()}if(r&2){let e=y();v(2),we(" ",e.node.type," ")}}function jp(r,i){if(r&1){let e=Z();h(0,"input",5),N("ngModelChange",function(n){I(e);let s=y();return P(s.tempName,n)||(s.tempName=n),k(n)}),m(),h(1,"button",3),T("click",function(){I(e);let n=y();return k(n.saveEdit())}),h(2,"i",4),_(3,"save"),m()(),h(4,"button",3),T("click",function(){I(e);let n=y();return k(n.cancelEdit())}),h(5,"i",4),_(6,"cancel"),m()()}if(r&2){let e=y();O("ngModel",e.tempName)}}function Up(r,i){if(r&1){let e=Z();h(0,"li")(1,"app-prayer-type-subitem",7),T("refreshNeeded",function(){I(e);let n=y(2);return k(n.onChildRefreshNeeded())}),m()()}if(r&2){let e=i.$implicit;v(),C("node",e)}}function $p(r,i){if(r&1&&(h(0,"ul"),F(1,Up,2,1,"li",6),m()),r&2){let e=y();v(),C("ngForOf",e.node.subtypes)}}var Es=class r{constructor(i){this.prayerTypeService=i}node;refreshNeeded=new be;isEditing=!1;tempName="";enableEdit(){this.isEditing=!0,this.tempName=this.node.type}cancelEdit(){this.isEditing=!1,this.tempName=""}saveEdit(){return u(this,null,function*(){let i=this.tempName.trim();if(!i){alert("Name cannot be empty");return}try{yield this.prayerTypeService.update(this.node.id,{type:i}),this.node.type=i,this.isEditing=!1,this.refreshNeeded.emit()}catch(e){console.error("Error updating prayer type:",e)}})}addSubtype(){return u(this,null,function*(){let i=prompt("Enter subtype name:");if(i)try{yield this.prayerTypeService.create({type:i,parent_type_id:this.node.id,sequence:1}),this.refreshNeeded.emit()}catch(e){console.error("Error creating subtype:",e)}})}deleteType(){return u(this,null,function*(){if(confirm(`Are you sure you want to delete "${this.node.type}"?`))try{yield this.prayerTypeService.delete(this.node.id),this.refreshNeeded.emit()}catch(i){console.error("Error deleting prayer type:",i)}})}onChildRefreshNeeded(){this.refreshNeeded.emit()}static \u0275fac=function(e){return new(e||r)(A(at))};static \u0275cmp=X({type:r,selectors:[["app-prayer-type-subitem"]],inputs:{node:"node"},outputs:{refreshNeeded:"refreshNeeded"},decls:4,vars:3,consts:[["editMode",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"click"],[1,"material-icons",2,"font-size","14px"],[3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"refreshNeeded","node"]],template:function(e,t){if(e&1&&F(0,Vp,12,1,"ng-container",1)(1,jp,7,1,"ng-template",null,0,to)(3,$p,2,1,"ul",2),e&2){let n=eo(2);C("ngIf",!t.isEditing)("ngIfElse",n),v(3),C("ngIf",t.node.subtypes==null?null:t.node.subtypes.length)}},dependencies:[r,oe,xe,je,me,ce,fe,de],encapsulation:2})};function Bp(r,i){if(r&1){let e=Z();h(0,"li")(1,"app-prayer-type-subitem",4),T("refreshNeeded",function(){I(e);let n=y();return k(n.onRefreshNeeded())}),m()()}if(r&2){let e=i.$implicit;v(),C("node",e)}}var Ms=class r{constructor(i){this.prayerTypeService=i}prayerTypes=[];newRootTypeName="";ngOnInit(){return u(this,null,function*(){yield this.loadData()})}loadData(){return u(this,null,function*(){try{this.prayerTypes=yield this.prayerTypeService.getTree()}catch(i){console.error("Error loading prayer types:",i)}})}addRootType(){return u(this,null,function*(){let i=this.newRootTypeName.trim();if(i)try{yield this.prayerTypeService.create({type:i,parent_type_id:null,sequence:1}),this.newRootTypeName="",yield this.loadData()}catch(e){console.error("Error creating root type:",e)}})}onRefreshNeeded(){return u(this,null,function*(){yield this.loadData()})}static \u0275fac=function(e){return new(e||r)(A(at))};static \u0275cmp=X({type:r,selectors:[["app-prayer-types-list"]],decls:10,vars:2,consts:[[2,"margin-bottom","1rem"],["type","text","placeholder","Nou tip de rug\u0103ciune",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[3,"refreshNeeded","node"]],template:function(e,t){e&1&&(h(0,"div",0)(1,"h2"),_(2,"Tipuri de rug\u0103ciuni"),m(),h(3,"label"),_(4,"Adaug\u0103 un tip nou de rug\u0103ciune: "),m(),h(5,"input",1),N("ngModelChange",function(s){return P(t.newRootTypeName,s)||(t.newRootTypeName=s),s}),m(),h(6,"button",2),T("click",function(){return t.addRootType()}),_(7,"Adaug\u0103"),m()(),h(8,"ul"),F(9,Bp,2,1,"li",3),m()),e&2&&(v(5),O("ngModel",t.newRootTypeName),v(4),C("ngForOf",t.prayerTypes))},dependencies:[oe,xe,me,ce,fe,de,Es],encapsulation:2})};var Je=class r{constructor(i,e){this.auth=i;this.router=e}canActivate(){return this.auth.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||r)(D(ot),D(_e))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function Hp(r,i){if(r&1&&(h(0,"div",8),_(1),m()),r&2){let e=y();v(),we(" ",e.errorMsg," ")}}var Is=class r{constructor(i,e){this.authService=i;this.router=e}email="";password="";errorMsg="";ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/prayer-types"])}onLogin(){return u(this,null,function*(){this.errorMsg="";try{yield this.authService.signIn(this.email,this.password),this.router.navigate(["/prayers"])}catch(i){this.errorMsg=i.message||"Login failed",console.error("Login error:",i)}})}static \u0275fac=function(e){return new(e||r)(A(ot),A(_e))};static \u0275cmp=X({type:r,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"container"],[1,"login-container"],["style","color:red;",4,"ngIf"],[1,"form-container",3,"ngSubmit"],[1,"input-container"],["name","email","type","email",3,"ngModelChange","ngModel"],["name","password","type","password",3,"ngModelChange","ngModel"],["type","submit"],[2,"color","red"]],template:function(e,t){e&1&&(h(0,"div",0)(1,"div",1)(2,"h2"),_(3,"Admin Login"),m(),F(4,Hp,2,1,"div",2),h(5,"form",3),T("ngSubmit",function(){return t.onLogin()}),h(6,"div",4)(7,"label"),_(8,"Email:"),m(),h(9,"input",5),N("ngModelChange",function(s){return P(t.email,s)||(t.email=s),s}),m()(),h(10,"div",4),_(11,"` "),h(12,"label"),_(13,"Password:"),m(),h(14,"input",6),N("ngModelChange",function(s){return P(t.password,s)||(t.password=s),s}),m()(),h(15,"button",7),_(16,"Login"),m()()()()),e&2&&(v(4),C("ngIf",t.errorMsg),v(5),O("ngModel",t.email),v(5),O("ngModel",t.password))},dependencies:[oe,je,me,eu,ce,fe,Yd,de,Ia],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100vw;height:100vh}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;border:1px solid black;padding:1rem;height:min-content;border-radius:5px;gap:.5rem}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border-radius:5px;border:1px solid black}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;border-radius:5px;border:1px solid black;cursor:pointer;margin-top:1rem}"]})};var $i=class r{constructor(i,e){this.el=i;this.renderer=e;this.renderer.setAttribute(this.el.nativeElement,"placeholder","mm:ss")}_value=0;onChange=()=>{};onTouched=()=>{};onBlur(i){this._value=this.parseValue(i),this.onChange(this._value),this.onTouched();let e=this.formatValue(i);this.renderer.setProperty(this.el.nativeElement,"value",e)}writeValue(i){this._value=i||0;let e=this.formatValueFromSeconds(this._value);this.renderer.setProperty(this.el.nativeElement,"value",e)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}parseValue(i){let e=i.split(":"),t=parseInt(e[0]||"0",10),n=parseInt(e[1]||"0",10);return t*60+n}formatValue(i){let e=i.split(":"),t=parseInt(e[0]||"0",10),n=parseInt(e[1]||"0",10);return n>=60&&(t+=Math.floor(n/60),n=n%60),`${this.pad(t)}:${this.pad(n)}`}formatValueFromSeconds(i){let e=Math.floor(i/60),t=i%60;return`${this.pad(e)}:${this.pad(t)}`}pad(i){return i<10?"0"+i:i.toString()}static \u0275fac=function(e){return new(e||r)(A(Oe),A(qe))};static \u0275dir=Y({type:r,selectors:[["","timeInput",""]],hostBindings:function(e,t){e&1&&T("blur",function(s){return t.onBlur(s.target.value)})},features:[Ce([{provide:Ot,useExisting:Xe(()=>r),multi:!0}])]})};var Bi=class r{transform(i){let e=Math.floor(i/60),t=i%60;return`${e}:${t.toString().padStart(2,"0")}`}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=Js({name:"timeFormat",type:r,pure:!0})};var Nt=class r extends re{constructor(e){super(e);this.supabase=e}tableName="liturgical_texts";getById(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).select("*, texts: text_elements(*)").order("sequence",{foreignTable:"text_elements"}).eq("id",e).single();if(n)throw n;return t})}getAll(){return u(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").order("title",{ascending:!0});if(t)throw t;return e??[]})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var ks=class r extends re{constructor(e){super(e);this.supabase=e}tableName="text_elements";updateSequence(e,t){return u(this,null,function*(){return this.update(e,{sequence:t})})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function Gp(r,i){if(r&1){let e=Z();h(0,"div")(1,"h2")(2,"button",9),T("click",function(){I(e);let n=y();return k(n.goBack())}),h(3,"i",10),_(4,"arrow_back"),m()(),_(5),h(6,"button",9),T("click",function(){I(e);let n=y();return k(n.deleteText())}),h(7,"i",11),_(8,"delete"),m()()(),h(9,"p"),_(10," Schimb\u0103 titlul: "),h(11,"input",12),N("ngModelChange",function(n){I(e);let s=y();return P(s.text.title,n)||(s.text.title=n),k(n)}),m(),ie(12,"br"),_(13," Durata audio: "),h(14,"input",13),N("ngModelChange",function(n){I(e);let s=y();return P(s.text.audio_time,n)||(s.text.audio_time=n),k(n)}),m(),ie(15,"br"),h(16,"button",9),T("click",function(){I(e);let n=y();return k(n.saveTitle())}),_(17,"Salveaz\u0103"),m()()()}if(r&2){let e=y();v(5),we(" ",e.textTitle," "),v(6),O("ngModel",e.text.title),v(3),O("ngModel",e.text.audio_time)}}function Wp(r,i){r&1&&(h(0,"p"),_(1,"Nu sunt texte ad\u0103ugate"),m())}function qp(r,i){if(r&1){let e=Z();h(0,"p")(1,"textarea",14),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editedTextElement.text,n)||(s.editedTextElement.text=n),k(n)}),m(),h(2,"label",7),_(3,"Timp \xEEnceput: "),m(),h(4,"input",15),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editedTextElement.start_time,n)||(s.editedTextElement.start_time=n),k(n)}),m(),h(5,"label",8),_(6,"Timp sf\xE2r\u0219it: "),m(),h(7,"input",15),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editedTextElement.end_time,n)||(s.editedTextElement.end_time=n),k(n)}),m(),h(8,"button",9),T("click",function(){I(e);let n=y().index,s=y();return k(s.editTextElement(n))}),h(9,"i",16),_(10,"save"),m()(),h(11,"button",9),T("click",function(){I(e);let n=y(2);return k(n.clearEditedTextElement())}),h(12,"i",16),_(13,"cancel"),m()()()}if(r&2){let e=y(2);v(),O("ngModel",e.editedTextElement.text),v(3),O("ngModel",e.editedTextElement.start_time),v(3),O("ngModel",e.editedTextElement.end_time)}}function Yp(r,i){if(r&1&&(h(0,"span"),_(1),ht(2,"timeFormat"),ht(3,"timeFormat"),m()),r&2){let e,t=y(2).$implicit,n=y();v(),ue("",ft(2,2,t.start_time+((e=n.sectionStartTime)!==null&&e!==void 0?e:0))," \u2192 ",ft(3,4,t.end_time+((e=n.sectionStartTime)!==null&&e!==void 0?e:0)),"")}}function Kp(r,i){if(r&1){let e=Z();h(0,"p"),_(1),F(2,Yp,4,6,"span",0),h(3,"span",17)(4,"button",18),T("click",function(){I(e);let n=y().index,s=y();return k(s.moveUp(n))}),_(5,"\u2191"),m(),h(6,"button",19),T("click",function(){I(e);let n=y().index,s=y();return k(s.moveDown(n))}),_(7,"\u2193"),m(),h(8,"button",9),T("click",function(){I(e);let n=y(),s=n.$implicit,o=n.index,l=y();return k(l.deleteTextElement(s.id,o))}),h(9,"i",16),_(10,"delete"),m()(),h(11,"button",9),T("click",function(){I(e);let n=y().$implicit,s=y();return k(s.setEditedTextElement(n))}),h(12,"i",16),_(13,"edit"),m()()()()}if(r&2){let e=y(),t=e.$implicit,n=e.index,s=y();v(),we(" ",t.text," "),v(),C("ngIf",t.start_time!=null&&t.end_time!=null),v(2),C("disabled",n===0),v(2),C("disabled",n===(s.text==null?null:s.text.texts.length)-1)}}function Zp(r,i){if(r&1&&(h(0,"li"),F(1,qp,14,3,"p",0)(2,Kp,14,4,"p",0),m()),r&2){let e=i.$implicit,t=y();v(),C("ngIf",(t.editedTextElement==null?null:t.editedTextElement.id)&&e.id==(t.editedTextElement==null?null:t.editedTextElement.id)),v(),C("ngIf",!(t.editedTextElement!=null&&t.editedTextElement.id)||e.id!=(t.editedTextElement==null?null:t.editedTextElement.id))}}var rn=class r{constructor(i,e,t){this.route=i;this.litTextService=e;this.textElementsService=t}textId;text=null;editedTitle="";newTextElement=null;editedTextElement=null;sectionStartTime=0;textTitle="";ngOnInit(){return u(this,null,function*(){this.textId=this.route.snapshot.paramMap.get("id")||"",this.sectionStartTime=parseInt(this.route.snapshot.paramMap.get("sectionStartTime")||"0"),this.newTextElement={text_id:this.textId},this.editedTextElement={},yield this.loadLiturgicalText()})}loadLiturgicalText(){return u(this,null,function*(){this.text=yield this.litTextService.getById(this.textId),this.textTitle=this.text?.title??"",this.newTextElement.start_time=this.text?.texts?.length?this.text.texts[this.text.texts.length-1].end_time+this.sectionStartTime:this.sectionStartTime})}loadTextElements(){return u(this,null,function*(){if(!this.text)return;let{data:i,error:e}=yield this.textElementsService.client.from("text_elements").select("*").eq("text_id",this.text.id).order("sequence");!e&&i&&(this.text.texts=i)})}saveTitle(){return u(this,null,function*(){if(this.text)try{(yield this.litTextService.update(this.text.id,{title:this.text.title??null,audio_time:this.text.audio_time}))&&(alert("Textul a fost salvat!"),this.textTitle=this.text.title??"")}catch(i){console.error("Error updating title:",i)}})}addTextElement(){return u(this,null,function*(){if(!this.textId)return;let i=this.newTextElement?.text.trim();if(i)try{let e=0;this.text?.texts&&this.text.texts.length>0&&(e=Math.max(...this.text.texts.map(t=>t.sequence))),yield this.textElementsService.create({text:i,sequence:e+1,text_id:this.textId,start_time:(this.newTextElement?.start_time??0)-(this.sectionStartTime??0),end_time:(this.newTextElement?.end_time??0)-(this.sectionStartTime??0)}),this.newTextElement={text_id:this.textId,start_time:this.newTextElement?.end_time,end_time:this.newTextElement?.end_time},yield this.loadTextElements()}catch(e){console.error("Error adding text element:",e)}})}goBack(){history.back()}deleteText(){return u(this,null,function*(){if(this.text&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi acest text? Nu \xEEl po\u021Bi recupera ulterior!"))try{yield this.litTextService.delete(this.text.id),location.href="/liturgicalTexts"}catch(i){console.error("Error deleting text:",i)}})}deleteTextElement(i,e){return u(this,null,function*(){if(confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi acest text? Nu \xEEl po\u021Bi recupera ulterior!"))try{yield this.textElementsService.delete(i),this.text?.texts?.splice(e,1),this.newTextElement.start_time=this.text?.texts?.length?(this.text.texts[this.text.texts.length-1].end_time??0)+(this.sectionStartTime??0):0,this.newTextElement.end_time=this.text?.texts?.length?(this.text.texts[this.text.texts.length-1].end_time??0)+(this.sectionStartTime??0):0}catch(t){console.error("Error deleting text element:",t)}})}setEditedTextElement(i){this.editedTextElement=S({},i),this.editedTextElement.start_time+=this.sectionStartTime??0,this.editedTextElement.end_time+=this.sectionStartTime??0}clearEditedTextElement(){this.editedTextElement={}}editTextElement(i){return u(this,null,function*(){if(!(!this.editedTextElement?.id||!this.editedTextElement.text))try{this.editedTextElement.start_time-=this.sectionStartTime??0,this.editedTextElement.end_time-=this.sectionStartTime??0,yield this.textElementsService.update(this.editedTextElement.id,S({},this.editedTextElement)),this.text?.texts?.splice(i,1,S({},this.editedTextElement)),this.editedTextElement={}}catch(e){alert("A intervenit o eroare: "+e.message)}})}moveUp(i){return u(this,null,function*(){if(!this.text?.texts||i===0)return;let e=this.text.texts[i],t=this.text.texts[i-1];try{let n=e.sequence;e.sequence=t.sequence,t.sequence=n,yield this.textElementsService.update(e.id,{sequence:e.sequence}),yield this.textElementsService.update(t.id,{sequence:t.sequence}),this.text.texts[i]=t,this.text.texts[i-1]=e}catch(n){console.error("Error moving element up:",n)}})}moveDown(i){return u(this,null,function*(){if(!this.text?.texts||i===this.text.texts.length-1)return;let e=this.text.texts[i],t=this.text.texts[i+1];try{let n=e.sequence;e.sequence=t.sequence,t.sequence=n,yield this.textElementsService.update(e.id,{sequence:e.sequence}),yield this.textElementsService.update(t.id,{sequence:t.sequence}),this.text.texts[i]=t,this.text.texts[i+1]=e}catch(n){console.error("Error moving element down:",n)}})}secondsToTimeFormat(i){let e=Math.floor(i/60),t=i%60;return`${e}:${t<10?"0"+t:t}`}static \u0275fac=function(e){return new(e||r)(A(Ie),A(Nt),A(ks))};static \u0275cmp=X({type:r,selectors:[["app-liturgical-text-detail"]],decls:26,vars:7,consts:[[4,"ngIf"],["for","section_start_time"],["type","text","timeInput","",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[2,"margin-top","1rem"],["for","text"],["id","text","rows","4",2,"width","100%",3,"ngModelChange","ngModel"],["for","start_time"],["for","end_time"],[3,"click"],["title","\xCEnapoi",1,"material-icons",2,"font-size","16px"],["title","\u0218terge",1,"material-icons",2,"font-size","16px"],[2,"width","fit-content",3,"ngModelChange","ngModel"],["timeInput","",2,"width","fit-content",3,"ngModelChange","ngModel"],["rows","4",2,"width","100%",3,"ngModelChange","ngModel"],["timeInput","",3,"ngModelChange","ngModel"],["title","\u0218terge",1,"material-icons",2,"font-size","12px"],[2,"display","inline","margin-left","1rem"],["title","Mut\u0103 \xEEn sus",3,"click","disabled"],["title","Mut\u0103 \xEEn jos",3,"click","disabled"]],template:function(e,t){e&1&&(F(0,Gp,18,3,"div",0),ie(1,"hr"),h(2,"div")(3,"h3"),_(4,"Texte"),m(),h(5,"label",1),_(6,"Timp \xEEnceput \xEEn sec\u021Biune(orientativ): "),m(),h(7,"input",2),N("ngModelChange",function(s){return P(t.sectionStartTime,s)||(t.sectionStartTime=s),s}),m(),F(8,Wp,2,0,"p",0),h(9,"ol"),F(10,Zp,3,2,"li",3),m()(),h(11,"div",4)(12,"h4"),_(13,"Adaug\u0103 un text nou"),m(),h(14,"label",5),_(15,"Text:"),m(),h(16,"textarea",6),N("ngModelChange",function(s){return P(t.newTextElement.text,s)||(t.newTextElement.text=s),s}),m(),h(17,"label",7),_(18,"Timp \xEEnceput: "),m(),h(19,"input",2),N("ngModelChange",function(s){return P(t.newTextElement.start_time,s)||(t.newTextElement.start_time=s),s}),m(),h(20,"label",8),_(21,"Timp sf\xE2r\u0219it: "),m(),h(22,"input",2),N("ngModelChange",function(s){return P(t.newTextElement.end_time,s)||(t.newTextElement.end_time=s),s}),m(),ie(23,"br"),h(24,"button",9),T("click",function(){return t.addTextElement()}),_(25,"Adaug\u0103"),m()()),e&2&&(C("ngIf",t.text),v(7),O("ngModel",t.sectionStartTime),v(),C("ngIf",!(!(t.text==null||t.text.texts==null)&&t.text.texts.length)),v(2),C("ngForOf",t.text==null?null:t.text.texts),v(6),O("ngModel",t.newTextElement.text),v(3),O("ngModel",t.newTextElement.start_time),v(3),O("ngModel",t.newTextElement.end_time))},dependencies:[oe,xe,je,me,ce,fe,de,$i,Bi],encapsulation:2})};var Jp=r=>["/liturgicalTexts",r];function Qp(r,i){if(r&1&&(h(0,"li")(1,"a",4),_(2),m()()),r&2){let e=i.$implicit;v(),C("routerLink",ut(2,Jp,e.id)),v(),we(" ",e.title?e.title:"F\u0103r\u0103 Titlu"," ")}}var As=class r{constructor(i){this.litTextService=i}liturgicalTexts=[];newLiturgicalTextName="";ngOnInit(){return u(this,null,function*(){yield this.loadData()})}loadData(){return u(this,null,function*(){this.liturgicalTexts=yield this.litTextService.getAll()})}addLitirgucalText(){return u(this,null,function*(){let i=this.newLiturgicalTextName.trim()??null;try{let e=yield this.litTextService.create({title:i.length>0?i:void 0});this.newLiturgicalTextName="",this.liturgicalTexts.splice(0,0,e)}catch(e){alert("Error creating root type: "+e)}})}static \u0275fac=function(e){return new(e||r)(A(Nt))};static \u0275cmp=X({type:r,selectors:[["app-liturgical-texts-list"]],decls:10,vars:2,consts:[[2,"margin-bottom","1rem"],["type","text","placeholder","Text liturgic nou",3,"ngModelChange","ngModel"],[2,"margin-left","1rem",3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){e&1&&(h(0,"div",0)(1,"h2"),_(2,"Texte liturgice"),m(),h(3,"label"),_(4,"Adaug\u0103 un text nou: "),m(),h(5,"input",1),N("ngModelChange",function(s){return P(t.newLiturgicalTextName,s)||(t.newLiturgicalTextName=s),s}),m(),h(6,"button",2),T("click",function(){return t.addLitirgucalText()}),_(7,"Adaug\u0103"),m()(),h(8,"ul"),F(9,Qp,3,4,"li",3),m()),e&2&&(v(5),O("ngModel",t.newLiturgicalTextName),v(4),C("ngForOf",t.liturgicalTexts))},dependencies:[oe,xe,$e,me,ce,fe,de],encapsulation:2})};var Xp=r=>["/sections",r];function eg(r,i){if(r&1&&(h(0,"li")(1,"a",4)(2,"p"),_(3),m()()()),r&2){let e=i.$implicit;v(),C("routerLink",ut(3,Xp,e.id)),v(2),ue(" ",e.title," ",e.subtitle?" - "+e.subtitle:""," ")}}var Ds=class r{constructor(i){this.sectionsService=i}sections=[];newSectionTitle="";ngOnInit(){return u(this,null,function*(){yield this.loadSections()})}loadSections(){return u(this,null,function*(){this.sections=yield this.sectionsService.getAll()})}addSection(){return u(this,null,function*(){let i=this.newSectionTitle.trim();if(i)try{yield this.sectionsService.create({title:i,audio_url:"",subtitle:null,image_url:null}),this.newSectionTitle="",yield this.loadSections()}catch(e){console.error("Eroare la crearea noii sec\u021Biuni:",e)}})}static \u0275fac=function(e){return new(e||r)(A(Pt))};static \u0275cmp=X({type:r,selectors:[["app-sections-list"]],decls:11,vars:2,consts:[["for","newSectionTitle"],["id","newSectionTitle",3,"ngModelChange","ngModel"],[2,"margin-left","1rem",3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){e&1&&(h(0,"div")(1,"h2"),_(2,"Sec\u021Biuni"),m(),h(3,"p")(4,"label",0),_(5,"Ad\u0103uga\u021Bi o sec\u021Biune nou\u0103: "),m(),h(6,"input",1),N("ngModelChange",function(s){return P(t.newSectionTitle,s)||(t.newSectionTitle=s),s}),m(),h(7,"button",2),T("click",function(){return t.addSection()}),_(8," Ad\u0103uga\u021Bi "),m()(),h(9,"ul"),F(10,eg,4,5,"li",3),m()()),e&2&&(v(6),O("ngModel",t.newSectionTitle),v(4),C("ngForOf",t.sections))},dependencies:[oe,xe,me,ce,fe,de,$e],encapsulation:2})};function Da(r){return Array.isArray(r)?r:[r]}var Ra;try{Ra=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ra=!1}var Rs=(()=>{class r{_platformId=M(jt);isBrowser=this._platformId?_l(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Ra)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var su=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({})}return r})();var tg=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ou=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({providers:[tg]})}return r})();var au=new Set,ti,ig=(()=>{class r{_platform=M(Rs);_nonce=M(qi,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ng}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&rg(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function rg(r,i){if(!au.has(r))try{ti||(ti=document.createElement("style"),i&&ti.setAttribute("nonce",i),ti.setAttribute("type","text/css"),document.head.appendChild(ti)),ti.sheet&&(ti.sheet.insertRule(`@media ${r} {body{ }}`,0),au.add(r))}catch(e){console.error(e)}}function ng(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var cu=(()=>{class r{_mediaMatcher=M(ig);_zone=M(Me);_queries=new Map;_destroySubject=new Le;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return lu(Da(e)).some(n=>this._registerQuery(n).mql.matches)}observe(e){let n=lu(Da(e)).map(o=>this._registerQuery(o).observable),s=ni(n);return s=ln(s.pipe(wt(1)),s.pipe(qa(1),Ha(0))),s.pipe(H(o=>{let l={matches:!1,breakpoints:{}};return o.forEach(({matches:a,query:c})=>{l.matches=l.matches||a,l.breakpoints[c]=a}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let t=this._mediaMatcher.matchMedia(e),s={observable:new ja(o=>{let l=a=>this._zone.run(()=>o.next(a));return t.addListener(l),()=>{t.removeListener(l)}}).pipe(dn(t),H(({matches:o})=>({query:e,matches:o})),un(this._destroySubject)),mql:t};return this._queries.set(e,s),s}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function lu(r){return r.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}var ii=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(ii||{}),du="cdk-high-contrast-black-on-white",uu="cdk-high-contrast-white-on-black",Oa="cdk-high-contrast-active",hu=(()=>{class r{_platform=M(Rs);_hasCheckedHighContrastMode;_document=M(ge);_breakpointSubscription;constructor(){this._breakpointSubscription=M(cu).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ii.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,s=(n&&n.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ii.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ii.BLACK_ON_WHITE}return ii.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Oa,du,uu),this._hasCheckedHighContrastMode=!0;let t=this.getHighContrastMode();t===ii.BLACK_ON_WHITE?e.add(Oa,du):t===ii.WHITE_ON_BLACK&&e.add(Oa,uu)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Pa=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({})}return r})();var Hi=(()=>{class r{constructor(){M(hu)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({imports:[Pa,Pa]})}return r})();var nn=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({imports:[Hi,ou,Hi]})}return r})();var mu=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=se({type:r});static \u0275inj=ne({imports:[Hi,nn,nn,su,Hi]})}return r})();var Os=class r extends re{constructor(e){super(e);this.supabase=e}tableName="section_texts";create(e){return u(this,null,function*(){let{data:t,error:n}=yield this.client.from(this.tableName).insert([e]).select("*, text: liturgical_texts(*), section_text_elements(*, text_element: text_elements(*))").single();if(n)throw n;return t})}static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ps=class r extends re{constructor(e){super(e);this.supabase=e}tableName="section_text_elements";static \u0275fac=function(t){return new(t||r)(D(J))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var hg=(r,i)=>["/liturgicalTexts",r,i];function fg(r,i){if(r&1&&(h(0,"audio",31),ie(1,"source",32),_(2," Your browser does not support the audio element."),m()),r&2){let e=y(2);v(),C("src",e.section.audio_url,Ks)}}function mg(r,i){if(r&1&&ie(0,"img",33),r&2){let e=y(2);C("src",e.section.image_url,Ks)}}function pg(r,i){if(r&1){let e=Z();h(0,"div")(1,"h2")(2,"button",19),T("click",function(){I(e);let n=y();return k(n.goBack())}),h(3,"i",20),_(4,"arrow_back"),m()(),_(5),h(6,"button",19),T("click",function(){I(e);let n=y();return k(n.deleteSection())}),h(7,"i",21),_(8,"delete"),m()()(),h(9,"div",22)(10,"div")(11,"table",23)(12,"tr")(13,"td")(14,"label"),_(15,"Titlu:"),m()(),h(16,"td")(17,"input",24),N("ngModelChange",function(n){I(e);let s=y();return P(s.editedTitle,n)||(s.editedTitle=n),k(n)}),m()()(),h(18,"tr")(19,"td")(20,"label"),_(21,"Subtitlu:"),m()(),h(22,"td")(23,"input",24),N("ngModelChange",function(n){I(e);let s=y();return P(s.editedSubtitle,n)||(s.editedSubtitle=n),k(n)}),m()()(),h(24,"tr")(25,"td")(26,"label"),_(27,"Audio URL:"),m()(),h(28,"td")(29,"input",24),N("ngModelChange",function(n){I(e);let s=y();return P(s.editedAudioUrl,n)||(s.editedAudioUrl=n),k(n)}),m()(),h(30,"td")(31,"input",25),T("change",function(n){I(e);let s=y();return k(s.onFileSelected(n))}),m()()(),h(32,"tr")(33,"td")(34,"label"),_(35,"Durat\u0103:"),m()(),h(36,"td")(37,"input",26),N("ngModelChange",function(n){I(e);let s=y();return P(s.editedDuration,n)||(s.editedDuration=n),k(n)}),m()()(),h(38,"tr")(39,"td")(40,"label"),_(41,"URL Imagine:"),m()(),h(42,"td")(43,"input",24),N("ngModelChange",function(n){I(e);let s=y();return P(s.editedImageUrl,n)||(s.editedImageUrl=n),k(n)}),m()()(),h(44,"tr")(45,"td",27)(46,"button",19),T("click",function(){I(e);let n=y();return k(n.saveSection())}),ie(47,"i",28),_(48," Salveaz\u0103 "),m()()()(),F(49,fg,3,1,"audio",29),m(),F(50,mg,1,1,"img",30),m()()}if(r&2){let e=y();v(5),ue("",e.section.title," ",e.section.subtitle!==null?" - "+e.section.subtitle:""," "),v(12),O("ngModel",e.editedTitle),v(6),O("ngModel",e.editedSubtitle),v(6),O("ngModel",e.editedAudioUrl),v(8),O("ngModel",e.editedDuration),v(6),O("ngModel",e.editedImageUrl),v(6),C("ngIf",e.section.audio_url),v(),C("ngIf",e.section.image_url)}}function gg(r,i){r&1&&(h(0,"span",39)(1,"label"),_(2," Intervale de timp personalizate"),m()())}function _g(r,i){if(r&1&&(h(0,"h4"),_(1),h(2,"a",38),_(3),m(),h(4,"span",39),_(5),ht(6,"timeFormat"),ht(7,"timeFormat"),m(),F(8,gg,3,0,"span",40),m()),r&2){let e,t=y(2),n=t.$implicit,s=t.index;v(),ue(" ",s+1,". ",(n==null?null:n.repetition)>1?n.repetition+" x":""," "),v(),C("routerLink",al(11,hg,n.liturgical_text_id,n.start_time)),v(),we(" ",!(n==null||n.text==null||n.text.title==null)&&n.text.title.length?n==null||n.text==null?null:n.text.title:"F\u0103r\u0103 Titlu",", "),v(2),ue(" ",ft(6,7,(e=n.start_time)!==null&&e!==void 0?e:0)," \u2192 ",ft(7,9,(e=n.end_time)!==null&&e!==void 0?e:0)," "),v(3),C("ngIf",n.use_custom_times)}}function vg(r,i){if(r&1&&(Et(0),F(1,_g,9,14,"h4",0),Mt()),r&2){let e=y(2);v(),C("ngIf",e.allLitTexts&&e.allLitTexts.length)}}function yg(r,i){if(r&1){let e=Z();Et(0),h(1,"span"),_(2),h(3,"label"),_(4,"Repet\u0103ri: "),m(),h(5,"input",41),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editingSectionText.repetition,n)||(s.editingSectionText.repetition=n),k(n)}),m()(),h(6,"span",39)(7,"input",42),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editingSectionText.start_time,n)||(s.editingSectionText.start_time=n),k(n)}),m(),_(8," \u2192 "),h(9,"input",43),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editingSectionText.end_time,n)||(s.editingSectionText.end_time=n),k(n)}),m()(),h(10,"span",44)(11,"input",45),N("ngModelChange",function(n){I(e);let s=y(2);return P(s.editingSectionText.use_custom_times,n)||(s.editingSectionText.use_custom_times=n),k(n)}),m(),h(12,"label",46),_(13,"Intervale de timp personalizate"),m()(),Mt()}if(r&2){let e=y(),t=e.$implicit,n=e.index,s=y();v(2),ue(" ",n+1,". ",t.text==null?null:t.text.title,", "),v(3),O("ngModel",s.editingSectionText.repetition),v(2),O("ngModel",s.editingSectionText.start_time),v(2),O("ngModel",s.editingSectionText.end_time),v(2),O("ngModel",s.editingSectionText.use_custom_times)}}function bg(r,i){if(r&1){let e=Z();h(0,"div")(1,"button",47),T("click",function(){I(e);let n=y().index,s=y();return k(s.moveUp(n))}),_(2,"\u2191"),m(),h(3,"button",48),T("click",function(){I(e);let n=y().index,s=y();return k(s.moveDown(n))}),_(4,"\u2193"),m(),h(5,"button",19),T("click",function(){I(e);let n=y(),s=n.$implicit,o=n.index,l=y();return k(l.deleteSectionText(s,o))}),h(6,"i",49),_(7,"delete"),m()(),h(8,"button",19),T("click",function(){I(e);let n=y().$implicit,s=y();return k(s.setEditingSectionText(n))}),h(9,"i",50),_(10,"edit"),m()()()}if(r&2){let e=y().index,t=y();v(),C("disabled",e===0),v(2),C("disabled",e===t.sectionTexts.length-1)}}function xg(r,i){if(r&1){let e=Z();h(0,"div")(1,"button",19),T("click",function(){I(e);let n=y(2);return k(n.saveEditedSectionText())}),h(2,"i",51),_(3,"save"),m()(),h(4,"button",19),T("click",function(){I(e);let n=y(2);return k(n.clearEditingSectionText())}),h(5,"i",52),_(6,"cancel"),m()()()}}function Sg(r,i){if(r&1){let e=Z();h(0,"li")(1,"div"),_(2),h(3,"div",56)(4,"input",57),N("ngModelChange",function(n){let s=I(e).$implicit;return P(s.start_time,n)||(s.start_time=n),k(n)}),m(),_(5," \u2192 "),h(6,"input",57),N("ngModelChange",function(n){let s=I(e).$implicit;return P(s.end_time,n)||(s.end_time=n),k(n)}),m()()()()}if(r&2){let e=i.$implicit;v(2),we("",e.text_element.text," "),v(2),O("ngModel",e.start_time),v(2),O("ngModel",e.end_time)}}function wg(r,i){if(r&1&&(h(0,"div",54)(1,"ol"),F(2,Sg,7,3,"li",55),m()()),r&2){let e=y(3);v(2),C("ngForOf",e.editingSectionText.section_text_elements)}}function Cg(r,i){if(r&1&&(h(0,"li")(1,"span"),_(2),ht(3,"timeFormat"),ht(4,"timeFormat"),m()()),r&2){let e,t=i.$implicit,n=y(3).$implicit;v(2),ol("",t.text," ",ft(3,3,((e=n.start_time)!==null&&e!==void 0?e:0)+((e=t.start_time)!==null&&e!==void 0?e:0))," \u2192 ",ft(4,5,((e=n.start_time)!==null&&e!==void 0?e:0)+((e=t.end_time)!==null&&e!==void 0?e:0)),"")}}function Tg(r,i){if(r&1&&(h(0,"div",54)(1,"ol"),F(2,Cg,5,7,"li",55),m()()),r&2){let e=y(3);v(2),C("ngForOf",e.editingSectionText.text==null?null:e.editingSectionText.text.texts)}}function Eg(r,i){if(r&1&&(Et(0),F(1,wg,3,1,"div",53)(2,Tg,3,1,"div",53),Mt()),r&2){let e=y(2);v(),C("ngIf",e.editingSectionText.use_custom_times),v(),C("ngIf",!e.editingSectionText.use_custom_times)}}function Mg(r,i){if(r&1&&(h(0,"li",34)(1,"div",35)(2,"div",36),F(3,vg,2,1,"ng-container",0)(4,yg,14,6,"ng-container",0),m(),h(5,"div",37),F(6,bg,11,2,"div",0)(7,xg,7,0,"div",0),m()(),F(8,Eg,3,2,"ng-container",0),m()),r&2){let e=i.$implicit,t=y();v(3),C("ngIf",t.editingSectionText===null||t.editingSectionText.id!==e.id),v(),C("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id),v(2),C("ngIf",t.editingSectionText===null||t.editingSectionText.id!==e.id),v(),C("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id),v(),C("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id)}}function Ig(r,i){if(r&1&&(h(0,"option",58),_(1),ht(2,"timeFormat"),m()),r&2){let e,t=i.$implicit;C("value",t.id),v(),ue(" ",t.title,", ",ft(2,3,(e=t.audio_time)!==null&&e!==void 0?e:0)," ")}}function kg(r,i){if(r&1){let e=Z();h(0,"tr")(1,"td")(2,"label",59),_(3,"Titlu:"),m()(),h(4,"td")(5,"input",60),N("ngModelChange",function(n){I(e);let s=y();return P(s.newLiturgicalTextTitle,n)||(s.newLiturgicalTextTitle=n),k(n)}),m()()()}if(r&2){let e=y();v(5),O("ngModel",e.newLiturgicalTextTitle)}}var Ns=class r{constructor(i,e,t,n,s,o,l){this.route=i;this.router=e;this.sectionsService=t;this.sectionTextsService=n;this.litTextsService=s;this.sectionTextElementsService=o;this.supabaseService=l}sectionId;section=null;sectionTexts=[];allLitTexts=[];editedTitle="";editedSubtitle="";editedAudioUrl="";editedDuration=null;editedImageUrl="";selectedLitTextId="new";newStartTime=0;newEndTime=0;newRepetitions=1;newLiturgicalTextTitle="";editingSectionText=null;uploadedFile=null;ngOnInit(){return u(this,null,function*(){this.sectionId=this.route.snapshot.paramMap.get("id")||"",yield this.loadSection(),yield this.loadAllLitTexts(),yield this.loadSectionTexts()})}loadSection(){return u(this,null,function*(){this.section=yield this.sectionsService.getById(this.sectionId),this.section&&(this.editedTitle=this.section.title||"",this.editedSubtitle=this.section.subtitle||"",this.editedAudioUrl=this.section.audio_url,this.editedDuration=this.section.duration,this.editedImageUrl=this.section.image_url||"")})}deleteSection(){return u(this,null,function*(){if(confirm("\u0218terge aceast\u0103 sec\u021Biune?"))try{yield this.sectionsService.delete(this.sectionId),alert("Sec\u021Biune \u0219tears\u0103 cu succes!"),this.router.navigate(["/sections"])}catch(i){console.error("Eroare la \u0219tergere:",i)}})}loadAllLitTexts(){return u(this,null,function*(){this.allLitTexts=yield this.litTextsService.getAll()})}loadSectionTexts(){return u(this,null,function*(){let{data:i,error:e}=yield this.sectionTextsService.client.from("section_texts").select("*, text: liturgical_texts(*, texts: text_elements(*)), section_text_elements: section_text_elements(*, text_element: text_elements(*))").eq("prayer_section_id",this.sectionId).order("sequence",{ascending:!0}).order("sequence",{ascending:!0,foreignTable:"liturgical_texts.text_elements"}).order("sequence",{ascending:!0,foreignTable:"section_text_elements"});!e&&i&&(this.sectionTexts=i,this.newStartTime=this.sectionTexts.length>0?this.sectionTexts[this.sectionTexts.length-1].end_time:0)})}saveSection(){return u(this,null,function*(){if(!this.section)return;if(this.uploadedFile){let e=this.uploadedFile.name;try{let t=yield this.supabaseService.uploadFile(this.uploadedFile,e);this.editedAudioUrl=t}catch(t){alert("Eroare la \xEEnc\u0103rcarea fi\u0219ierului: "+t.name+" - "+t.message)}}let i={title:this.editedTitle.trim()||null,subtitle:this.editedSubtitle.trim()||null,audio_url:this.editedAudioUrl.trim(),duration:this.editedDuration||0,image_url:this.editedImageUrl.trim()||null};try{let e=yield this.sectionsService.update(this.section.id,i);e&&(this.section.title=e.title,this.section.subtitle=e.subtitle,this.section.audio_url=e.audio_url,this.section.duration=e.duration,this.section.image_url=e.image_url,alert("Sec\u021Biune salvat\u0103 cu succes!"))}catch(e){console.error("Eroare la salvarea sec\u021Biunii:",e)}})}addLiturgicalTextToSection(){return u(this,null,function*(){if(!this.selectedLitTextId)return;let i=0;this.sectionTexts.length>0&&(i=Math.max(...this.sectionTexts.map(e=>e.sequence)));try{if(this.selectedLitTextId==="new"){let t=yield this.litTextsService.create({title:this.newLiturgicalTextTitle});this.selectedLitTextId=t.id}let e=yield this.sectionTextsService.create({prayer_section_id:this.sectionId,liturgical_text_id:this.selectedLitTextId,sequence:i+1,repetition:this.newRepetitions,start_time:this.newStartTime??null,end_time:this.newEndTime??null});this.newLiturgicalTextTitle="",this.selectedLitTextId="new",this.newStartTime=this.newEndTime,this.newEndTime=null,this.newRepetitions=1,this.sectionTexts.push(e)}catch(e){console.error("Eroare la ad\u0103ugarea textului:",e)}})}deleteSectionText(i,e){return u(this,null,function*(){if(confirm("\u0218terge acest text din sec\u021Biune?"))try{yield this.sectionTextsService.delete(i.id),this.sectionTexts.splice(e,1)}catch(t){console.error("Eroare la \u0219tergere:",t)}})}moveUp(i){return u(this,null,function*(){if(i===0)return;let e=this.sectionTexts[i],t=this.sectionTexts[i-1],n=e.sequence;e.sequence=t.sequence,t.sequence=n;try{yield this.sectionTextsService.update(e.id,{sequence:e.sequence}),yield this.sectionTextsService.update(t.id,{sequence:t.sequence}),this.sectionTexts[i]=t,this.sectionTexts[i-1]=e}catch(s){console.error("Eroare la mutare \xEEn sus:",s)}})}moveDown(i){return u(this,null,function*(){if(i===this.sectionTexts.length-1)return;let e=this.sectionTexts[i],t=this.sectionTexts[i+1],n=e.sequence;e.sequence=t.sequence,t.sequence=n;try{yield this.sectionTextsService.update(e.id,{sequence:e.sequence}),yield this.sectionTextsService.update(t.id,{sequence:t.sequence}),this.sectionTexts[i]=t,this.sectionTexts[i+1]=e}catch(s){console.error("Eroare la mutare \xEEn jos:",s)}})}setEditingSectionText(i){this.editingSectionText=JSON.parse(JSON.stringify(i)),!this.editingSectionText.section_text_elements?.length||this.editingSectionText.section_text_elements?.length!==this.editingSectionText.text?.texts?.length?this.editingSectionText.section_text_elements=this.editingSectionText.text?.texts?.map(e=>({section_text_id:this.editingSectionText.id,text_element_id:e.id,start_time:(e.start_time??0)+(this.editingSectionText?.start_time??0),end_time:(e.end_time??0)+(this.editingSectionText?.start_time??0),sequence:e.sequence,text_element:e})):this.editingSectionText.section_text_elements?.forEach(e=>{e.start_time=(this.editingSectionText?.start_time??0)+e.start_time,e.end_time=(this.editingSectionText?.start_time??0)+e.end_time})}clearEditingSectionText(){this.editingSectionText=null}saveEditedSectionText(){return u(this,null,function*(){if(!this.editingSectionText)return;let i=yield this.sectionTextsService.update(this.editingSectionText.id,{start_time:this.editingSectionText.start_time,end_time:this.editingSectionText.end_time,repetition:this.editingSectionText.repetition,use_custom_times:this.editingSectionText.use_custom_times}),e=this.sectionTexts.find(t=>t.id===this.editingSectionText?.id);if(this.editingSectionText.use_custom_times){let t=this.editingSectionText.section_text_elements?.map(n=>({start_time:n.start_time-(this.editingSectionText?.start_time??0),end_time:n.end_time-(this.editingSectionText?.start_time??0),text_element_id:n.text_element_id,section_text_id:n.section_text_id}))??[];yield this.sectionTextElementsService.bulkUpdate(t),e.section_text_elements=this.editingSectionText.section_text_elements?.map(n=>({start_time:n.start_time-(this.editingSectionText?.start_time??0),end_time:n.end_time-(this.editingSectionText?.start_time??0),text_element_id:n.text_element_id,section_text_id:n.section_text_id,text_element:n.text_element}))??[]}e.repetition=i.repetition,e.start_time=i.start_time,e.end_time=i.end_time,e.use_custom_times=i.use_custom_times,this.editingSectionText=null})}goBack(){window.history.back()}onFileSelected(i){let t=i.target?.files?.[0];t?(this.uploadedFile=t,this.editedAudioUrl=t.name):this.uploadedFile=null}onLitTextSelected(i){let e=i.target;this.selectedLitTextId=e.value;let t=this.allLitTexts.find(n=>n.id===this.selectedLitTextId);this.newEndTime=(this.newStartTime??0)+(t?.audio_time??0)}static \u0275fac=function(e){return new(e||r)(A(Ie),A(_e),A(Pt),A(Os),A(Nt),A(Ps),A(J))};static \u0275cmp=X({type:r,selectors:[["app-section-detail"]],decls:46,vars:9,consts:[[4,"ngIf"],[3,"align"],[2,"display","flex","justify-content","left"],[1,"sections-texts",2,"margin-top","20px","padding-left","0"],["style","padding: 8px; display: flex; justify-content: center; align-items: left; flex-direction:column;",4,"ngFor","ngForOf"],[2,"border-collapse","collapse"],["for","litTextSelect"],["id","litTextSelect",3,"ngModelChange","change","ngModel"],["value",""],["value","new","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","startTime"],["id","startTime","type","text","placeholder","Ex: 0","timeInput","",3,"ngModelChange","ngModel"],["for","endTime"],["id","endTime","type","text","placeholder","Ex: 20","timeInput","",3,"ngModelChange","ngModel"],["for","repetitions"],["id","repetitions","type","number","placeholder","Ex: 1",3,"ngModelChange","ngModel"],[2,"width","100px","margin","10px auto",3,"click"],[1,"fa","fa-plus"],[3,"click"],["title","\xCEnapoi",1,"material-icons",2,"font-size","16px"],["title","\u0218terge",1,"material-icons",2,"font-size","16px"],[2,"display","flex","justify-content","space-between"],[1,"section-edit-fields",2,"border-collapse","collapse"],[3,"ngModelChange","ngModel"],["type","file",3,"change"],["type","text","timeInput","",3,"ngModelChange","ngModel"],["colspan","2",2,"text-align","left"],[1,"fa","fa-save"],["controls","",4,"ngIf"],["alt","Section Image","style","margin-left: 20px; max-width: 200px; max-height: 200px;",3,"src",4,"ngIf"],["controls",""],["type","audio/mpeg",3,"src"],["alt","Section Image",2,"margin-left","20px","max-width","200px","max-height","200px",3,"src"],[2,"padding","8px","display","flex","justify-content","center","align-items","left","flex-direction","column"],[2,"display","flex","justify-content","space-between","width","fit-content","gap","2rem"],[2,"display","flex"],[2,"display","flex","justify-content","center","align-items","center"],[3,"routerLink"],[2,"margin-left","10px"],["style","margin-left: 10px;",4,"ngIf"],["type","number",2,"width","60px",3,"ngModelChange","ngModel"],["id","startTime","type","text","timeInput","",2,"width","60px",3,"ngModelChange","ngModel"],["id","endTime","type","text","timeInput","",2,"width","60px",3,"ngModelChange","ngModel"],[2,"align-content","center","margin-left","10px"],["type","checkbox","id","customTimesInput",3,"ngModelChange","ngModel"],["for","customTimesInput"],["title","Mut\u0103 \xEEn sus",3,"click","disabled"],["title","Mut\u0103 \xEEn jos",3,"click","disabled"],["title","\u0218terge",1,"material-icons",2,"font-size","12px"],["title","Editeaz\u0103",1,"material-icons",2,"font-size","12px"],["title","Salveaza",1,"material-icons",2,"font-size","12px"],["title","Renun\u021B\u0103",1,"material-icons",2,"font-size","12px"],["style","width: 800px;",4,"ngIf"],[2,"width","800px"],[4,"ngFor","ngForOf"],[2,"width","fit-content","display","inline-block"],["type","text","timeInput","",2,"width","60px",3,"ngModelChange","ngModel"],[3,"value"],["for","newTextTitle"],["id","newTextTitle","type","text","placeholder","Ex: N\u0103sc\u0103toare de Dumnezeu",3,"ngModelChange","ngModel"]],template:function(e,t){e&1&&(F(0,pg,51,9,"div",0),ie(1,"hr"),h(2,"div")(3,"h3",1),_(4,"Texte \xEEn sec\u021Biune"),m(),h(5,"div",2)(6,"ol",3),F(7,Mg,9,5,"li",4),m()()(),ie(8,"hr"),h(9,"div")(10,"h3"),_(11,"Ad\u0103uga\u021Bi un text nou \xEEn sec\u021Biune"),m(),h(12,"table",5)(13,"tr")(14,"td")(15,"label",6),_(16,"Selecta\u021Bi un text liturgic:"),m()(),h(17,"td")(18,"select",7),N("ngModelChange",function(s){return P(t.selectedLitTextId,s)||(t.selectedLitTextId=s),s}),T("change",function(s){return t.onLitTextSelected(s)}),h(19,"option",8),_(20,"-- Alege\u021Bi --"),m(),h(21,"option",9),_(22,"-- Text nou --"),m(),F(23,Ig,3,5,"option",10),m()()(),F(24,kg,6,1,"tr",0),h(25,"tr")(26,"td")(27,"label",11),_(28,"Timp \xEEnceput:"),m()(),h(29,"td")(30,"input",12),N("ngModelChange",function(s){return P(t.newStartTime,s)||(t.newStartTime=s),s}),m()()(),h(31,"tr")(32,"td")(33,"label",13),_(34,"Timp sf\xE2r\u0219it:"),m()(),h(35,"td")(36,"input",14),N("ngModelChange",function(s){return P(t.newEndTime,s)||(t.newEndTime=s),s}),m()()(),h(37,"tr")(38,"td")(39,"label",15),_(40,"Repet\u0103ri:"),m()(),h(41,"td")(42,"input",16),N("ngModelChange",function(s){return P(t.newRepetitions,s)||(t.newRepetitions=s),s}),m()()()(),h(43,"button",17),T("click",function(){return t.addLiturgicalTextToSection()}),ie(44,"i",18),_(45," Ad\u0103uga\u021Bi "),m()()),e&2&&(C("ngIf",t.section),v(3),C("align","left"),v(4),C("ngForOf",t.sectionTexts),v(11),O("ngModel",t.selectedLitTextId),v(5),C("ngForOf",t.allLitTexts),v(),C("ngIf",t.selectedLitTextId==="new"),v(6),O("ngModel",t.newStartTime),v(6),O("ngModel",t.newEndTime),v(6),O("ngModel",t.newRepetitions))},dependencies:[oe,xe,je,me,vs,ys,ce,tn,wa,ji,fe,de,$e,$i,Bi,mu,nn],styles:[".section_edit_fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:10px;gap:1rem}"]})};var pu=[{path:"",redirectTo:"prayers",pathMatch:"full"},{path:"prayers",component:xs,canActivate:[Je]},{path:"prayers/:id",component:Ts,canActivate:[Je]},{path:"prayerTypes",component:Ms,canActivate:[Je]},{path:"liturgicalTexts",component:As,canActivate:[Je]},{path:"liturgicalTexts/:id/:sectionStartTime",component:rn,canActivate:[Je]},{path:"liturgicalTexts/:id",component:rn,canActivate:[Je]},{path:"sections",component:Ds,canActivate:[Je]},{path:"sections/:id",component:Ns,canActivate:[Je]},{path:"login",component:Is}];var p=function(r){return r.SEPARATOR="separator",r.PERCENT="percent",r.IP="IP",r.CPF_CNPJ="CPF_CNPJ",r.MONTH="M",r.MONTHS="M0",r.MINUTE="m",r.HOUR="h",r.HOURS="H",r.MINUTES="m0",r.HOURS_HOUR="Hh",r.SECONDS="s0",r.HOURS_MINUTES_SECONDS="Hh:m0:s0",r.EMAIL_MASK="A*@A*.A*",r.HOURS_MINUTES="Hh:m0",r.MINUTES_SECONDS="m0:s0",r.DAYS_MONTHS_YEARS="d0/M0/0000",r.DAYS_MONTHS="d0/M0",r.DAYS="d0",r.DAY="d",r.SECOND="s",r.LETTER_S="S",r.DOT=".",r.COMMA=",",r.CURLY_BRACKETS_LEFT="{",r.CURLY_BRACKETS_RIGHT="}",r.MINUS="-",r.OR="||",r.HASH="#",r.EMPTY_STRING="",r.SYMBOL_STAR="*",r.SYMBOL_QUESTION="?",r.SLASH="/",r.WHITE_SPACE=" ",r.NUMBER_ZERO="0",r.NUMBER_NINE="9",r.BACKSPACE="Backspace",r.DELETE="Delete",r.ARROW_LEFT="ArrowLeft",r.ARROW_UP="ArrowUp",r.DOUBLE_ZERO="00",r}(p||{}),Na=new z("ngx-mask config"),gu=new z("new ngx-mask config"),_u=new z("initial ngx-mask config"),Ag={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showMaskTyped:!1,instantPrefix:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:!1,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:r=>r,outputTransformFn:r=>r,maskFilled:new be,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},rw=[p.HOURS_MINUTES_SECONDS,p.HOURS_MINUTES,p.MINUTES_SECONDS],nw=[p.PERCENT,p.HOURS_HOUR,p.SECONDS,p.MINUTES,p.SEPARATOR,p.DAYS_MONTHS_YEARS,p.DAYS_MONTHS,p.DAYS,p.MONTHS],Dg=(()=>{class r{_config=M(Na);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;instantPrefix=this._config.instantPrefix;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMask(e,t,n=0,s=!1,o=!1,l=()=>{}){if(!t||typeof e!="string")return p.EMPTY_STRING;let a=0,c="",d=!1,g=!1,b=1,x=!1,f=e,w=n;f.slice(0,this.prefix.length)===this.prefix&&(f=f.slice(this.prefix.length,f.length)),this.suffix&&f.length>0&&(f=this.checkAndRemoveSuffix(f)),f==="("&&this.prefix&&(f="");let R=f.toString().split(p.EMPTY_STRING);if(this.allowNegativeNumbers&&f.slice(a,a+1)===p.MINUS&&(c+=f.slice(a,a+1)),t===p.IP){let W=f.split(p.DOT);this.ipError=this._validIP(W),t="099.099.099.099"}let K=[];for(let W=0;W<f.length;W++)f[W]?.match("\\d")&&K.push(f[W]??p.EMPTY_STRING);if(t===p.CPF_CNPJ&&(this.cpfCnpjError=K.length!==11&&K.length!==14,K.length>11?t="00.000.000/0000-00":t="000.000.000-00"),t.startsWith(p.PERCENT)){if(f.match("[a-z]|[A-Z]")||f.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!o){f=this._stripToDecimal(f);let lt=this.getPrecision(t);f=this.checkInputPrecision(f,lt,this.decimalMarker)}let W=typeof this.decimalMarker=="string"?this.decimalMarker:p.DOT;if(f.indexOf(W)>0&&!this.percentage(f.substring(0,f.indexOf(W)))){let lt=f.substring(0,f.indexOf(W)-1);this.allowNegativeNumbers&&f.slice(a,a+1)===p.MINUS&&!o&&(lt=f.substring(0,f.indexOf(W))),f=`${lt}${f.substring(f.indexOf(W),f.length)}`}let L="";this.allowNegativeNumbers&&f.slice(a,a+1)===p.MINUS?L=`${p.MINUS}${f.slice(a+1,a+f.length)}`:L=f,this.percentage(L)?c=this._splitPercentZero(f):c=this._splitPercentZero(f.substring(0,f.length-1))}else if(t.startsWith(p.SEPARATOR)){(f.match("[w\u0430-\u044F\u0410-\u042F]")||f.match("[\u0401\u0451\u0410-\u044F]")||f.match("[a-z]|[A-Z]")||f.match(/[-@#!$%\\^&*()_'+|~=`{}\]:";<>.?/]/)||f.match("[^A-Za-z0-9,]"))&&(f=this._stripToDecimal(f));let W=this.getPrecision(t),L=this.decimalMarker;if(Array.isArray(this.decimalMarker)&&(this.actualValue.includes(this.decimalMarker[0])||this.actualValue.includes(this.decimalMarker[1])?L=this.actualValue.includes(this.decimalMarker[0])?this.decimalMarker[0]:this.decimalMarker[1]:L=this.decimalMarker.find(Q=>Q!==this.thousandSeparator)),o){let{decimalMarkerIndex:Q,nonZeroIndex:ae}=this._findFirstNonZeroAndDecimalIndex(f,L),ct=f[0]===p.MINUS,on=f[0]===p.NUMBER_ZERO,an=f[0]===L,zi=f[1]===L;(an&&!ae||ct&&zi&&!ae||on&&!Q&&!ae)&&(f=p.NUMBER_ZERO),Q&&ae&&ct&&w===1&&(Q<ae||Q>ae)&&(f=p.MINUS+f.slice(ae)),!Q&&ae&&f.length>ae&&(f=ct?p.MINUS+f.slice(ae):f.slice(ae)),Q&&ae&&w===0&&(Q<ae&&(f=f.slice(Q-1)),Q>ae&&(f=f.slice(ae)))}W===0?f=this.allowNegativeNumbers?f.length>2&&f[0]===p.MINUS&&f[1]===p.NUMBER_ZERO&&f[2]!==this.thousandSeparator&&f[2]!==p.COMMA&&f[2]!==p.DOT?"-"+f.slice(2,f.length):f[0]===p.NUMBER_ZERO&&f.length>1&&f[1]!==this.thousandSeparator&&f[1]!==p.COMMA&&f[1]!==p.DOT?f.slice(1,f.length):f:f.length>1&&f[0]===p.NUMBER_ZERO&&f[1]!==this.thousandSeparator&&f[1]!==p.COMMA&&f[1]!==p.DOT?f.slice(1,f.length):f:(f[0]===L&&f.length>1&&!o&&(f=p.NUMBER_ZERO+f.slice(0,f.length+1),this.plusOnePosition=!0),f[0]===p.NUMBER_ZERO&&f[1]!==L&&f[1]!==this.thousandSeparator&&!o&&(f=f.length>1?f.slice(0,1)+L+f.slice(1,f.length+1):f,this.plusOnePosition=!0),this.allowNegativeNumbers&&!o&&f[0]===p.MINUS&&(f[1]===L||f[1]===p.NUMBER_ZERO)&&(f=f[1]===L&&f.length>2?f.slice(0,1)+p.NUMBER_ZERO+f.slice(1,f.length):f[1]===p.NUMBER_ZERO&&f.length>2&&f[2]!==L?f.slice(0,2)+L+f.slice(2,f.length):f,this.plusOnePosition=!0));let lt=this._charToRegExpExpression(this.thousandSeparator),De='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(lt,"");if(Array.isArray(this.decimalMarker))for(let Q of this.decimalMarker)De=De.replace(this._charToRegExpExpression(Q),p.EMPTY_STRING);else De=De.replace(this._charToRegExpExpression(this.decimalMarker),"");let ri=new RegExp("["+De+"]");f.match(ri)&&(f=f.substring(0,f.length-1)),f=this.checkInputPrecision(f,W,this.decimalMarker);let Ft=f.replace(new RegExp(lt,"g"),"");c=this._formatWithSeparators(Ft,this.thousandSeparator,this.decimalMarker,W);let Fs=c.indexOf(p.COMMA)-f.indexOf(p.COMMA),Qe=c.length-f.length,sn=o&&c.length<e.length&&this.separatorLimit;if((c[w-1]===this.thousandSeparator||c[w-this.prefix.length])&&this.prefix&&o)w=w-1;else if(Qe>0&&c[w]!==this.thousandSeparator||sn){g=!0;let Q=0;do this._shift.add(w+Q),Q++;while(Q<Qe)}else c[w-1]===this.thousandSeparator||Qe===-4||Qe===-3||c[w]===this.thousandSeparator?(this._shift.clear(),this._shift.add(w-1)):Fs!==0&&w>0&&!(c.indexOf(p.COMMA)>=w&&w>3)||!(c.indexOf(p.DOT)>=w&&w>3)&&Qe<=0?(this._shift.clear(),g=!0,b=Qe,w+=Qe,this._shift.add(w)):this._shift.clear()}else for(let W=0,L=R[0];W<R.length&&a!==t.length;W++,L=R[W]??p.EMPTY_STRING){let lt=p.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(L,t[a]??p.EMPTY_STRING)&&t[a+1]===p.SYMBOL_QUESTION)c+=L,a+=2;else if(t[a+1]===p.SYMBOL_STAR&&d&&this._checkSymbolMask(L,t[a+2]??p.EMPTY_STRING))c+=L,a+=3,d=!1;else if(this._checkSymbolMask(L,t[a]??p.EMPTY_STRING)&&t[a+1]===p.SYMBOL_STAR&&!lt)c+=L,d=!0;else if(t[a+1]===p.SYMBOL_QUESTION&&this._checkSymbolMask(L,t[a+2]??p.EMPTY_STRING))c+=L,a+=3;else if(this._checkSymbolMask(L,t[a]??p.EMPTY_STRING)){if(t[a]===p.HOURS&&(this.apm?Number(L)>9:Number(L)>2)){w=this.leadZeroDateTime?w:w+1,a+=1,this._shiftStep(a),W--,this.leadZeroDateTime&&(c+="0");continue}if(t[a]===p.HOUR&&(this.apm?c.length===1&&Number(c)>1||c==="1"&&Number(L)>2||f.slice(a-1,a).length===1&&Number(f.slice(a-1,a))>2||f.slice(a-1,a)==="1"&&Number(L)>2:c==="2"&&Number(L)>3||(c.slice(a-2,a)==="2"||c.slice(a-3,a)==="2"||c.slice(a-4,a)==="2"||c.slice(a-1,a)==="2")&&Number(L)>3&&a>10)){w=w+1,a+=1,W--;continue}if((t[a]===p.MINUTE||t[a]===p.SECOND)&&Number(L)>5){w=this.leadZeroDateTime?w:w+1,a+=1,this._shiftStep(a),W--,this.leadZeroDateTime&&(c+="0");continue}let De=31,ri=f[a],Ft=f[a+1],Fs=f[a+2],Qe=f[a-1],sn=f[a-2],Q=f.slice(a-3,a-1),ae=f.slice(a-1,a+1),ct=f.slice(a,a+2),on=f.slice(a-2,a);if(t[a]===p.DAY){let an=t.slice(0,2)===p.MONTHS,zi=t.slice(0,2)===p.MONTHS&&this.specialCharacters.includes(sn);if(Number(L)>3&&this.leadZeroDateTime||!an&&(Number(ct)>De||Number(ae)>De||this.specialCharacters.includes(Ft))||(zi?Number(ae)>De||!this.specialCharacters.includes(ri)&&this.specialCharacters.includes(Fs)||this.specialCharacters.includes(ri):Number(ct)>De||this.specialCharacters.includes(Ft)&&!o)){w=this.leadZeroDateTime?w:w+1,a+=1,this._shiftStep(a),W--,this.leadZeroDateTime&&(c+="0");continue}}if(t[a]===p.MONTH){let zi=a===0&&(Number(L)>2||Number(ct)>12||this.specialCharacters.includes(Ft)&&!o),bu=t.slice(a+2,a+3),xu=Q.includes(bu)&&t.includes("d0")&&(this.specialCharacters.includes(sn)&&Number(ae)>12&&!this.specialCharacters.includes(ri)||this.specialCharacters.includes(ri)),Su=Number(Q)<=De&&!this.specialCharacters.includes(Q)&&this.specialCharacters.includes(Qe)&&(Number(ct)>12||this.specialCharacters.includes(Ft)),wu=Number(ct)>12&&a===5||this.specialCharacters.includes(Ft)&&a===5,Cu=Number(Q)>De&&!this.specialCharacters.includes(Q)&&!this.specialCharacters.includes(on)&&Number(on)>12&&t.includes("d0"),Tu=Number(Q)<=De&&!this.specialCharacters.includes(Q)&&!this.specialCharacters.includes(Qe)&&Number(ae)>12;if(Number(L)>1&&this.leadZeroDateTime||zi||xu||Tu||Cu||Su||wu&&!this.leadZeroDateTime){w=this.leadZeroDateTime?w:w+1,a+=1,this._shiftStep(a),W--,this.leadZeroDateTime&&(c+="0");continue}}c+=L,a++}else this.specialCharacters.includes(L)&&t[a]===L?(c+=L,a++):this.specialCharacters.indexOf(t[a]??p.EMPTY_STRING)!==-1?(c+=t[a],a++,this._shiftStep(a),W--):t[a]===p.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(a):this.patterns[t[a]??p.EMPTY_STRING]&&this.patterns[t[a]??p.EMPTY_STRING]?.optional?(R[a]&&t!=="099.099.099.099"&&t!=="000.000.000-00"&&t!=="00.000.000/0000-00"&&!t.match(/^9+\.0+$/)&&!this.patterns[t[a]??p.EMPTY_STRING]?.optional&&(c+=R[a]),t.includes(p.NUMBER_NINE+p.SYMBOL_STAR)&&t.includes(p.NUMBER_ZERO+p.SYMBOL_STAR)&&a++,a++,W--):this.maskExpression[a+1]===p.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[a+2]??p.EMPTY_STRING)&&this._findSpecialChar(L)===this.maskExpression[a+2]&&d||this.maskExpression[a+1]===p.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[a+2]??p.EMPTY_STRING)&&this._findSpecialChar(L)===this.maskExpression[a+2]&&d?(a+=3,c+=L):this.showMaskTyped&&this.specialCharacters.indexOf(L)<0&&L!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(x=!0)}c[w-1]&&c.length+1===t.length&&this.specialCharacters.indexOf(t[t.length-1]??p.EMPTY_STRING)!==-1&&(c+=t[t.length-1]);let Te=w+1;for(;this._shift.has(Te);)b++,Te++;let pe=s&&!t.startsWith(p.SEPARATOR)?a:this._shift.has(w)?b:0;x&&pe--,l(pe,g),b<0&&this._shift.clear();let Ee=!1;o&&(Ee=R.every(W=>this.specialCharacters.includes(W)));let Ae=`${this.prefix}${Ee?p.EMPTY_STRING:c}${this.showMaskTyped?"":this.suffix}`;c.length===0&&(Ae=this.instantPrefix?`${this.prefix}${c}`:`${c}`);let xt=f.length===1&&this.specialCharacters.includes(t[0])&&f!==t[0];if(!this._checkSymbolMask(f,t[1])&&xt)return"";if(c.includes(p.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(o&&c===p.MINUS)return"";Ae=`${p.MINUS}${this.prefix}${c.split(p.MINUS).join(p.EMPTY_STRING)}${this.suffix}`}return Ae}_findDropSpecialChar(e){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(t=>t===e):this._findSpecialChar(e)}_findSpecialChar(e){return this.specialCharacters.find(t=>t===e)}_checkSymbolMask(e,t){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[t]?.pattern&&this.patterns[t]?.pattern.test(e))??!1}_formatWithSeparators=(e,t,n,s)=>{let o=[],l="";if(Array.isArray(n)){let b=new RegExp(n.map(x=>"[\\^$.|?*+()".indexOf(x)>=0?`\\${x}`:x).join("|"));o=e.split(b),l=e.match(b)?.[0]??p.EMPTY_STRING}else o=e.split(n),l=n;let a=o.length>1?`${l}${o[1]}`:p.EMPTY_STRING,c=o[0]??p.EMPTY_STRING,d=this.separatorLimit.replace(/\s/g,p.EMPTY_STRING);d&&+d&&(c[0]===p.MINUS?c=`-${c.slice(1,c.length).slice(0,d.length)}`:c=c.slice(0,d.length));let g=/(\d+)(\d{3})/;for(;t&&g.test(c);)c=c.replace(g,"$1"+t+"$2");return typeof s>"u"?c+a:s===0?c:c+a.substring(0,s+1)};percentage=e=>{let t=e.replace(",","."),n=Number(this.allowNegativeNumbers&&e.includes(p.MINUS)?t.slice(1,e.length):t);return!isNaN(n)&&n>=0&&n<=100};getPrecision=e=>{let t=e.split(p.DOT);return t.length>1?Number(t[t.length-1]):1/0};checkAndRemoveSuffix=e=>{for(let t=this.suffix?.length-1;t>=0;t--){let n=this.suffix.substring(t,this.suffix?.length);if(e.includes(n)&&t!==this.suffix?.length-1&&(t-1<0||!e.includes(this.suffix.substring(t-1,this.suffix?.length))))return e.replace(n,p.EMPTY_STRING)}return e};checkInputPrecision=(e,t,n)=>{let s=e,o=n;if(t<1/0){if(Array.isArray(o)){let d=o.find(g=>g!==this.thousandSeparator);o=d||o[0]}let l=new RegExp(this._charToRegExpExpression(o)+`\\d{${t}}.*$`),a=s.match(l),c=(a&&a[0]?.length)??0;if(c-1>t){let d=c-1-t;s=s.substring(0,s.length-d)}t===0&&this._compareOrIncludes(s[s.length-1],o,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s};_stripToDecimal(e){return e.split(p.EMPTY_STRING).filter((t,n)=>{let s=typeof this.decimalMarker=="string"?t===this.decimalMarker:this.decimalMarker.includes(t);return t.match("^-?\\d")||t===this.thousandSeparator||s||t===p.MINUS&&n===0&&this.allowNegativeNumbers}).join(p.EMPTY_STRING)}_charToRegExpExpression(e){return e&&(e===" "?"\\s":"[\\^$.|?*+()".indexOf(e)>=0?`\\${e}`:e)}_shiftStep(e){this._shift.add(e+this.prefix.length||0)}_compareOrIncludes(e,t,n){return Array.isArray(t)?t.filter(s=>s!==n).includes(e):e===t}_validIP(e){return!(e.length===4&&!e.some((t,n)=>e.length!==n+1?t===p.EMPTY_STRING||Number(t)>255:t===p.EMPTY_STRING||Number(t.substring(0,3))>255))}_splitPercentZero(e){if(e===p.MINUS&&this.allowNegativeNumbers)return e;let t=typeof this.decimalMarker=="string"?e.indexOf(this.decimalMarker):e.indexOf(p.DOT),n=this.allowNegativeNumbers&&e.includes(p.MINUS)?"-":"";if(t===-1){let s=parseInt(n?e.slice(1,e.length):e,10);return isNaN(s)?p.EMPTY_STRING:`${n}${s}`}else{let s=parseInt(e.replace("-","").substring(0,t),10),o=e.substring(t+1),l=isNaN(s)?"":s.toString(),a=typeof this.decimalMarker=="string"?this.decimalMarker:p.DOT;return l===p.EMPTY_STRING?p.EMPTY_STRING:`${n}${l}${a}${o}`}}_findFirstNonZeroAndDecimalIndex(e,t){let n=null,s=null;for(let o=0;o<e.length;o++){let l=e[o];if(l===t&&n===null&&(n=o),l&&l>="1"&&l<="9"&&s===null&&(s=o),n!==null&&s!==null)break}return{decimalMarkerIndex:n,nonZeroIndex:s}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),Rg=(()=>{class r extends Dg{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;maskChanged=!1;maskExpressionArray=[];triggerOnMaskChange=!1;previousValue="";currentValue="";writingValue=!1;_emitValue=!1;_start;_end;onChange=e=>{};_elementRef=M(Oe,{optional:!0});document=M(ge);_config=M(Na);_renderer=M(qe,{optional:!0});applyMask(e,t,n=0,s=!1,o=!1,l=()=>{}){if(!t)return e!==this.actualValue?this.actualValue:e;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():p.EMPTY_STRING,this.maskExpression===p.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||p.HASH)),this.maskExpression===p.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||p.HASH)),!e&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let a=e&&typeof this.selStart=="number"?e[this.selStart]??p.EMPTY_STRING:p.EMPTY_STRING,c="",d=n;if((this.hiddenInput||e&&e.indexOf(p.SYMBOL_STAR)>=0)&&!this.writingValue){let f=e&&e.length===1?e.split(p.EMPTY_STRING):this.actualValue.split(p.EMPTY_STRING);o&&(f=f.slice(0,n).concat(f.slice(n+1))),this.showMaskTyped&&(e=this.removeMask(e),f=this.removeMask(f.join("")).split(p.EMPTY_STRING)),typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):e!==p.EMPTY_STRING&&f.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(e.length>f.length?f.splice(this.selStart,0,a):e.length<f.length&&(f.length-e.length===1?o?f.splice(this.selStart-1,1):f.splice(e.length-1,1):f.splice(this.selStart,this.selEnd-this.selStart))):f=[],this.showMaskTyped&&!this.hiddenInput&&(c=this.removeMask(e)),this.actualValue.length?f.length<e.length?c=this.shiftTypedSymbols(f.join(p.EMPTY_STRING)):f.length===e.length?c=f.join(p.EMPTY_STRING):c=e:c=e}if(s&&(this.hiddenInput||!this.hiddenInput)&&(c=e),o&&this.specialCharacters.indexOf(this.maskExpression[d]??p.EMPTY_STRING)!==-1&&this.showMaskTyped&&!this.prefix&&(c=this.currentValue),this.deletedSpecialCharacter&&d&&(this.specialCharacters.includes(this.actualValue.slice(d,d+1))?d=d+1:t.slice(d-1,d+1)!==p.MONTHS&&(d=d-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(c=this.removeMask(c)),this.maskChanged?c=e:c=c&&c.length?c:e,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s&&!this.writingValue){let f=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(f),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let g=super.applyMask(c,t,d,s,o,l);if(this.actualValue=this.getActualValue(g),this.thousandSeparator===p.DOT&&this.decimalMarker===p.DOT&&(this.decimalMarker=p.COMMA),this.maskExpression.startsWith(p.SEPARATOR)&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(f=>!this._compareOrIncludes(f,this.decimalMarker,this.thousandSeparator))),(g||g==="")&&(this.previousValue=this.currentValue,this.currentValue=g,this._emitValue=this.previousValue!==this.currentValue||this.maskChanged||this.writingValue||this.previousValue===this.currentValue&&s),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(g)):this.formControlResult(g)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?`${this.hideInput(g,this.maskExpression)}${this.maskIsShown.slice(g.length)}`:g;let b=g.length,x=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(p.HOURS)){let f=this._numberSkipedSymbols(g);return`${g}${x.slice(b+f)}`}else if(this.maskExpression===p.IP||this.maskExpression===p.CPF_CNPJ)return`${g}${x}`;return`${g}${x.slice(b)}`}_numberSkipedSymbols(e){let t=/(^|\D)(\d\D)/g,n=t.exec(e),s=0;for(;n!=null;)s+=1,n=t.exec(e);return s}applyValueChanges(e,t,n,s=()=>{}){let o=this._elementRef?.nativeElement;o&&(o.value=this.applyMask(o.value,this.maskExpression,e,t,n,s),o!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(e,t){return e.split(p.EMPTY_STRING).map((n,s)=>this.patterns&&this.patterns[t[s]??p.EMPTY_STRING]&&this.patterns[t[s]??p.EMPTY_STRING]?.symbol?this.patterns[t[s]??p.EMPTY_STRING]?.symbol:n).join(p.EMPTY_STRING)}getActualValue(e){let t=e.split(p.EMPTY_STRING).filter((n,s)=>{let o=this.maskExpression[s]??p.EMPTY_STRING;return this._checkSymbolMask(n,o)||this.specialCharacters.includes(o)&&n===o});return t.join(p.EMPTY_STRING)===e?t.join(p.EMPTY_STRING):e}shiftTypedSymbols(e){let t="";return(e&&e.split(p.EMPTY_STRING).map((s,o)=>{if(this.specialCharacters.includes(e[o+1]??p.EMPTY_STRING)&&e[o+1]!==this.maskExpression[o+1])return t=s,e[o+1];if(t.length){let l=t;return t=p.EMPTY_STRING,l}return s})||[]).join(p.EMPTY_STRING)}numberToString(e){return!e&&e!==0||this.maskExpression.startsWith(p.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(p.SEPARATOR)&&this.separatorLimit.length>14&&String(e).length>14?String(e):Number(e).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${p.MINUS}/`,p.MINUS)}showMaskInInput(e){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(e){if(this.maskExpression===p.IP)return this._checkForIp(e);if(this.maskExpression===p.CPF_CNPJ)return this._checkForCpfCnpj(e)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let e=this._elementRef?.nativeElement;e&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==e.value.replace(this.placeHolderCharacter,p.EMPTY_STRING).length&&(this.formElementProperty=["value",p.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([e,t]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,e,t))}checkDropSpecialCharAmount(e){return e.split(p.EMPTY_STRING).filter(n=>this._findDropSpecialChar(n)).length}removeMask(e){return this._removeMask(this._removeSuffix(this._removePrefix(e)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(e){if(e===p.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let t=[];for(let n=0;n<e.length;n++){let s=e[n]??p.EMPTY_STRING;s&&s.match("\\d")&&t.push(s)}return t.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>3&&t.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>6&&t.length<=9?this.placeHolderCharacter:(t.length>9&&t.length<=12,"")}_checkForCpfCnpj(e){let t=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,n=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(e===p.HASH)return t;let s=[];for(let o=0;o<e.length;o++){let l=e[o]??p.EMPTY_STRING;l&&l.match("\\d")&&s.push(l)}return s.length<=3?t.slice(s.length,t.length):s.length>3&&s.length<=6?t.slice(s.length+1,t.length):s.length>6&&s.length<=9?t.slice(s.length+2,t.length):s.length>9&&s.length<11?t.slice(s.length+3,t.length):s.length===11?"":s.length===12?e.length===17?n.slice(16,n.length):n.slice(15,n.length):s.length>12&&s.length<=14?n.slice(s.length+4,n.length):""}_getActiveElement(e=this.document){let t=e?.activeElement?.shadowRoot;return t?.activeElement?this._getActiveElement(t):e.activeElement}formControlResult(e){if(this.writingValue&&!e){this.onChange(this.outputTransformFn(null));return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))),this.writingValue=!1,this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(e)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===e?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))):this.onChange(this.outputTransformFn(this._toNumber(e)))}_toNumber(e){if(!this.isNumberValue||e===p.EMPTY_STRING||this.maskExpression.startsWith(p.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return e;if(String(e).length>14&&this.maskExpression.startsWith(p.SEPARATOR))return String(e);let t=Number(e);if(this.maskExpression.startsWith(p.SEPARATOR)&&Number.isNaN(t)){let n=String(e).replace(",",".");return Number(n)}return Number.isNaN(t)?e:t}_removeMask(e,t){return this.maskExpression.startsWith(p.PERCENT)&&e.includes(p.DOT)?e:e&&e.replace(this._regExpForRemove(t),p.EMPTY_STRING)}_removePrefix(e){return this.prefix?e&&e.replace(this.prefix,p.EMPTY_STRING):e}_removeSuffix(e){return this.suffix?e&&e.replace(this.suffix,p.EMPTY_STRING):e}_retrieveSeparatorValue(e){let t=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(n=>this.dropSpecialCharacters.includes(n)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&e.includes(p.WHITE_SPACE)&&this.maskExpression.includes(p.SYMBOL_STAR)&&(t=t.filter(n=>n!==p.WHITE_SPACE)),this._removeMask(e,t)}_regExpForRemove(e){return new RegExp(e.map(t=>`\\${t}`).join("|"),"gi")}_replaceDecimalMarkerToDot(e){let t=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return e.replace(this._regExpForRemove(t),p.DOT)}_checkSymbols(e){let t=e;if(t===p.EMPTY_STRING)return t;this.maskExpression.startsWith(p.PERCENT)&&this.decimalMarker===p.COMMA&&(t=t.replace(p.COMMA,p.DOT));let n=this._retrieveSeparatorPrecision(this.maskExpression),s=this.specialCharacters.length===0?this._retrieveSeparatorValue(t):this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(t));return this.isNumberValue&&n?t===this.decimalMarker?null:s.length>14?String(s):this._checkPrecision(this.maskExpression,s):s}_checkPatternForSpace(){for(let e in this.patterns)if(this.patterns[e]&&this.patterns[e]?.hasOwnProperty("pattern")){let t=this.patterns[e]?.pattern.toString(),n=this.patterns[e]?.pattern;if(t?.includes(p.WHITE_SPACE)&&n?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(e){let t=e.match(new RegExp("^separator\\.([^d]*)"));return t?Number(t[1]):null}_checkPrecision(e,t){let n=this.getPrecision(e),s=t;return e.indexOf("2")>0||this.leadZero&&Number(n)>0?(this.decimalMarker===p.COMMA&&this.leadZero&&(s=s.replace(",",".")),this.leadZero?Number(s).toFixed(Number(n)):Number(s).toFixed(2)):this.numberToString(s)}_repeatPatternSymbols(e){return e.match(/{[0-9]+}/)&&e.split(p.EMPTY_STRING).reduce((t,n,s)=>{if(this._start=n===p.CURLY_BRACKETS_LEFT?s:this._start,n!==p.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(n)?t+n:t;this._end=s;let o=Number(e.slice(this._start+1,this._end)),l=new Array(o+1).join(e[this._start-1]);if(e.slice(0,this._start).length>1&&e.includes(p.LETTER_S)){let a=e.slice(0,this._start-1);return a.includes(p.CURLY_BRACKETS_LEFT)?t+l:a+t+l}else return t+l},"")||e}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=We(r)))(n||r)}})();static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})();function Og(){let r=M(_u),i=M(gu);return i instanceof Function?S(S({},r),i()):S(S({},r),i)}function Pg(r){return[{provide:gu,useValue:r},{provide:_u,useValue:Ag},{provide:Na,useFactory:Og},Rg]}function vu(r){return Vt(Pg(r))}var Ng="@",Fg=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=M(Qa,{optional:!0});loadingSchedulerFn=M(Lg,{optional:!0});_engine;constructor(e,t,n,s,o){this.doc=e,this.delegate=t,this.zone=n,this.animationType=s,this.moduleImpl=o}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-OC6KUPFZ.js").then(n=>n),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(n=>{throw new te(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,t){let n=this.delegate.createRenderer(e,t);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new Fa(n);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let l=o.createRenderer(e,t);s.use(l),this.scheduler?.notify(11)}).catch(o=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(t){fn()};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),Fa=class{delegate;replay=[];\u0275type=1;constructor(i){this.delegate=i}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,t,n){this.delegate.insertBefore(i,e,t,n)}removeChild(i,e,t){this.delegate.removeChild(i,e,t)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,t,n){this.delegate.setAttribute(i,e,t,n)}removeAttribute(i,e,t){this.delegate.removeAttribute(i,e,t)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,t,n){this.delegate.setStyle(i,e,t,n)}removeStyle(i,e,t){this.delegate.removeStyle(i,e,t)}setProperty(i,e,t){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(i,e,t)),this.delegate.setProperty(i,e,t)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,t){return this.shouldReplay(e)&&this.replay.push(n=>n.listen(i,e,t)),this.delegate.listen(i,e,t)}shouldReplay(i){return this.replay!==null&&i.startsWith(Ng)}},Lg=new z("");function yu(r="animations"){return il("NgAsyncAnimations"),Vt([{provide:mn,useFactory:(i,e,t)=>new Fg(i,e,t,r),deps:[ge,bn,Me]},{provide:qs,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Vg(r){return()=>r.initSession()}Dl(cs,{providers:[Cc(pu),vu(),{provide:Zi,useFactory:Vg,deps:[ot],multi:!0},yu()]});export{Vg as initSessionFactory};
