import{b as bl,c as xl,f as Mu,g as Sl}from"./chunk-X5YLR3NI.js";import{$ as E,$a as w,A as Ga,Aa as fr,Ab as hl,B as lr,Ba as Ye,Bb as Ji,C as Et,Ca as sl,Cb as fl,D as Bs,Da as zt,Db as pl,E as Wa,Ea as ol,Eb as Xi,F as qa,Fa as Zs,Fb as ml,G as Ya,Ga as X,Gb as we,H as cr,Ha as oe,Hb as Ue,I as We,Ia as K,Ib as ae,J as dr,Ja as Qs,Jb as gl,K as Se,Ka as Ke,Kb as _l,L as te,La as Gt,Lb as io,M as et,Ma as D,Mb as vl,N as M,Na as pr,Nb as yl,O as se,Oa as mr,P as Ka,Pa as Zi,Q as z,Qa as Js,R as Hs,Ra as Xs,S as R,Sa as Wt,T as k,Ta as x,U as zs,Ua as hi,V as Za,Va as u,W as Bt,Wa as f,X as Qa,Xa as ie,Y as Wi,Ya as pt,Z as tt,Za as mt,_ as It,_a as G,a as Va,aa as I,ab as y,b as ja,ba as qe,bb as eo,c as Ua,ca as Ja,cb as _,d as Ls,da as ui,db as ne,e as Vs,ea as Xa,eb as _e,f as Ve,fa as el,fb as ve,g as je,ga as he,gb as P,h as Ct,ha as Me,hb as N,i as Ce,ia as Gs,ib as F,j as V,ja as Ws,jb as Te,k as Gi,ka as Pe,kb as al,l as $a,la as tl,lb as Ze,m as Ba,ma as ur,mb as Mt,n as H,na as il,nb as kt,o as li,oa as Ht,ob as to,p as Oe,pa as qs,pb as gr,q as js,qa as qi,qb as fi,r as ar,ra as nl,rb as ll,s as Us,sa as Ys,sb as At,t as Ha,ta as Yi,tb as Qi,u as $t,ua as Ks,ub as Dt,v as ci,va as rl,vb as cl,w as di,wa as Ki,wb as pi,x as za,xa as v,xb as dl,y as $s,ya as A,yb as ul,z as Tt,za as hr,zb as ye}from"./chunk-NLKZISME.js";import{a as C,b as Y,e as ft,g as Eu,h as Iu,i as h}from"./chunk-ODN5LVDJ.js";var Jo=ft(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Zo=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}};Qo.default=Zo});var ea=ft(In=>{"use strict";var Dc=In&&In.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(In,"__esModule",{value:!0});var Kf=Dc((Sl(),Iu(Mu))),Zf=Dc(Jo()),Xo=class{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=Kf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,e){return this.headers=Object.assign({},this.headers),this.headers[i]=e,this}then(i,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let t=this.fetch,r=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>h(this,null,function*(){var o,l,a;let c=null,d=null,g=null,b=s.status,S=s.statusText;if(s.ok){if(this.method!=="HEAD"){let Z=yield s.text();Z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=Z:d=JSON.parse(Z))}let T=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),O=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");T&&O&&O.length>1&&(g=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,b=406,S="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let T=yield s.text();try{c=JSON.parse(T),Array.isArray(c)&&s.status===404&&(d=[],c=null,b=200,S="OK")}catch{s.status===404&&T===""?(b=204,S="No Content"):c={message:T}}if(c&&this.isMaybeSingle&&(!((a=c?.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,b=200,S="OK"),c&&this.shouldThrowOnError)throw new Zf.default(c)}return{error:c,data:d,count:g,status:b,statusText:S}}));return this.shouldThrowOnError||(r=r.catch(s=>{var o,l,a;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(l=s?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=s?.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(i,e)}};In.default=Xo});var ia=ft(Mn=>{"use strict";var Qf=Mn&&Mn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mn,"__esModule",{value:!0});var Jf=Qf(ea()),ta=class extends Jf.default{select(i){let e=!1,t=(i??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){let o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${i}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:e,referencedTable:t=e}={}){let r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${i}`),this}range(i,e,{foreignTable:t,referencedTable:r=t}={}){let s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${i}`),this.url.searchParams.set(o,`${e-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var l;let a=[i?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mn.default=ta});var Hr=ft(kn=>{"use strict";var Xf=kn&&kn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kn,"__esModule",{value:!0});var ep=Xf(ia()),na=class extends ep.default{eq(i,e){return this.url.searchParams.append(i,`eq.${e}`),this}neq(i,e){return this.url.searchParams.append(i,`neq.${e}`),this}gt(i,e){return this.url.searchParams.append(i,`gt.${e}`),this}gte(i,e){return this.url.searchParams.append(i,`gte.${e}`),this}lt(i,e){return this.url.searchParams.append(i,`lt.${e}`),this}lte(i,e){return this.url.searchParams.append(i,`lte.${e}`),this}like(i,e){return this.url.searchParams.append(i,`like.${e}`),this}likeAllOf(i,e){return this.url.searchParams.append(i,`like(all).{${e.join(",")}}`),this}likeAnyOf(i,e){return this.url.searchParams.append(i,`like(any).{${e.join(",")}}`),this}ilike(i,e){return this.url.searchParams.append(i,`ilike.${e}`),this}ilikeAllOf(i,e){return this.url.searchParams.append(i,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(i,e){return this.url.searchParams.append(i,`ilike(any).{${e.join(",")}}`),this}is(i,e){return this.url.searchParams.append(i,`is.${e}`),this}in(i,e){let t=Array.from(new Set(e)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(i,`in.(${t})`),this}contains(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cs.{${e.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(e)}`),this}containedBy(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cd.{${e.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(e)}`),this}rangeGt(i,e){return this.url.searchParams.append(i,`sr.${e}`),this}rangeGte(i,e){return this.url.searchParams.append(i,`nxl.${e}`),this}rangeLt(i,e){return this.url.searchParams.append(i,`sl.${e}`),this}rangeLte(i,e){return this.url.searchParams.append(i,`nxr.${e}`),this}rangeAdjacent(i,e){return this.url.searchParams.append(i,`adj.${e}`),this}overlaps(i,e){return typeof e=="string"?this.url.searchParams.append(i,`ov.${e}`):this.url.searchParams.append(i,`ov.{${e.join(",")}}`),this}textSearch(i,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");let o=t===void 0?"":`(${t})`;return this.url.searchParams.append(i,`${s}fts${o}.${e}`),this}match(i){return Object.entries(i).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(i,e,t){return this.url.searchParams.append(i,`not.${e}.${t}`),this}or(i,{foreignTable:e,referencedTable:t=e}={}){let r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${i})`),this}filter(i,e,t){return this.url.searchParams.append(i,`${e}.${t}`),this}};kn.default=na});var sa=ft(Dn=>{"use strict";var tp=Dn&&Dn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dn,"__esModule",{value:!0});var An=tp(Hr()),ra=class{constructor(i,{headers:e={},schema:t,fetch:r}){this.url=i,this.headers=e,this.schema=t,this.fetch=r}select(i,{head:e=!1,count:t}={}){let r=e?"HEAD":"GET",s=!1,o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),t&&(this.headers.Prefer=`count=${t}`),new An.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:e,defaultToNull:t=!0}={}){let r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),t||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(i)){let o=i.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){let l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new An.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){let o="POST",l=[`resolution=${t?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){let a=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(a.length>0){let c=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new An.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:e}={}){let t="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new An.default({method:t,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){let e="DELETE",t=[];return i&&t.push(`count=${i}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new An.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Dn.default=ra});var Rc=ft(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.version=void 0;zr.version="0.0.0-automated"});var Oc=ft(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.DEFAULT_HEADERS=void 0;var ip=Rc();Gr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ip.version}`}});var Nc=ft(Rn=>{"use strict";var Pc=Rn&&Rn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rn,"__esModule",{value:!0});var np=Pc(sa()),rp=Pc(Hr()),sp=Oc(),oa=class n{constructor(i,{headers:e={},schema:t,fetch:r}={}){this.url=i,this.headers=Object.assign(Object.assign({},sp.DEFAULT_HEADERS),e),this.schemaName=t,this.fetch=r}from(i){let e=new URL(`${this.url}/${i}`);return new np.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,e={},{head:t=!1,get:r=!1,count:s}={}){let o,l=new URL(`${this.url}/rpc/${i}`),a;t||r?(o=t?"HEAD":"GET",Object.entries(e).filter(([d,g])=>g!==void 0).map(([d,g])=>[d,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([d,g])=>{l.searchParams.append(d,g)})):(o="POST",a=e);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new rp.default({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};Rn.default=oa});var Bc=ft(xe=>{"use strict";var Ii=xe&&xe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xe,"__esModule",{value:!0});xe.PostgrestError=xe.PostgrestBuilder=xe.PostgrestTransformBuilder=xe.PostgrestFilterBuilder=xe.PostgrestQueryBuilder=xe.PostgrestClient=void 0;var Fc=Ii(Nc());xe.PostgrestClient=Fc.default;var Lc=Ii(sa());xe.PostgrestQueryBuilder=Lc.default;var Vc=Ii(Hr());xe.PostgrestFilterBuilder=Vc.default;var jc=Ii(ia());xe.PostgrestTransformBuilder=jc.default;var Uc=Ii(ea());xe.PostgrestBuilder=Uc.default;var $c=Ii(Jo());xe.PostgrestError=$c.default;xe.default={PostgrestClient:Fc.default,PostgrestQueryBuilder:Lc.default,PostgrestFilterBuilder:Vc.default,PostgrestTransformBuilder:jc.default,PostgrestBuilder:Uc.default,PostgrestError:$c.default}});var ro=class extends ul{supportsDOMEvents=!0},so=class n extends ro{static makeCurrent(){dl(new n)}onAndCancel(i,e,t){return i.addEventListener(e,t),()=>{i.removeEventListener(e,t)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.remove()}createElement(i,e){return e=e||this.getDefaultDocument(),e.createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return e==="window"?window:e==="document"?i:e==="body"?i.body:null}getBaseHref(i){let e=Au();return e==null?null:Du(e)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return ml(document.cookie,i)}},en=null;function Au(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}function Du(n){return new URL(n,document.baseURI).pathname}var Ru=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),oo=new z(""),Il=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,t){this._zone=t,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,t,r){return this._findPluginFor(t).addEventListener(e,t,r)}getZone(){return this._zone}_findPluginFor(e){let t=this._eventNameToPlugin.get(e);if(t)return t;if(t=this._plugins.find(s=>s.supports(e)),!t)throw new te(5101,!1);return this._eventNameToPlugin.set(e,t),t}static \u0275fac=function(t){return new(t||n)(R(oo),R(Me))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),vr=class{_doc;constructor(i){this._doc=i}manager},_r="ng-app-id";function wl(n){for(let i of n)i.remove()}function Cl(n,i){let e=i.createElement("style");return e.textContent=n,e}function Ou(n,i,e,t){let r=n.head?.querySelectorAll(`style[${_r}="${i}"],link[${_r}="${i}"]`);if(r)for(let s of r)s.removeAttribute(_r),s instanceof HTMLLinkElement?t.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function ao(n,i){let e=i.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Ml=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,t,r,s={}){this.doc=e,this.appId=t,this.nonce=r,this.isServer=io(s),Ou(e,t,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,t){for(let r of e)this.addUsage(r,this.inline,Cl);t?.forEach(r=>this.addUsage(r,this.external,ao))}removeStyles(e,t){for(let r of e)this.removeUsage(r,this.inline);t?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,t,r){let s=t.get(e);s?s.usage++:t.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(e,this.doc)))})}removeUsage(e,t){let r=t.get(e);r&&(r.usage--,r.usage<=0&&(wl(r.elements),t.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])wl(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[t,{elements:r}]of this.inline)r.push(this.addElement(e,Cl(t,this.doc)));for(let[t,{elements:r}]of this.external)r.push(this.addElement(e,ao(t,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,t){return this.nonce&&t.setAttribute("nonce",this.nonce),this.isServer&&t.setAttribute(_r,this.appId),e.appendChild(t)}static \u0275fac=function(t){return new(t||n)(R(ye),R(ur),R(qi,8),R(Ht))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),no={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},uo=/%COMP%/g,kl="%COMP%",Pu=`_nghost-${kl}`,Nu=`_ngcontent-${kl}`,Fu=!0,Lu=new z("",{providedIn:"root",factory:()=>Fu});function Vu(n){return Nu.replace(uo,n)}function ju(n){return Pu.replace(uo,n)}function Al(n,i){return i.map(e=>e.replace(uo,n))}var yr=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,t,r,s,o,l,a,c=null){this.eventManager=e,this.sharedStylesHost=t,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=l,this.ngZone=a,this.nonce=c,this.platformIsServer=io(l),this.defaultRenderer=new tn(e,o,a,this.platformIsServer)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;this.platformIsServer&&t.encapsulation===Yi.ShadowDom&&(t=Y(C({},t),{encapsulation:Yi.Emulated}));let r=this.getOrCreateRenderer(e,t);return r instanceof br?r.applyToHost(e):r instanceof nn&&r.applyStyles(),r}getOrCreateRenderer(e,t){let r=this.rendererByCompId,s=r.get(t.id);if(!s){let o=this.doc,l=this.ngZone,a=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(t.encapsulation){case Yi.Emulated:s=new br(a,c,t,this.appId,d,o,l,g);break;case Yi.ShadowDom:return new lo(a,c,e,t,o,l,this.nonce,g);default:s=new nn(a,c,t,d,o,l,g);break}r.set(t.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(t){return new(t||n)(R(Il),R(Ml),R(ur),R(Lu),R(ye),R(Ht),R(Me),R(qi))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),tn=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(i,e,t,r){this.eventManager=i,this.doc=e,this.ngZone=t,this.platformIsServer=r}destroy(){}destroyNode=null;createElement(i,e){return e?this.doc.createElementNS(no[e]||e,i):this.doc.createElement(i)}createComment(i){return this.doc.createComment(i)}createText(i){return this.doc.createTextNode(i)}appendChild(i,e){(Tl(i)?i.content:i).appendChild(e)}insertBefore(i,e,t){i&&(Tl(i)?i.content:i).insertBefore(e,t)}removeChild(i,e){e.remove()}selectRootElement(i,e){let t=typeof i=="string"?this.doc.querySelector(i):i;if(!t)throw new te(-5104,!1);return e||(t.textContent=""),t}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,t,r){if(r){e=r+":"+e;let s=no[r];s?i.setAttributeNS(s,e,t):i.setAttribute(e,t)}else i.setAttribute(e,t)}removeAttribute(i,e,t){if(t){let r=no[t];r?i.removeAttributeNS(r,e):i.removeAttribute(`${t}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,t,r){r&(Ki.DashCase|Ki.Important)?i.style.setProperty(e,t,r&Ki.Important?"important":""):i.style[e]=t}removeStyle(i,e,t){t&Ki.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,t){i!=null&&(i[e]=t)}setValue(i,e){i.nodeValue=e}listen(i,e,t){if(typeof i=="string"&&(i=pi().getGlobalEventTarget(this.doc,i),!i))throw new Error(`Unsupported event target ${i} for event ${e}`);return this.eventManager.addEventListener(i,e,this.decoratePreventDefault(t))}decoratePreventDefault(i){return e=>{if(e==="__ngUnwrap__")return i;(this.platformIsServer?this.ngZone.runGuarded(()=>i(e)):i(e))===!1&&e.preventDefault()}}};function Tl(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var lo=class extends tn{sharedStylesHost;hostEl;shadowRoot;constructor(i,e,t,r,s,o,l,a){super(i,s,o,a),this.sharedStylesHost=e,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Al(r.id,r.styles);for(let g of c){let b=document.createElement("style");l&&b.setAttribute("nonce",l),b.textContent=g,this.shadowRoot.appendChild(b)}let d=r.getExternalStyles?.();if(d)for(let g of d){let b=ao(g,s);l&&b.setAttribute("nonce",l),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,t){return super.insertBefore(this.nodeOrShadowRoot(i),e,t)}removeChild(i,e){return super.removeChild(null,e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nn=class extends tn{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(i,e,t,r,s,o,l,a){super(i,s,o,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=a?Al(a,t.styles):t.styles,this.styleUrls=t.getExternalStyles?.(a)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},br=class extends nn{contentAttr;hostAttr;constructor(i,e,t,r,s,o,l,a){let c=r+"-"+t.id;super(i,e,t,s,o,l,a,c),this.contentAttr=Vu(c),this.hostAttr=ju(c)}applyToHost(i){this.applyStyles(),this.setAttribute(i,this.hostAttr,"")}createElement(i,e){let t=super.createElement(i,e);return super.setAttribute(t,this.contentAttr,""),t}},Uu=(()=>{class n extends vr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,r){return e.addEventListener(t,r,!1),()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,r){return e.removeEventListener(t,r)}static \u0275fac=function(t){return new(t||n)(R(ye))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),El=["alt","control","meta","shift"],$u={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Hu=(()=>{class n extends vr{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,t,r){let s=n.parseEventName(t),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let t=e.toLowerCase().split("."),r=t.shift();if(t.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(t.pop()),o="",l=t.indexOf("code");if(l>-1&&(t.splice(l,1),o="code."),El.forEach(c=>{let d=t.indexOf(c);d>-1&&(t.splice(d,1),o+=c+".")}),o+=s,t.length!=0||s.length===0)return null;let a={};return a.domEventName=r,a.fullKey=o,a}static matchEventFullKeyCode(e,t){let r=$u[e.key]||e.key,s="";return t.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),El.forEach(o=>{if(o!==r){let l=Bu[o];l(e)&&(s+=o+".")}}),s+=r,s===t)}static eventCallback(e,t,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>t(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(t){return new(t||n)(R(ye))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Dl(n,i){return ll(C({rootComponent:n},zu(i)))}function zu(n){return{appProviders:[...Ku,...n?.providers??[]],platformProviders:Yu}}function Gu(){so.makeCurrent()}function Wu(){return new Gs}function qu(){return tl(document),document}var Yu=[{provide:Ht,useValue:gl},{provide:il,useValue:Gu,multi:!0},{provide:ye,useFactory:qu,deps:[]}];var Ku=[{provide:Qa,useValue:"root"},{provide:Gs,useFactory:Wu,deps:[]},{provide:oo,useClass:Uu,multi:!0,deps:[ye,Me,Ht]},{provide:oo,useClass:Hu,multi:!0,deps:[ye]},yr,Ml,Il,{provide:fr,useExisting:yr},{provide:yl,useClass:Ru,deps:[]},[]];var Rl=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(t){return new(t||n)(R(ye))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U="primary",vn=Symbol("RouteTitle"),go=class{params;constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function bi(n){return new go(n)}function Ju(n,i,e){let t=e.path.split("/");if(t.length>n.length||e.pathMatch==="full"&&(i.hasChildren()||t.length<n.length))return null;let r={};for(let s=0;s<t.length;s++){let o=t[s],l=n[s];if(o[0]===":")r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:n.slice(0,t.length),posParams:r}}function Xu(n,i){if(n.length!==i.length)return!1;for(let e=0;e<n.length;++e)if(!it(n[e],i[e]))return!1;return!0}function it(n,i){let e=n?_o(n):void 0,t=i?_o(i):void 0;if(!e||!t||e.length!=t.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Gl(n[r],i[r]))return!1;return!0}function _o(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Gl(n,i){if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;let e=[...n].sort(),t=[...i].sort();return e.every((r,s)=>t[s]===r)}else return n===i}function Wl(n){return n.length>0?n[n.length-1]:null}function Ot(n){return $a(n)?n:mr(n)?Ce(Promise.resolve(n)):V(n)}var eh={exact:Yl,subset:Kl},ql={exact:th,subset:ih,ignored:()=>!0};function Ol(n,i,e){return eh[e.paths](n.root,i.root,e.matrixParams)&&ql[e.queryParams](n.queryParams,i.queryParams)&&!(e.fragment==="exact"&&n.fragment!==i.fragment)}function th(n,i){return it(n,i)}function Yl(n,i,e){if(!Yt(n.segments,i.segments)||!wr(n.segments,i.segments,e)||n.numberOfChildren!==i.numberOfChildren)return!1;for(let t in i.children)if(!n.children[t]||!Yl(n.children[t],i.children[t],e))return!1;return!0}function ih(n,i){return Object.keys(i).length<=Object.keys(n).length&&Object.keys(i).every(e=>Gl(n[e],i[e]))}function Kl(n,i,e){return Zl(n,i,i.segments,e)}function Zl(n,i,e,t){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Yt(r,e)||i.hasChildren()||!wr(r,e,t))}else if(n.segments.length===e.length){if(!Yt(n.segments,e)||!wr(n.segments,e,t))return!1;for(let r in i.children)if(!n.children[r]||!Kl(n.children[r],i.children[r],t))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Yt(n.segments,r)||!wr(n.segments,r,t)||!n.children[U]?!1:Zl(n.children[U],i,s,t)}}function wr(n,i,e){return i.every((t,r)=>ql[e](n[r].parameters,t.parameters))}var _t=class{root;queryParams;fragment;_queryParamMap;constructor(i=new W([],{}),e={},t=null){this.root=i,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){return sh.serialize(this)}},W=class{segments;children;parent=null;constructor(i,e){this.segments=i,this.children=e,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}},qt=class{path;parameters;_parameterMap;constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap??=bi(this.parameters),this._parameterMap}toString(){return Jl(this)}};function nh(n,i){return Yt(n,i)&&n.every((e,t)=>it(e.parameters,i[t].parameters))}function Yt(n,i){return n.length!==i.length?!1:n.every((e,t)=>e.path===i[t].path)}function rh(n,i){let e=[];return Object.entries(n.children).forEach(([t,r])=>{t===U&&(e=e.concat(i(r,t)))}),Object.entries(n.children).forEach(([t,r])=>{t!==U&&(e=e.concat(i(r,t)))}),e}var yn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:()=>new xi,providedIn:"root"})}return n})(),xi=class{parse(i){let e=new yo(i);return new _t(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){let e=`/${rn(i.root,!0)}`,t=lh(i.queryParams),r=typeof i.fragment=="string"?`#${oh(i.fragment)}`:"";return`${e}${t}${r}`}},sh=new xi;function Cr(n){return n.segments.map(i=>Jl(i)).join("/")}function rn(n,i){if(!n.hasChildren())return Cr(n);if(i){let e=n.children[U]?rn(n.children[U],!1):"",t=[];return Object.entries(n.children).forEach(([r,s])=>{r!==U&&t.push(`${r}:${rn(s,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=rh(n,(t,r)=>r===U?[rn(n.children[U],!1)]:[`${r}:${rn(t,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${Cr(n)}/${e[0]}`:`${Cr(n)}/(${e.join("//")})`}}function Ql(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xr(n){return Ql(n).replace(/%3B/gi,";")}function oh(n){return encodeURI(n)}function vo(n){return Ql(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tr(n){return decodeURIComponent(n)}function Pl(n){return Tr(n.replace(/\+/g,"%20"))}function Jl(n){return`${vo(n.path)}${ah(n.parameters)}`}function ah(n){return Object.entries(n).map(([i,e])=>`;${vo(i)}=${vo(e)}`).join("")}function lh(n){let i=Object.entries(n).map(([e,t])=>Array.isArray(t)?t.map(r=>`${xr(e)}=${xr(r)}`).join("&"):`${xr(e)}=${xr(t)}`).filter(e=>e);return i.length?`?${i.join("&")}`:""}var ch=/^[^\/()?;#]+/;function ho(n){let i=n.match(ch);return i?i[0]:""}var dh=/^[^\/()?;=#]+/;function uh(n){let i=n.match(dh);return i?i[0]:""}var hh=/^[^=?&#]+/;function fh(n){let i=n.match(hh);return i?i[0]:""}var ph=/^[^&#]+/;function mh(n){let i=n.match(ph);return i?i[0]:""}var yo=class{url;remaining;constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new W([],{}):new W([],this.parseChildren())}parseQueryParams(){let i={};if(this.consumeOptional("?"))do this.parseQueryParam(i);while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(t[U]=new W(i,e)),t}parseSegment(){let i=ho(this.remaining);if(i===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(i),new qt(Tr(i),this.parseMatrixParams())}parseMatrixParams(){let i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){let e=uh(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let r=ho(this.remaining);r&&(t=r,this.capture(t))}i[Tr(e)]=Tr(t)}parseQueryParam(i){let e=fh(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let o=mh(this.remaining);o&&(t=o,this.capture(t))}let r=Pl(e),s=Pl(t);if(i.hasOwnProperty(r)){let o=i[r];Array.isArray(o)||(o=[o],i[r]=o),o.push(s)}else i[r]=s}parseParens(i){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=ho(this.remaining),r=this.remaining[t.length];if(r!=="/"&&r!==")"&&r!==";")throw new te(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):i&&(s=U);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[U]:new W([],o),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return this.peekStartsWith(i)?(this.remaining=this.remaining.substring(i.length),!0):!1}capture(i){if(!this.consumeOptional(i))throw new te(4011,!1)}};function Xl(n){return n.segments.length>0?new W([],{[U]:n}):n}function ec(n){let i={};for(let[t,r]of Object.entries(n.children)){let s=ec(r);if(t===U&&s.segments.length===0&&s.hasChildren())for(let[o,l]of Object.entries(s.children))i[o]=l;else(s.segments.length>0||s.hasChildren())&&(i[t]=s)}let e=new W(n.segments,i);return gh(e)}function gh(n){if(n.numberOfChildren===1&&n.children[U]){let i=n.children[U];return new W(n.segments.concat(i.segments),i.children)}return n}function Kt(n){return n instanceof _t}function _h(n,i,e=null,t=null){let r=tc(n);return ic(r,i,e,t)}function tc(n){let i;function e(s){let o={};for(let a of s.children){let c=e(a);o[a.outlet]=c}let l=new W(s.url,o);return s===n&&(i=l),l}let t=e(n.root),r=Xl(t);return i??r}function ic(n,i,e,t){let r=n;for(;r.parent;)r=r.parent;if(i.length===0)return fo(r,r,r,e,t);let s=vh(i);if(s.toRoot())return fo(r,r,new W([],{}),e,t);let o=yh(s,r,n),l=o.processChildren?an(o.segmentGroup,o.index,s.commands):rc(o.segmentGroup,o.index,s.commands);return fo(r,o.segmentGroup,l,e,t)}function Er(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function dn(n){return typeof n=="object"&&n!=null&&n.outlets}function fo(n,i,e,t,r){let s={};t&&Object.entries(t).forEach(([a,c])=>{s[a]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let o;n===i?o=e:o=nc(n,i,e);let l=Xl(ec(o));return new _t(l,s,r)}function nc(n,i,e){let t={};return Object.entries(n.children).forEach(([r,s])=>{s===i?t[r]=e:t[r]=nc(s,i,e)}),new W(n.segments,t)}var Ir=class{isAbsolute;numberOfDoubleDots;commands;constructor(i,e,t){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=t,i&&t.length>0&&Er(t[0]))throw new te(4003,!1);let r=t.find(dn);if(r&&r!==Wl(t))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vh(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ir(!0,0,n);let i=0,e=!1,t=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([a,c])=>{l[a]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((l,a)=>{a==0&&l==="."||(a==0&&l===""?e=!0:l===".."?i++:l!=""&&r.push(l))}),r):[...r,s]},[]);return new Ir(e,i,t)}var _i=class{segmentGroup;processChildren;index;constructor(i,e,t){this.segmentGroup=i,this.processChildren=e,this.index=t}};function yh(n,i,e){if(n.isAbsolute)return new _i(i,!0,0);if(!e)return new _i(i,!1,NaN);if(e.parent===null)return new _i(e,!0,0);let t=Er(n.commands[0])?0:1,r=e.segments.length-1+t;return bh(e,r,n.numberOfDoubleDots)}function bh(n,i,e){let t=n,r=i,s=e;for(;s>r;){if(s-=r,t=t.parent,!t)throw new te(4005,!1);r=t.segments.length}return new _i(t,!1,r-s)}function xh(n){return dn(n[0])?n[0].outlets:{[U]:n}}function rc(n,i,e){if(n??=new W([],{}),n.segments.length===0&&n.hasChildren())return an(n,i,e);let t=Sh(n,i,e),r=e.slice(t.commandIndex);if(t.match&&t.pathIndex<n.segments.length){let s=new W(n.segments.slice(0,t.pathIndex),{});return s.children[U]=new W(n.segments.slice(t.pathIndex),n.children),an(s,0,r)}else return t.match&&r.length===0?new W(n.segments,{}):t.match&&!n.hasChildren()?bo(n,i,e):t.match?an(n,0,r):bo(n,i,e)}function an(n,i,e){if(e.length===0)return new W(n.segments,{});{let t=xh(e),r={};if(Object.keys(t).some(s=>s!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let s=an(n.children[U],i,e);return new W(n.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=rc(n.children[s],i,o))}),Object.entries(n.children).forEach(([s,o])=>{t[s]===void 0&&(r[s]=o)}),new W(n.segments,r)}}function Sh(n,i,e){let t=0,r=i,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(t>=e.length)return s;let o=n.segments[r],l=e[t];if(dn(l))break;let a=`${l}`,c=t<e.length-1?e[t+1]:null;if(r>0&&a===void 0)break;if(a&&c&&typeof c=="object"&&c.outlets===void 0){if(!Fl(a,c,o))return s;t+=2}else{if(!Fl(a,{},o))return s;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}function bo(n,i,e){let t=n.segments.slice(0,i),r=0;for(;r<e.length;){let s=e[r];if(dn(s)){let a=wh(s.outlets);return new W(t,a)}if(r===0&&Er(e[0])){let a=n.segments[i];t.push(new qt(a.path,Nl(e[0]))),r++;continue}let o=dn(s)?s.outlets[U]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&Er(l)?(t.push(new qt(o,Nl(l))),r+=2):(t.push(new qt(o,{})),r++)}return new W(t,{})}function wh(n){let i={};return Object.entries(n).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(i[e]=bo(new W([],{}),0,t))}),i}function Nl(n){let i={};return Object.entries(n).forEach(([e,t])=>i[e]=`${t}`),i}function Fl(n,i,e){return n==e.path&&it(i,e.parameters)}var ln="imperative",fe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(fe||{}),$e=class{id;url;constructor(i,e){this.id=i,this.url=e}},Si=class extends $e{type=fe.NavigationStart;navigationTrigger;restoredState;constructor(i,e,t="imperative",r=null){super(i,e),this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nt=class extends $e{urlAfterRedirects;type=fe.NavigationEnd;constructor(i,e,t){super(i,e),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Fe||{}),Mr=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Mr||{}),gt=class extends $e{reason;code;type=fe.NavigationCancel;constructor(i,e,t,r){super(i,e),this.reason=t,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rt=class extends $e{reason;code;type=fe.NavigationSkipped;constructor(i,e,t,r){super(i,e),this.reason=t,this.code=r}},un=class extends $e{error;target;type=fe.NavigationError;constructor(i,e,t,r){super(i,e),this.error=t,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kr=class extends $e{urlAfterRedirects;state;type=fe.RoutesRecognized;constructor(i,e,t,r){super(i,e),this.urlAfterRedirects=t,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xo=class extends $e{urlAfterRedirects;state;type=fe.GuardsCheckStart;constructor(i,e,t,r){super(i,e),this.urlAfterRedirects=t,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},So=class extends $e{urlAfterRedirects;state;shouldActivate;type=fe.GuardsCheckEnd;constructor(i,e,t,r,s){super(i,e),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wo=class extends $e{urlAfterRedirects;state;type=fe.ResolveStart;constructor(i,e,t,r){super(i,e),this.urlAfterRedirects=t,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Co=class extends $e{urlAfterRedirects;state;type=fe.ResolveEnd;constructor(i,e,t,r){super(i,e),this.urlAfterRedirects=t,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},To=class{route;type=fe.RouteConfigLoadStart;constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Eo=class{route;type=fe.RouteConfigLoadEnd;constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Io=class{snapshot;type=fe.ChildActivationStart;constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mo=class{snapshot;type=fe.ChildActivationEnd;constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{snapshot;type=fe.ActivationStart;constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ao=class{snapshot;type=fe.ActivationEnd;constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ar=class{routerEvent;position;anchor;type=fe.Scroll;constructor(i,e,t){this.routerEvent=i,this.position=e,this.anchor=t}toString(){let i=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${i}')`}},hn=class{},wi=class{url;navigationBehaviorOptions;constructor(i,e){this.url=i,this.navigationBehaviorOptions=e}};function Ch(n,i){return n.providers&&!n._injector&&(n._injector=Zs(n.providers,i,`Route: ${n.path}`)),n._injector??i}function Qe(n){return n.outlet||U}function Th(n,i){let e=n.filter(t=>Qe(t)===i);return e.push(...n.filter(t=>Qe(t)!==i)),e}function bn(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let i=n.parent;i;i=i.parent){let e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Do=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return bn(this.route?.snapshot)??this.rootInjector}constructor(i){this.rootInjector=i,this.children=new xn(this.rootInjector)}},xn=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,t){let r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Do(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(t){return new(t||n)(R(Wi))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dr=class{_root;constructor(i){this._root=i}get root(){return this._root.value}parent(i){let e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){let e=Ro(i,this._root);return e?e.children.map(t=>t.value):[]}firstChild(i){let e=Ro(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){let e=Oo(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return Oo(i,this._root).map(e=>e.value)}};function Ro(n,i){if(n===i.value)return i;for(let e of i.children){let t=Ro(n,e);if(t)return t}return null}function Oo(n,i){if(n===i.value)return[i];for(let e of i.children){let t=Oo(n,e);if(t.length)return t.unshift(i),t}return[]}var Ne=class{value;children;constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}};function gi(n){let i={};return n&&n.children.forEach(e=>i[e.value.outlet]=e),i}var Rr=class extends Dr{snapshot;constructor(i,e){super(i),this.snapshot=e,Bo(this,i)}toString(){return this.snapshot.toString()}};function sc(n){let i=Eh(n),e=new je([new qt("",{})]),t=new je({}),r=new je({}),s=new je({}),o=new je(""),l=new ke(e,t,s,o,r,U,n,i.root);return l.snapshot=i.root,new Rr(new Ne(l,[]),i)}function Eh(n){let i={},e={},t={},r="",s=new vi([],i,t,r,e,U,n,null,{});return new Pr("",new Ne(s,[]))}var ke=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(i,e,t,r,s,o,l,a){this.urlSubject=i,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=l,this._futureSnapshot=a,this.title=this.dataSubject?.pipe(H(c=>c[vn]))??V(void 0),this.url=i,this.params=e,this.queryParams=t,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(i=>bi(i))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(i=>bi(i))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Or(n,i,e="emptyOnly"){let t,{routeConfig:r}=n;return i!==null&&(e==="always"||r?.path===""||!i.component&&!i.routeConfig?.loadComponent)?t={params:C(C({},i.params),n.params),data:C(C({},i.data),n.data),resolve:C(C(C(C({},n.data),i.data),r?.data),n._resolvedData)}:t={params:C({},n.params),data:C({},n.data),resolve:C(C({},n.data),n._resolvedData??{})},r&&ac(r)&&(t.resolve[vn]=r.title),t}var vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vn]}constructor(i,e,t,r,s,o,l,a,c){this.url=i,this.params=e,this.queryParams=t,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=a,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){let i=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${i}', path:'${e}')`}},Pr=class extends Dr{url;constructor(i,e){super(e),this.url=i,Bo(this,e)}toString(){return oc(this._root)}};function Bo(n,i){i.value._routerState=n,i.children.forEach(e=>Bo(n,e))}function oc(n){let i=n.children.length>0?` { ${n.children.map(oc).join(", ")} } `:"";return`${n.value}${i}`}function po(n){if(n.snapshot){let i=n.snapshot,e=n._futureSnapshot;n.snapshot=e,it(i.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),i.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),it(i.params,e.params)||n.paramsSubject.next(e.params),Xu(i.url,e.url)||n.urlSubject.next(e.url),it(i.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Po(n,i){let e=it(n.params,i.params)&&nh(n.url,i.url),t=!n.parent!=!i.parent;return e&&!t&&(!n.parent||Po(n.parent,i.parent))}function ac(n){return typeof n.title=="string"||n.title===null}var Ih=new z(""),Ho=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=U;activateEvents=new he;deactivateEvents=new he;attachEvents=new he;detachEvents=new he;routerOutletData=Ws(void 0);parentContexts=k(xn);location=k(sl);changeDetector=k(fi);inputBinder=k(Vr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:r}=e.name;if(t)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,a=new No(e,l,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:a,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=K({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[It]})}return n})(),No=class n{route;childContexts;parent;outletData;__ngOutletInjector(i){return new n(this.route,this.childContexts,i,this.outletData)}constructor(i,e,t,r){this.route=i,this.childContexts=e,this.parent=t,this.outletData=r}get(i,e){return i===ke?this.route:i===xn?this.childContexts:i===Ih?this.outletData:this.parent.get(i,e)}},Vr=new z(""),Ll=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:t}=e,r=li([t.queryParams,t.params,t.data]).pipe(We(([s,o,l],a)=>(l=C(C(C({},s),o),l),a===0?V(l):Promise.resolve(l)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==t||t.component===null){this.unsubscribeFromRouteData(e);return}let o=cl(t.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:l}of o.inputs)e.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Mh(n,i,e){let t=fn(n,i._root,e?e._root:void 0);return new Rr(t,i)}function fn(n,i,e){if(e&&n.shouldReuseRoute(i.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=i.value;let r=kh(n,i,e);return new Ne(t,r)}else{if(n.shouldAttach(i.value)){let s=n.retrieve(i.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=i.value,o.children=i.children.map(l=>fn(n,l)),o}}let t=Ah(i.value),r=i.children.map(s=>fn(n,s));return new Ne(t,r)}}function kh(n,i,e){return i.children.map(t=>{for(let r of e.children)if(n.shouldReuseRoute(t.value,r.value.snapshot))return fn(n,t,r);return fn(n,t)})}function Ah(n){return new ke(new je(n.url),new je(n.params),new je(n.queryParams),new je(n.fragment),new je(n.data),n.outlet,n.component,n)}var pn=class{redirectTo;navigationBehaviorOptions;constructor(i,e){this.redirectTo=i,this.navigationBehaviorOptions=e}},lc="ngNavigationCancelingError";function Nr(n,i){let{redirectTo:e,navigationBehaviorOptions:t}=Kt(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,r=cc(!1,Fe.Redirect);return r.url=e,r.navigationBehaviorOptions=t,r}function cc(n,i){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[lc]=!0,e.cancellationCode=i,e}function Dh(n){return dc(n)&&Kt(n.url)}function dc(n){return!!n&&n[lc]}var Rh=(n,i,e,t)=>H(r=>(new Fo(i,r.targetRouterState,r.currentRouterState,e,t).activate(n),r)),Fo=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(i,e,t,r,s){this.routeReuseStrategy=i,this.futureState=e,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=s}activate(i){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,i),po(this.futureState.root),this.activateChildRoutes(e,t,i)}deactivateChildRoutes(i,e,t){let r=gi(e);i.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],t),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(i,e,t){let r=i.value,s=e?e.value:null;if(r===s)if(r.component){let o=t.getContext(r.outlet);o&&this.deactivateChildRoutes(i,e,o.children)}else this.deactivateChildRoutes(i,e,t);else s&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){let t=e.getContext(i.value.outlet),r=t&&i.value.component?t.children:e,s=gi(i);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(t&&t.outlet){let o=t.outlet.detach(),l=t.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:o,route:i,contexts:l})}}deactivateRouteAndOutlet(i,e){let t=e.getContext(i.value.outlet),r=t&&i.value.component?t.children:e,s=gi(i);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(i,e,t){let r=gi(e);i.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],t),this.forwardEvent(new Ao(s.value.snapshot))}),i.children.length&&this.forwardEvent(new Mo(i.value.snapshot))}activateRoutes(i,e,t){let r=i.value,s=e?e.value:null;if(po(r),r===s)if(r.component){let o=t.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,o.children)}else this.activateChildRoutes(i,e,t);else if(r.component){let o=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),po(l.route.value),this.activateChildRoutes(i,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(i,null,o.children)}else this.activateChildRoutes(i,null,t)}},Fr=class{path;route;constructor(i){this.path=i,this.route=this.path[this.path.length-1]}},yi=class{component;route;constructor(i,e){this.component=i,this.route=e}};function Oh(n,i,e){let t=n._root,r=i?i._root:null;return sn(t,r,e,[t.value])}function Ph(n){let i=n.routeConfig?n.routeConfig.canActivateChild:null;return!i||i.length===0?null:{node:n,guards:i}}function Ti(n,i){let e=Symbol(),t=i.get(n,e);return t===e?typeof n=="function"&&!Ka(n)?n:i.get(n):t}function sn(n,i,e,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=gi(i);return n.children.forEach(o=>{Nh(o,s[o.value.outlet],e,t.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,l])=>cn(l,e.getContext(o),r)),r}function Nh(n,i,e,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=i?i.value:null,l=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let a=Fh(o,s,s.routeConfig.runGuardsAndResolvers);a?r.canActivateChecks.push(new Fr(t)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?sn(n,i,l?l.children:null,t,r):sn(n,i,e,t,r),a&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new yi(l.outlet.component,o))}else o&&cn(i,l,r),r.canActivateChecks.push(new Fr(t)),s.component?sn(n,null,l?l.children:null,t,r):sn(n,null,e,t,r);return r}function Fh(n,i,e){if(typeof e=="function")return e(n,i);switch(e){case"pathParamsChange":return!Yt(n.url,i.url);case"pathParamsOrQueryParamsChange":return!Yt(n.url,i.url)||!it(n.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Po(n,i)||!it(n.queryParams,i.queryParams);case"paramsChange":default:return!Po(n,i)}}function cn(n,i,e){let t=gi(n),r=n.value;Object.entries(t).forEach(([s,o])=>{r.component?i?cn(o,i.children.getContext(s),e):cn(o,null,e):cn(o,i,e)}),r.component?i&&i.outlet&&i.outlet.isActivated?e.canDeactivateChecks.push(new yi(i.outlet.component,r)):e.canDeactivateChecks.push(new yi(null,r)):e.canDeactivateChecks.push(new yi(null,r))}function Sn(n){return typeof n=="function"}function Lh(n){return typeof n=="boolean"}function Vh(n){return n&&Sn(n.canLoad)}function jh(n){return n&&Sn(n.canActivate)}function Uh(n){return n&&Sn(n.canActivateChild)}function $h(n){return n&&Sn(n.canDeactivate)}function Bh(n){return n&&Sn(n.canMatch)}function uc(n){return n instanceof Ba||n?.name==="EmptyError"}var Sr=Symbol("INITIAL_VALUE");function Ci(){return We(n=>li(n.map(i=>i.pipe(Tt(1),cr(Sr)))).pipe(H(i=>{for(let e of i)if(e!==!0){if(e===Sr)return Sr;if(e===!1||Hh(e))return e}return!0}),$t(i=>i!==Sr),Tt(1)))}function Hh(n){return Kt(n)||n instanceof pn}function zh(n,i){return Oe(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?V(Y(C({},e),{guardsResult:!0})):Gh(o,t,r,n).pipe(Oe(l=>l&&Lh(l)?Wh(t,s,n,i):V(l)),H(l=>Y(C({},e),{guardsResult:l})))})}function Gh(n,i,e,t){return Ce(n).pipe(Oe(r=>Qh(r.component,r.route,e,i,t)),Et(r=>r!==!0,!0))}function Wh(n,i,e,t){return Ce(i).pipe(di(r=>ar(Yh(r.route.parent,t),qh(r.route,t),Zh(n,r.path,e),Kh(n,r.route,e))),Et(r=>r!==!0,!0))}function qh(n,i){return n!==null&&i&&i(new ko(n)),V(!0)}function Yh(n,i){return n!==null&&i&&i(new Io(n)),V(!0)}function Kh(n,i,e){let t=i.routeConfig?i.routeConfig.canActivate:null;if(!t||t.length===0)return V(!0);let r=t.map(s=>Us(()=>{let o=bn(i)??e,l=Ti(s,o),a=jh(l)?l.canActivate(i,n):tt(o,()=>l(i,n));return Ot(a).pipe(Et())}));return V(r).pipe(Ci())}function Zh(n,i,e){let t=i[i.length-1],s=i.slice(0,i.length-1).reverse().map(o=>Ph(o)).filter(o=>o!==null).map(o=>Us(()=>{let l=o.guards.map(a=>{let c=bn(o.node)??e,d=Ti(a,c),g=Uh(d)?d.canActivateChild(t,n):tt(c,()=>d(t,n));return Ot(g).pipe(Et())});return V(l).pipe(Ci())}));return V(s).pipe(Ci())}function Qh(n,i,e,t,r){let s=i&&i.routeConfig?i.routeConfig.canDeactivate:null;if(!s||s.length===0)return V(!0);let o=s.map(l=>{let a=bn(i)??r,c=Ti(l,a),d=$h(c)?c.canDeactivate(n,i,e,t):tt(a,()=>c(n,i,e,t));return Ot(d).pipe(Et())});return V(o).pipe(Ci())}function Jh(n,i,e,t){let r=i.canLoad;if(r===void 0||r.length===0)return V(!0);let s=r.map(o=>{let l=Ti(o,n),a=Vh(l)?l.canLoad(i,e):tt(n,()=>l(i,e));return Ot(a)});return V(s).pipe(Ci(),hc(t))}function hc(n){return ja(Se(i=>{if(typeof i!="boolean")throw Nr(n,i)}),H(i=>i===!0))}function Xh(n,i,e,t){let r=i.canMatch;if(!r||r.length===0)return V(!0);let s=r.map(o=>{let l=Ti(o,n),a=Bh(l)?l.canMatch(i,e):tt(n,()=>l(i,e));return Ot(a)});return V(s).pipe(Ci(),hc(t))}var mn=class{segmentGroup;constructor(i){this.segmentGroup=i||null}},gn=class extends Error{urlTree;constructor(i){super(),this.urlTree=i}};function mi(n){return Gi(new mn(n))}function ef(n){return Gi(new te(4e3,!1))}function tf(n){return Gi(cc(!1,Fe.GuardRejected))}var Lo=class{urlSerializer;urlTree;constructor(i,e){this.urlSerializer=i,this.urlTree=e}lineralizeSegments(i,e){let t=[],r=e.root;for(;;){if(t=t.concat(r.segments),r.numberOfChildren===0)return V(t);if(r.numberOfChildren>1||!r.children[U])return ef(`${i.redirectTo}`);r=r.children[U]}}applyRedirectCommands(i,e,t,r,s){if(typeof e!="string"){let l=e,{queryParams:a,fragment:c,routeConfig:d,url:g,outlet:b,params:S,data:p,title:T}=r,O=tt(s,()=>l({params:S,data:p,queryParams:a,fragment:c,routeConfig:d,url:g,outlet:b,title:T}));if(O instanceof _t)throw new gn(O);e=O}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,t);if(e[0]==="/")throw new gn(o);return o}applyRedirectCreateUrlTree(i,e,t,r){let s=this.createSegmentGroup(i,e.root,t,r);return new _t(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){let t={};return Object.entries(i).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);t[r]=e[l]}else t[r]=s}),t}createSegmentGroup(i,e,t,r){let s=this.createSegments(i,e.segments,t,r),o={};return Object.entries(e.children).forEach(([l,a])=>{o[l]=this.createSegmentGroup(i,a,t,r)}),new W(s,o)}createSegments(i,e,t,r){return e.map(s=>s.path[0]===":"?this.findPosParam(i,s,r):this.findOrReturn(s,t))}findPosParam(i,e,t){let r=t[e.path.substring(1)];if(!r)throw new te(4001,!1);return r}findOrReturn(i,e){let t=0;for(let r of e){if(r.path===i.path)return e.splice(t),r;t++}return i}},Vo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nf(n,i,e,t,r){let s=fc(n,i,e);return s.matched?(t=Ch(i,t),Xh(t,i,e,r).pipe(H(o=>o===!0?s:C({},Vo)))):V(s)}function fc(n,i,e){if(i.path==="**")return rf(e);if(i.path==="")return i.pathMatch==="full"&&(n.hasChildren()||e.length>0)?C({},Vo):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(i.matcher||Ju)(e,n,i);if(!r)return C({},Vo);let s={};Object.entries(r.posParams??{}).forEach(([l,a])=>{s[l]=a.path});let o=r.consumed.length>0?C(C({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function rf(n){return{matched:!0,parameters:n.length>0?Wl(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Vl(n,i,e,t){return e.length>0&&af(n,e,t)?{segmentGroup:new W(i,of(t,new W(e,n.children))),slicedSegments:[]}:e.length===0&&lf(n,e,t)?{segmentGroup:new W(n.segments,sf(n,e,t,n.children)),slicedSegments:e}:{segmentGroup:new W(n.segments,n.children),slicedSegments:e}}function sf(n,i,e,t){let r={};for(let s of e)if(jr(n,i,s)&&!t[Qe(s)]){let o=new W([],{});r[Qe(s)]=o}return C(C({},t),r)}function of(n,i){let e={};e[U]=i;for(let t of n)if(t.path===""&&Qe(t)!==U){let r=new W([],{});e[Qe(t)]=r}return e}function af(n,i,e){return e.some(t=>jr(n,i,t)&&Qe(t)!==U)}function lf(n,i,e){return e.some(t=>jr(n,i,t))}function jr(n,i,e){return(n.hasChildren()||i.length>0)&&e.pathMatch==="full"?!1:e.path===""}function cf(n,i,e){return i.length===0&&!n.children[e]}var jo=class{};function df(n,i,e,t,r,s,o="emptyOnly"){return new Uo(n,i,e,t,r,o,s).recognize()}var uf=31,Uo=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(i,e,t,r,s,o,l){this.injector=i,this.configLoader=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=l,this.applyRedirects=new Lo(this.urlSerializer,this.urlTree)}noMatchError(i){return new te(4002,`'${i.segmentGroup}'`)}recognize(){let i=Vl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(i).pipe(H(({children:e,rootSnapshot:t})=>{let r=new Ne(t,e),s=new Pr("",r),o=_h(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(i){let e=new vi([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,i,U,e).pipe(H(t=>({children:t,rootSnapshot:e})),ci(t=>{if(t instanceof gn)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof mn?this.noMatchError(t):t}))}processSegmentGroup(i,e,t,r,s){return t.segments.length===0&&t.hasChildren()?this.processChildren(i,e,t,s):this.processSegment(i,e,t,t.segments,r,!0,s).pipe(H(o=>o instanceof Ne?[o]:[]))}processChildren(i,e,t,r){let s=[];for(let o of Object.keys(t.children))o==="primary"?s.unshift(o):s.push(o);return Ce(s).pipe(di(o=>{let l=t.children[o],a=Th(e,o);return this.processSegmentGroup(i,a,l,o,r)}),qa((o,l)=>(o.push(...l),o)),$s(null),Wa(),Oe(o=>{if(o===null)return mi(t);let l=pc(o);return hf(l),V(l)}))}processSegment(i,e,t,r,s,o,l){return Ce(e).pipe(di(a=>this.processSegmentAgainstRoute(a._injector??i,e,a,t,r,s,o,l).pipe(ci(c=>{if(c instanceof mn)return V(null);throw c}))),Et(a=>!!a),ci(a=>{if(uc(a))return cf(t,r,s)?V(new jo):mi(t);throw a}))}processSegmentAgainstRoute(i,e,t,r,s,o,l,a){return Qe(t)!==o&&(o===U||!jr(r,s,t))?mi(r):t.redirectTo===void 0?this.matchSegmentAgainstRoute(i,r,t,s,o,a):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(i,r,e,t,s,o,a):mi(r)}expandSegmentAgainstRouteUsingRedirect(i,e,t,r,s,o,l){let{matched:a,parameters:c,consumedSegments:d,positionalParamSegments:g,remainingSegments:b}=fc(e,r,s);if(!a)return mi(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uf&&(this.allowRedirects=!1));let S=new vi(s,c,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,jl(r),Qe(r),r.component??r._loadedComponent??null,r,Ul(r)),p=Or(S,l,this.paramsInheritanceStrategy);S.params=Object.freeze(p.params),S.data=Object.freeze(p.data);let T=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,g,S,i);return this.applyRedirects.lineralizeSegments(r,T).pipe(Oe(O=>this.processSegment(i,t,e,O.concat(b),o,!1,l)))}matchSegmentAgainstRoute(i,e,t,r,s,o){let l=nf(e,t,r,i,this.urlSerializer);return t.path==="**"&&(e.children={}),l.pipe(We(a=>a.matched?(i=t._injector??i,this.getChildConfig(i,t,r).pipe(We(({routes:c})=>{let d=t._loadedInjector??i,{parameters:g,consumedSegments:b,remainingSegments:S}=a,p=new vi(b,g,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,jl(t),Qe(t),t.component??t._loadedComponent??null,t,Ul(t)),T=Or(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(T.params),p.data=Object.freeze(T.data);let{segmentGroup:O,slicedSegments:Z}=Vl(e,b,S,c);if(Z.length===0&&O.hasChildren())return this.processChildren(d,c,O,p).pipe(H(ge=>new Ne(p,ge)));if(c.length===0&&Z.length===0)return V(new Ne(p,[]));let Ee=Qe(t)===s;return this.processSegment(d,c,O,Z,Ee?U:s,!0,p).pipe(H(ge=>new Ne(p,ge instanceof Ne?[ge]:[])))}))):mi(e)))}getChildConfig(i,e,t){return e.children?V({routes:e.children,injector:i}):e.loadChildren?e._loadedRoutes!==void 0?V({routes:e._loadedRoutes,injector:e._loadedInjector}):Jh(i,e,t,this.urlSerializer).pipe(Oe(r=>r?this.configLoader.loadChildren(i,e).pipe(Se(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):tf(e))):V({routes:[],injector:i})}};function hf(n){n.sort((i,e)=>i.value.outlet===U?-1:e.value.outlet===U?1:i.value.outlet.localeCompare(e.value.outlet))}function ff(n){let i=n.value.routeConfig;return i&&i.path===""}function pc(n){let i=[],e=new Set;for(let t of n){if(!ff(t)){i.push(t);continue}let r=i.find(s=>t.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...t.children),e.add(r)):i.push(t)}for(let t of e){let r=pc(t.children);i.push(new Ne(t.value,r))}return i.filter(t=>!e.has(t))}function jl(n){return n.data||{}}function Ul(n){return n.resolve||{}}function pf(n,i,e,t,r,s){return Oe(o=>df(n,i,e,t,o.extractedUrl,r,s).pipe(H(({state:l,tree:a})=>Y(C({},o),{targetSnapshot:l,urlAfterRedirects:a}))))}function mf(n,i){return Oe(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return V(e);let s=new Set(r.map(a=>a.route)),o=new Set;for(let a of s)if(!o.has(a))for(let c of mc(a))o.add(c);let l=0;return Ce(o).pipe(di(a=>s.has(a)?gf(a,t,n,i):(a.data=Or(a,a.parent,n).resolve,V(void 0))),Se(()=>l++),Bs(1),Oe(a=>l===o.size?V(e):Ct))})}function mc(n){let i=n.children.map(e=>mc(e)).flat();return[n,...i]}function gf(n,i,e,t){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!ac(r)&&(s[vn]=r.title),_f(s,n,i,t).pipe(H(o=>(n._resolvedData=o,n.data=Or(n,n.parent,e).resolve,null)))}function _f(n,i,e,t){let r=_o(n);if(r.length===0)return V({});let s={};return Ce(r).pipe(Oe(o=>vf(n[o],i,e,t).pipe(Et(),Se(l=>{if(l instanceof pn)throw Nr(new xi,l);s[o]=l}))),Bs(1),Ga(s),ci(o=>uc(o)?Ct:Gi(o)))}function vf(n,i,e,t){let r=bn(i)??t,s=Ti(n,r),o=s.resolve?s.resolve(i,e):tt(r,()=>s(i,e));return Ot(o)}function mo(n){return We(i=>{let e=n(i);return e?Ce(e).pipe(H(()=>i)):V(i)})}var gc=(()=>{class n{buildTitle(e){let t,r=e.root;for(;r!==void 0;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(s=>s.outlet===U);return t}getResolvedTitleForRoute(e){return e.data[vn]}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:()=>k(yf),providedIn:"root"})}return n})(),yf=(()=>{class n extends gc{title;constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static \u0275fac=function(t){return new(t||n)(R(Rl))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wn=new z("",{providedIn:"root",factory:()=>({})}),bf=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=X({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){t&1&&ie(0,"router-outlet")},dependencies:[Ho],encapsulation:2})}return n})();function zo(n){let i=n.children&&n.children.map(zo),e=i?Y(C({},n),{children:i}):C({},n);return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==U&&(e.component=bf),e}var _n=new z(""),Go=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(gr);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return V(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=Ot(e.loadComponent()).pipe(H(_c),Se(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),lr(()=>{this.componentLoaders.delete(e)})),r=new Vs(t,()=>new Ve).pipe(Ls());return this.componentLoaders.set(e,r),r}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return V({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let s=xf(t,this.compiler,e,this.onLoadEndListener).pipe(lr(()=>{this.childrenLoaders.delete(t)})),o=new Vs(s,()=>new Ve).pipe(Ls());return this.childrenLoaders.set(t,o),o}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xf(n,i,e,t){return Ot(n.loadChildren()).pipe(H(_c),Oe(r=>r instanceof ol||Array.isArray(r)?V(r):Ce(i.compileModuleAsync(r))),H(r=>{t&&t(n);let s,o,l=!1;return Array.isArray(r)?(o=r,l=!0):(s=r.create(e).injector,o=s.get(_n,[],{optional:!0,self:!0}).flat()),{routes:o.map(zo),injector:s}}))}function Sf(n){return n&&typeof n=="object"&&"default"in n}function _c(n){return Sf(n)?n.default:n}var Wo=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:()=>k(wf),providedIn:"root"})}return n})(),wf=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vc=new z(""),yc=new z("");function Cf(n,i,e){let t=n.get(yc),r=n.get(ye);return n.get(Me).runOutsideAngular(()=>{if(!r.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),l=r.startViewTransition(()=>(s(),Tf(n))),{onViewTransitionCreated:a}=t;return a&&tt(n,()=>a({transition:l,from:i,to:e})),o})}function Tf(n){return new Promise(i=>{Ys({read:()=>setTimeout(i)},{injector:n})})}var bc=new z(""),qo=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ve;transitionAbortSubject=new Ve;configLoader=k(Go);environmentInjector=k(Wi);urlSerializer=k(yn);rootContexts=k(xn);location=k(Xi);inputBindingEnabled=k(Vr,{optional:!0})!==null;titleStrategy=k(gc);options=k(wn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(Wo);createViewTransition=k(vc,{optional:!0});navigationErrorHandler=k(bc,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>V(void 0);rootComponentType=null;constructor(){let e=r=>this.events.next(new To(r)),t=r=>this.events.next(new Eo(r));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(Y(C(C({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,r){return this.transitions=new je({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ln,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(s=>s.id!==0),H(s=>Y(C({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),We(s=>{let o=!1,l=!1;return V(s).pipe(We(a=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Fe.SupersededByNewNavigation),Ct;this.currentTransition=s,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Y(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&d!=="reload"){let g="";return this.events.next(new Rt(a.id,this.urlSerializer.serialize(a.rawUrl),g,Mr.IgnoredSameUrlNavigation)),a.resolve(!1),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return V(a).pipe(We(g=>{let b=this.transitions?.getValue();return this.events.next(new Si(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),b!==this.transitions?.getValue()?Ct:Promise.resolve(g)}),pf(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Se(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Y(C({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let b=new kr(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(b)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:g,extractedUrl:b,source:S,restoredState:p,extras:T}=a,O=new Si(g,this.urlSerializer.serialize(b),S,p);this.events.next(O);let Z=sc(this.rootComponentType).snapshot;return this.currentTransition=s=Y(C({},a),{targetSnapshot:Z,urlAfterRedirects:b,extras:Y(C({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,V(s)}else{let g="";return this.events.next(new Rt(a.id,this.urlSerializer.serialize(a.extractedUrl),g,Mr.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Ct}}),Se(a=>{let c=new xo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),H(a=>(this.currentTransition=s=Y(C({},a),{guards:Oh(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),s)),zh(this.environmentInjector,a=>this.events.next(a)),Se(a=>{if(s.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Nr(this.urlSerializer,a.guardsResult);let c=new So(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),$t(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Fe.GuardRejected),!1)),mo(a=>{if(a.guards.canActivateChecks.length)return V(a).pipe(Se(c=>{let d=new wo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),We(c=>{let d=!1;return V(c).pipe(mf(this.paramsInheritanceStrategy,this.environmentInjector),Se({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Fe.NoDataFromResolver)}}))}),Se(c=>{let d=new Co(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),mo(a=>{let c=d=>{let g=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(d.routeConfig).pipe(Se(b=>{d.component=b}),H(()=>{})));for(let b of d.children)g.push(...c(b));return g};return li(c(a.targetSnapshot.root)).pipe($s(null),Tt(1))}),mo(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:a,targetSnapshot:c}=s,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?Ce(d).pipe(H(()=>s)):V(s)}),H(a=>{let c=Mh(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=s=Y(C({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),Se(()=>{this.events.next(new hn)}),Rh(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),Tt(1),Se({next:a=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{o=!0}}),dr(this.transitionAbortSubject.pipe(Se(a=>{throw a}))),lr(()=>{!o&&!l&&this.cancelNavigationTransition(s,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ci(a=>{if(l=!0,dc(a))this.events.next(new gt(s.id,this.urlSerializer.serialize(s.extractedUrl),a.message,a.cancellationCode)),Dh(a)?this.events.next(new wi(a.url,a.navigationBehaviorOptions)):s.resolve(!1);else{let c=new un(s.id,this.urlSerializer.serialize(s.extractedUrl),a,s.targetSnapshot??void 0);try{let d=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof pn){let{message:g,cancellationCode:b}=Nr(this.urlSerializer,d);this.events.next(new gt(s.id,this.urlSerializer.serialize(s.extractedUrl),g,b)),this.events.next(new wi(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Ct}))}))}cancelNavigationTransition(e,t,r){let s=new gt(e.id,this.urlSerializer.serialize(e.extractedUrl),t,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==t?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ef(n){return n!==ln}var If=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:()=>k(Mf),providedIn:"root"})}return n})(),$o=class{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}},Mf=(()=>{class n extends $o{static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:()=>k(kf),providedIn:"root"})}return n})(),kf=(()=>{class n extends xc{location=k(Xi);urlSerializer=k(yn);options=k(wn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=k(Wo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _t;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=sc(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof Si)this.stateMemento=this.createStateMemento();else if(e instanceof Rt)this.rawUrlTree=t.initialUrl;else if(e instanceof kr){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(t.targetBrowserUrl??r,t)}}else e instanceof hn?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(t.targetBrowserUrl??this.rawUrlTree,t)):e instanceof gt&&(e.code===Fe.GuardRejected||e.code===Fe.NoDataFromResolver)?this.restoreHistory(t):e instanceof un?this.restoreHistory(t,!0):e instanceof nt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let r=e instanceof _t?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||t.extras.replaceUrl){let s=this.browserPageId,o=C(C({},t.extras.state),this.generateNgRouterState(t.id,s));this.location.replaceState(r,"",o)}else{let s=C(C({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),on=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(on||{});function Sc(n,i){n.events.pipe($t(e=>e instanceof nt||e instanceof gt||e instanceof un||e instanceof Rt),H(e=>e instanceof nt||e instanceof Rt?on.COMPLETE:(e instanceof gt?e.code===Fe.Redirect||e.code===Fe.SupersededByNewNavigation:!1)?on.REDIRECTING:on.FAILED),$t(e=>e!==on.REDIRECTING),Tt(1)).subscribe(()=>{i()})}var Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Df={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},be=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(pr);stateManager=k(xc);options=k(wn,{optional:!0})||{};pendingTasks=k(el);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(qo);urlSerializer=k(yn);location=k(Xi);urlHandlingStrategy=k(Wo);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(If);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(_n,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Vr,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Va;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(t,s),t instanceof gt&&t.code!==Fe.Redirect&&t.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof nt)this.navigated=!0;else if(t instanceof wi){let o=t.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(t.url,r.currentRawUrl),a=C({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ef(r.source)},o);this.scheduleNavigation(l,ln,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Of(t)&&this._events.next(t)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ln,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let a=C({},r);delete a.navigationId,delete a.\u0275routerPageId,Object.keys(a).length!==0&&(s.state=a)}let l=this.parseUrl(e);this.scheduleNavigation(l,t,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(zo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:a}=t,c=a?this.currentUrlTree.fragment:o,d=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":d=C(C({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let g;try{let b=r?r.snapshot:this.routerState.snapshot.root;g=tc(b)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),g=this.currentUrlTree.root}return ic(g,e,d,c??null)}navigateByUrl(e,t={skipLocationChange:!1}){let r=Kt(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ln,null,t)}navigate(e,t={skipLocationChange:!1}){return Rf(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let r;if(t===!0?r=C({},Af):t===!1?r=C({},Df):r=t,Kt(e))return Ol(this.currentUrlTree,e,r);let s=this.parseUrl(e);return Ol(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((t,[r,s])=>(s!=null&&(t[r]=s),t),{})}scheduleNavigation(e,t,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,a,c;o?(l=o.resolve,a=o.reject,c=o.promise):c=new Promise((g,b)=>{l=g,a=b});let d=this.pendingTasks.add();return Sc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:l,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(g=>Promise.reject(g))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rf(n){for(let i=0;i<n.length;i++)if(n[i]==null)throw new te(4008,!1)}function Of(n){return!(n instanceof hn)&&!(n instanceof wi)}var Be=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ve;constructor(e,t,r,s,o,l){this.router=e,this.route=t,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=l;let a=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=a==="a"||a==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof nt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Kt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,t,r,s,o){let l=this.urlTree;if(l===null||this.isAnchorElement&&(e!==0||t||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let a={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,a),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let t=this.href===null?null:rl(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(e,t){let r=this.renderer,s=this.el.nativeElement;t!==null?r.setAttribute(s,e,t):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Kt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(t){return new(t||n)(A(be),A(ke),Ja("tabindex"),A(Ye),A(Pe),A(Ji))};static \u0275dir=K({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){t&1&&w("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),t&2&&Wt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",At],skipLocationChange:[2,"skipLocationChange","skipLocationChange",At],replaceUrl:[2,"replaceUrl","replaceUrl",At],routerLink:"routerLink"},features:[Gt,It]})}return n})();var Lr=class{};var Pf=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,t,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe($t(e=>e instanceof nt),di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){let r=[];for(let s of t){s.providers&&!s._injector&&(s._injector=Zs(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,l=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return Ce(r).pipe(js())}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{let r;t.loadChildren&&t.canLoad===void 0?r=this.loader.loadChildren(e,t):r=V(null);let s=r.pipe(Oe(o=>o===null?V(void 0):(t._loadedRoutes=o.routes,t._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(t.loadComponent&&!t._loadedComponent){let o=this.loader.loadComponent(t);return Ce([s,o]).pipe(js())}else return s})}static \u0275fac=function(t){return new(t||n)(R(be),R(gr),R(Wi),R(Lr),R(Go))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wc=new z(""),Nf=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,t,r,s,o={}){this.urlSerializer=e,this.transitions=t,this.viewportScroller=r,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof nt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Rt&&e.code===Mr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ar&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ar(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,t))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(t){hr()};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Cc(n,...i){return Bt([{provide:_n,multi:!0,useValue:n},[],{provide:ke,useFactory:Tc,deps:[be]},{provide:Js,multi:!0,useFactory:Ec},i.map(e=>e.\u0275providers)])}function Tc(n){return n.routerState.root}function Cn(n,i){return{\u0275kind:n,\u0275providers:i}}function Ec(){let n=k(ui);return i=>{let e=n.get(Xs);if(i!==e.components[0])return;let t=n.get(be),r=n.get(Ic);n.get(Yo)===1&&t.initialNavigation(),n.get(Mc,null,Hs.Optional)?.setUpPreloading(),n.get(wc,null,Hs.Optional)?.init(),t.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ic=new z("",{factory:()=>new Ve}),Yo=new z("",{providedIn:"root",factory:()=>1});function Ff(){return Cn(2,[{provide:Yo,useValue:0},{provide:Zi,multi:!0,deps:[ui],useFactory:i=>{let e=i.get(hl,Promise.resolve());return()=>e.then(()=>new Promise(t=>{let r=i.get(be),s=i.get(Ic);Sc(r,()=>{t(!0)}),i.get(qo).afterPreactivation=()=>(t(!0),s.closed?V(void 0):s),r.initialNavigation()}))}}])}function Lf(){return Cn(3,[{provide:Zi,multi:!0,useFactory:()=>{let i=k(be);return()=>{i.setUpLocationChangeListener()}}},{provide:Yo,useValue:2}])}var Mc=new z("");function Vf(n){return Cn(0,[{provide:Mc,useExisting:Pf},{provide:Lr,useExisting:n}])}function jf(){return Cn(8,[Ll,{provide:Vr,useExisting:Ll}])}function Uf(n){let i=[{provide:vc,useValue:Cf},{provide:yc,useValue:C({skipNextTransition:!!n?.skipInitialTransition},n)}];return Cn(9,i)}var $l=new z("ROUTER_FORROOT_GUARD"),$f=[Xi,{provide:yn,useClass:xi},be,xn,{provide:ke,useFactory:Tc,deps:[be]},Go,[]],kc=(()=>{class n{constructor(e){}static forRoot(e,t){return{ngModule:n,providers:[$f,[],{provide:_n,multi:!0,useValue:e},{provide:$l,useFactory:Gf,deps:[[be,new zs,new Za]]},t?.errorHandler?{provide:bc,useValue:t.errorHandler}:[],{provide:wn,useValue:t||{}},t?.useHash?Hf():zf(),Bf(),t?.preloadingStrategy?Vf(t.preloadingStrategy).\u0275providers:[],t?.initialNavigation?Wf(t):[],t?.bindToComponentInputs?jf().\u0275providers:[],t?.enableViewTransitions?Uf().\u0275providers:[],qf()]}}static forChild(e){return{ngModule:n,providers:[{provide:_n,multi:!0,useValue:e}]}}static \u0275fac=function(t){return new(t||n)(R($l,8))};static \u0275mod=oe({type:n});static \u0275inj=se({})}return n})();function Bf(){return{provide:wc,useFactory:()=>{let n=k(vl),i=k(Me),e=k(wn),t=k(qo),r=k(yn);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Nf(r,t,n,i,e)}}}function Hf(){return{provide:Ji,useClass:pl}}function zf(){return{provide:Ji,useClass:fl}}function Gf(n){return"guarded"}function Wf(n){return[n.initialNavigation==="disabled"?Lf().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Ff().\u0275providers:[]]}var Bl=new z("");function qf(){return[{provide:Bl,useFactory:Ec},{provide:Js,multi:!0,useExisting:Bl}]}var Ac=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)};var Tn=class extends Error{constructor(i,e="FunctionsError",t){super(i),this.name=e,this.context=t}},Ur=class extends Tn{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}},$r=class extends Tn{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}},Br=class extends Tn{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}},Ko=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Ko||{});var Yf=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},En=class{constructor(i,{headers:e={},customFetch:t,region:r=Ko.Any}={}){this.url=i,this.headers=e,this.region=r,this.fetch=Ac(t)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i,e={}){var t;return Yf(this,void 0,void 0,function*(){try{let{headers:r,method:s,body:o}=e,l={},{region:a}=e;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));let d=yield this.fetch(`${this.url}/${i}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:c}).catch(p=>{throw new Ur(p)}),g=d.headers.get("x-relay-error");if(g&&g==="true")throw new $r(d);if(!d.ok)throw new Br(d);let b=((t=d.headers.get("Content-Type"))!==null&&t!==void 0?t:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield d.json():b==="application/octet-stream"?S=yield d.blob():b==="text/event-stream"?S=d:b==="multipart/form-data"?S=yield d.formData():S=yield d.text(),{data:S,error:null}}catch(r){return{data:null,error:r}}})}};var Hc=Eu(Bc(),1),{PostgrestClient:zc,PostgrestQueryBuilder:mv,PostgrestFilterBuilder:gv,PostgrestTransformBuilder:_v,PostgrestBuilder:vv,PostgrestError:yv}=Hc.default;var Gc="2.11.2";var Wc={"X-Client-Info":`realtime-js/${Gc}`},qc="1.0.0",Wr=1e4,Yc=1e3,Mi=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Mi||{}),Le=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Le||{}),He=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(He||{}),aa=function(n){return n.websocket="websocket",n}(aa||{}),Zt=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Zt||{});var qr=class{constructor(){this.HEADER_LENGTH=1}decode(i,e){return i.constructor===ArrayBuffer?e(this._binaryDecode(i)):e(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){let e=new DataView(i),t=new TextDecoder;return this._decodeBroadcast(i,e,t)}_decodeBroadcast(i,e,t){let r=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,l=t.decode(i.slice(o,o+r));o=o+r;let a=t.decode(i.slice(o,o+s));o=o+s;let c=JSON.parse(t.decode(i.slice(o,i.byteLength)));return{ref:null,topic:l,event:a,payload:c}}};var ki=class{constructor(i,e){this.callback=i,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ee=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(ee||{}),ca=(n,i,e={})=>{var t;let r=(t=e.skipTypes)!==null&&t!==void 0?t:[];return Object.keys(i).reduce((s,o)=>(s[o]=op(o,n,i,r),s),{})},op=(n,i,e,t)=>{let r=i.find(l=>l.name===n),s=r?.type,o=e[n];return s&&!t.includes(s)?Kc(s,o):la(o)},Kc=(n,i)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return dp(i,e)}switch(n){case ee.bool:return ap(i);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return lp(i);case ee.json:case ee.jsonb:return cp(i);case ee.timestamp:return up(i);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return la(i);default:return la(i)}},la=n=>n,ap=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},lp=n=>{if(typeof n=="string"){let i=parseFloat(n);if(!Number.isNaN(i))return i}return n},cp=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(i){return console.log(`JSON parse error: ${i}`),n}return n},dp=(n,i)=>{if(typeof n!="string")return n;let e=n.length-1,t=n[e];if(n[0]==="{"&&t==="}"){let s,o=n.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>Kc(i,l))}return n},up=n=>typeof n=="string"?n.replace(" ","T"):n,Yr=n=>{let i=n;return i=i.replace(/^ws/i,"http"),i=i.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),i.replace(/\/+$/,"")};var Ai=class{constructor(i,e,t={},r=Wr){this.channel=i,this.event=e,this.payload=t,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,e){var t;return this._hasReceived(i)&&e((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:i,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let i=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:e}){this.recHooks.filter(t=>t.status===i).forEach(t=>t.callback(e))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}};var On=class n{constructor(i,e){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let t=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},r=>{let{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,r,s,o),this.pendingDiffs.forEach(a=>{this.state=n.syncDiff(this.state,a,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(t.diff,{},r=>{let{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=n.syncDiff(this.state,r,s,o),l())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,e,t,r){let s=this.cloneDeep(i),o=this.transformState(e),l={},a={};return this.map(s,(c,d)=>{o[c]||(a[c]=d)}),this.map(o,(c,d)=>{let g=s[c];if(g){let b=d.map(O=>O.presence_ref),S=g.map(O=>O.presence_ref),p=d.filter(O=>S.indexOf(O.presence_ref)<0),T=g.filter(O=>b.indexOf(O.presence_ref)<0);p.length>0&&(l[c]=p),T.length>0&&(a[c]=T)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:a},t,r)}static syncDiff(i,e,t,r){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return t||(t=()=>{}),r||(r=()=>{}),this.map(s,(l,a)=>{var c;let d=(c=i[l])!==null&&c!==void 0?c:[];if(i[l]=this.cloneDeep(a),d.length>0){let g=i[l].map(S=>S.presence_ref),b=d.filter(S=>g.indexOf(S.presence_ref)<0);i[l].unshift(...b)}t(l,d,a)}),this.map(o,(l,a)=>{let c=i[l];if(!c)return;let d=a.map(g=>g.presence_ref);c=c.filter(g=>d.indexOf(g.presence_ref)<0),i[l]=c,r(l,c,a),c.length===0&&delete i[l]}),i}static map(i,e){return Object.getOwnPropertyNames(i).map(t=>e(t,i[t]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((e,t)=>{let r=i[t];return"metas"in r?e[t]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[t]=r,e},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var vt=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(vt||{});var Pn=class n{constructor(i,e={config:{}},t){this.topic=i,this.params=e,this.socket=t,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Ai(this,He.join,this.params,this.timeout),this.rejoinTimer=new ki(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(He.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new On(this),this.broadcastEndpointURL=Yr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(i,e=this.timeout){var t,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(d=>i?.(vt.CHANNEL_ERROR,d)),this._onClose(()=>i?.(vt.CLOSED));let a={},c={broadcast:s,presence:o,postgres_changes:(r=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",g=>h(this,[g],function*({postgres_changes:d}){var b;if(this.socket.setAuth(),d===void 0){i?.(vt.SUBSCRIBED);return}else{let S=this.bindings.postgres_changes,p=(b=S?.length)!==null&&b!==void 0?b:0,T=[];for(let O=0;O<p;O++){let Z=S[O],{filter:{event:Ee,schema:ge,table:Ie,filter:De}}=Z,wt=d&&d[O];if(wt&&wt.event===Ee&&wt.schema===ge&&wt.table===Ie&&wt.filter===De)T.push(Object.assign(Object.assign({},Z),{id:wt.id}));else{this.unsubscribe(),i?.(vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,i&&i(vt.SUBSCRIBED);return}})).receive("error",d=>{i?.(vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{i?.(vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){return h(this,arguments,function*(i,e={}){return yield this.send({type:"presence",event:"track",payload:i},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(i={}){return yield this.send({type:"presence",event:"untrack"},i)})}on(i,e,t){return this._on(i,e,t)}send(t){return h(this,arguments,function*(i,e={}){var r,s;if(!this._canPush()&&i.type==="broadcast"){let{event:o,payload:l}=i,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{let d=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return yield(s=d.body)===null||s===void 0?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,a,c;let d=this._push(i.type,i,e.timeout||this.timeout);i.type==="broadcast"&&!(!((c=(a=(l=this.params)===null||l===void 0?void 0:l.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Le.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(He.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(t=>{let r=new Ai(this,He.leave,{},i);r.receive("ok",()=>{e(),t("ok")}).receive("timeout",()=>{e(),t("timed out")}).receive("error",()=>{t("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_fetchWithTimeout(i,e,t){return h(this,null,function*(){let r=new AbortController,s=setTimeout(()=>r.abort(),t),o=yield this.socket.fetch(i,Object.assign(Object.assign({},e),{signal:r.signal}));return clearTimeout(s),o})}_push(i,e,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ai(this,i,e,t);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(i,e,t){return e}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,e,t){var r,s;let o=i.toLocaleLowerCase(),{close:l,error:a,leave:c,join:d}=He;if(t&&[l,a,c,d].indexOf(o)>=0&&t!==this._joinRef())return;let b=this._onMessage(o,e,t);if(e&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(S=>{var p,T,O;return((p=S.filter)===null||p===void 0?void 0:p.event)==="*"||((O=(T=S.filter)===null||T===void 0?void 0:T.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===o}).map(S=>S.callback(b,t)):(s=this.bindings[o])===null||s===void 0||s.filter(S=>{var p,T,O,Z,Ee,ge;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in S){let Ie=S.id,De=(p=S.filter)===null||p===void 0?void 0:p.event;return Ie&&((T=e.ids)===null||T===void 0?void 0:T.includes(Ie))&&(De==="*"||De?.toLocaleLowerCase()===((O=e.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{let Ie=(Ee=(Z=S?.filter)===null||Z===void 0?void 0:Z.event)===null||Ee===void 0?void 0:Ee.toLocaleLowerCase();return Ie==="*"||Ie===((ge=e?.event)===null||ge===void 0?void 0:ge.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===o}).map(S=>{if(typeof b=="object"&&"ids"in b){let p=b.data,{schema:T,table:O,commit_timestamp:Z,type:Ee,errors:ge}=p;b=Object.assign(Object.assign({},{schema:T,table:O,commit_timestamp:Z,eventType:Ee,new:{},old:{},errors:ge}),this._getPayloadRecords(p))}S.callback(b,t)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,e,t){let r=i.toLocaleLowerCase(),s={type:r,filter:e,callback:t};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(i,e){let t=i.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===t&&n.isEqual(r.filter,e))}),this}static isEqual(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(let t in i)if(i[t]!==e[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(He.close,{},i)}_onError(i){this._on(He.error,{},e=>i(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(i))}_getPayloadRecords(i){let e={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(e.new=ca(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(e.old=ca(i.columns,i.old_record)),e}};var fp=()=>{},pp=typeof WebSocket<"u",mp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Nn=class{constructor(i,e){var t;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Wc,this.params={},this.timeout=Wr,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fp,this.conn=null,this.sendBuffer=[],this.serializer=new qr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>import("./chunk-NPJLHOA5.js").then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${i}/${aa.websocket}`,this.httpEndpoint=Yr(i),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let r=(t=e?.params)===null||t===void 0?void 0:t.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=e?.encode?e.encode:(s,o)=>o(JSON.stringify(s)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ki(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(pp){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new da(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-GFTZZNGD.js").then(({default:i})=>{this.conn=new i(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qc}))}disconnect(i,e){this.conn&&(this.conn.onclose=function(){},i?this.conn.close(i,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(i){return h(this,null,function*(){let e=yield i.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let i=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),i})}log(i,e,t){this.logger(i,e,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Mi.connecting:return Zt.Connecting;case Mi.open:return Zt.Open;case Mi.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}channel(i,e={config:{}}){let t=new Pn(`realtime:${i}`,e,this);return this.channels.push(t),t}push(i){let{topic:e,event:t,payload:r,ref:s}=i,o=()=>{this.encode(i,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${e} ${t} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(i=null){return h(this,null,function*(){let e=i||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let t=null;try{t=JSON.parse(atob(e.split(".")[1]))}catch{}if(t&&t.exp&&!(Math.floor(Date.now()/1e3)-t.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${t.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${t.exp}`);this.accessTokenValue=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(He.access_token,{access_token:e})})}})}sendHeartbeat(){return h(this,null,function*(){var i;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(i=this.conn)===null||i===void 0||i.close(Yc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let e=this.channels.find(t=>t.topic===i&&(t._isJoined()||t._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${i}"`),e.unsubscribe())}_remove(i){this.channels=this.channels.filter(e=>e._joinRef()!==i._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_onConnMessage(i){this.decode(i.data,e=>{let{topic:t,event:r,payload:s,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(l=>l._isMember(t)).forEach(l=>l._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(e))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(i=>i())})}_onConnClose(i){this.log("transport","close",i),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(i))}_onConnError(i){this.log("transport",i.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(i))}_triggerChanError(){this.channels.forEach(i=>i._trigger(He.error))}_appendParams(i,e){if(Object.keys(e).length===0)return i;let t=i.match(/\?/)?"&":"?",r=new URLSearchParams(e);return`${i}${t}${r}`}_workerObjectUrl(i){let e;if(i)e=i;else{let t=new Blob([mp],{type:"application/javascript"});e=URL.createObjectURL(t)}return e}};var da=class{constructor(i,e,t){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Mi.connecting,this.send=()=>{},this.url=null,this.url=i,this.close=t.close}};var Di=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function ce(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Kr=class extends Di{constructor(i,e){super(i),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Qt=class extends Di{constructor(i,e){super(i),this.name="StorageUnknownError",this.originalError=e}};var gp=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},Qr=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)},Zc=()=>gp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),Zr=n=>{if(Array.isArray(n))return n.map(e=>Zr(e));if(typeof n=="function"||n!==Object(n))return n;let i={};return Object.entries(n).forEach(([e,t])=>{let r=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));i[r]=Zr(t)}),i};var Jt=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},ua=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_p=(n,i,e)=>Jt(void 0,void 0,void 0,function*(){let t=yield Zc();n instanceof t&&!e?.noResolveJson?n.json().then(r=>{i(new Kr(ua(r),n.status||500))}).catch(r=>{i(new Qt(ua(r),r))}):i(new Qt(ua(n),n))}),vp=(n,i,e,t)=>{let r={method:n,headers:i?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},i?.headers),t&&(r.body=JSON.stringify(t)),Object.assign(Object.assign({},r),e))};function Fn(n,i,e,t,r,s){return Jt(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(e,vp(i,t,r,s)).then(a=>{if(!a.ok)throw a;return t?.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>_p(a,l,t))})})}function Ri(n,i,e,t){return Jt(this,void 0,void 0,function*(){return Fn(n,"GET",i,e,t)})}function st(n,i,e,t,r){return Jt(this,void 0,void 0,function*(){return Fn(n,"POST",i,t,r,e)})}function Qc(n,i,e,t,r){return Jt(this,void 0,void 0,function*(){return Fn(n,"PUT",i,t,r,e)})}function Jc(n,i,e,t){return Jt(this,void 0,void 0,function*(){return Fn(n,"HEAD",i,Object.assign(Object.assign({},e),{noResolveJson:!0}),t)})}function Jr(n,i,e,t,r){return Jt(this,void 0,void 0,function*(){return Fn(n,"DELETE",i,t,r,e)})}var Ae=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},yp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Xr=class{constructor(i,e={},t,r){this.url=i,this.headers=e,this.bucketId=t,this.fetch=Qr(r)}uploadOrUpdate(i,e,t,r){return Ae(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Xc),r),l=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(o.upsert)}),a=o.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=t,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),r?.headers&&(l=Object.assign(Object.assign({},l),r.headers));let c=this._removeEmptyFolders(e),d=this._getFinalPath(c),g=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:i,body:s,headers:l},o?.duplex?{duplex:o.duplex}:{})),b=yield g.json();return g.ok?{data:{path:c,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}upload(i,e,t){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,e,t)})}uploadToSignedUrl(i,e,t,r){return Ae(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(i),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",e);try{let a,c=Object.assign({upsert:Xc.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.append("cacheControl",c.cacheControl)):(a=t,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);let g=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),b=yield g.json();return g.ok?{data:{path:s,fullPath:b.Key},error:null}:{data:null,error:b}}catch(a){if(ce(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(i,e){return Ae(this,void 0,void 0,function*(){try{let t=this._getFinalPath(i),r=Object.assign({},this.headers);e?.upsert&&(r["x-upsert"]="true");let s=yield st(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:r}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new Di("No token returned by API");return{data:{signedUrl:o.toString(),path:i,token:l},error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}update(i,e,t){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,e,t)})}move(i,e,t){return Ae(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}copy(i,e,t){return Ae(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrl(i,e,t){return Ae(this,void 0,void 0,function*(){try{let r=this._getFinalPath(i),s=yield st(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:this.headers}),o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrls(i,e,t){return Ae(this,void 0,void 0,function*(){try{let r=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:i},{headers:this.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}download(i,e){return Ae(this,void 0,void 0,function*(){let r=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let l=this._getFinalPath(i);return{data:yield(yield Ri(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ce(l))return{data:null,error:l};throw l}})}info(i){return Ae(this,void 0,void 0,function*(){let e=this._getFinalPath(i);try{let t=yield Ri(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Zr(t),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}exists(i){return Ae(this,void 0,void 0,function*(){let e=this._getFinalPath(i);try{return yield Jc(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(t){if(ce(t)&&t instanceof Qt){let r=t.originalError;if([400,404].includes(r?.status))return{data:!1,error:t}}throw t}})}getPublicUrl(i,e){let t=this._getFinalPath(i),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);let l=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&r.push(a);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${c}`)}}}remove(i){return Ae(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}list(i,e,t){return Ae(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},yp),e),{prefix:i||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){let e=[];return i.width&&e.push(`width=${i.width}`),i.height&&e.push(`height=${i.height}`),i.resize&&e.push(`resize=${i.resize}`),i.format&&e.push(`format=${i.format}`),i.quality&&e.push(`quality=${i.quality}`),e.join("&")}};var ed="2.7.1";var td={"X-Client-Info":`storage-js/${ed}`};var Oi=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},es=class{constructor(i,e={},t){this.url=i,this.headers=Object.assign(Object.assign({},td),e),this.fetch=Qr(t)}listBuckets(){return Oi(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}getBucket(i){return Oi(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}createBucket(i,e={public:!1}){return Oi(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}updateBucket(i,e){return Oi(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}emptyBucket(i){return Oi(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}deleteBucket(i){return Oi(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}};var Ln=class extends es{constructor(i,e={},t){super(i,e,t)}from(i){return new Xr(this.url,this.headers,i,this.fetch)}};var id="2.47.10";var Vn="";typeof Deno<"u"?Vn="deno":typeof document<"u"?Vn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vn="react-native":Vn="node";var bp={"X-Client-Info":`supabase-js-${Vn}/${id}`},nd={headers:bp},rd={schema:"public"},sd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},od={};Sl();var xp=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},Sp=n=>{let i;return n?i=n:typeof fetch>"u"?i=bl:i=fetch,(...e)=>i(...e)},wp=()=>typeof Headers>"u"?xl:Headers,ad=(n,i,e)=>{let t=Sp(e),r=wp();return(s,o)=>xp(void 0,void 0,void 0,function*(){var l;let a=(l=yield i())!==null&&l!==void 0?l:n,c=new r(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),t(s,Object.assign(Object.assign({},o),{headers:c}))})};var Cp=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})};function ld(n){return n.replace(/\/$/,"")}function cd(n,i){let{db:e,auth:t,realtime:r,global:s}=n,{db:o,auth:l,realtime:a,global:c}=i,d={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},l),t),realtime:Object.assign(Object.assign({},a),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>Cp(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}var ts="2.67.3";var dd="http://localhost:9999",ud="supabase.auth.token";var hd={"X-Client-Info":`gotrue-js/${ts}`},ha=10;var jn="X-Supabase-Api-Version",fa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function fd(n){return Math.round(Date.now()/1e3)+n}function pd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let i=Math.random()*16|0;return(n=="x"?i:i&3|8).toString(16)})}var Je=()=>typeof window<"u"&&typeof document<"u",Xt={tested:!1,writable:!1},Pt=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xt.tested)return Xt.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xt.tested=!0,Xt.writable=!0}catch{Xt.tested=!0,Xt.writable=!1}return Xt.writable};function md(n){let i={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((r,s)=>{i[s]=r})}catch{}return e.searchParams.forEach((t,r)=>{i[r]=t}),i}var is=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:t})=>t(...e)):i=fetch,(...e)=>i(...e)},gd=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",pa=(n,i,e)=>h(void 0,null,function*(){yield n.setItem(i,JSON.stringify(e))}),$n=(n,i)=>h(void 0,null,function*(){let e=yield n.getItem(i);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Bn=(n,i)=>h(void 0,null,function*(){yield n.removeItem(i)});function Tp(n){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",t,r,s,o,l,a,c,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=i.indexOf(n.charAt(d++)),l=i.indexOf(n.charAt(d++)),a=i.indexOf(n.charAt(d++)),c=i.indexOf(n.charAt(d++)),t=o<<2|l>>4,r=(l&15)<<4|a>>2,s=(a&3)<<6|c,e=e+String.fromCharCode(t),a!=64&&r!=0&&(e=e+String.fromCharCode(r)),c!=64&&s!=0&&(e=e+String.fromCharCode(s));return e}var Un=class n{constructor(){this.promise=new n.promiseConstructor((i,e)=>{this.resolve=i,this.reject=e})}};Un.promiseConstructor=Promise;function ma(n){let i=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!i.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let t=e[1];return JSON.parse(Tp(t))}function _d(n){return h(this,null,function*(){return yield new Promise(i=>{setTimeout(()=>i(null),n)})})}function vd(n,i){return new Promise((t,r)=>{h(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!i(s,null,o)){t(o);return}}catch(o){if(!i(s,o)){r(o);return}}})})}function Ep(n){return("0"+n.toString(16)).substr(-2)}function Ip(){let i=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(i),Array.from(i,Ep).join("")}function Mp(n){return h(this,null,function*(){let e=new TextEncoder().encode(n),t=yield crypto.subtle.digest("SHA-256",e),r=new Uint8Array(t);return Array.from(r).map(s=>String.fromCharCode(s)).join("")})}function kp(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Ap(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Mp(n);return kp(e)})}function ei(n,i,e=!1){return h(this,null,function*(){let t=Ip(),r=t;e&&(r+="/PASSWORD_RECOVERY"),yield pa(n,`${i}-code-verifier`,r);let s=yield Ap(t);return[s,t===s?"plain":"s256"]})}var Dp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yd(n){let i=n.headers.get(jn);if(!i||!i.match(Dp))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}var Hn=class extends Error{constructor(i,e,t){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=t}};function j(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var ns=class extends Hn{constructor(i,e,t){super(i,e,t),this.name="AuthApiError",this.status=e,this.code=t}};function bd(n){return j(n)&&n.name==="AuthApiError"}var Pi=class extends Hn{constructor(i,e){super(i),this.name="AuthUnknownError",this.originalError=e}},yt=class extends Hn{constructor(i,e,t,r){super(i,t,r),this.name=e,this.status=t}},ze=class extends yt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function xd(n){return j(n)&&n.name==="AuthSessionMissingError"}var Ni=class extends yt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ti=class extends yt{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}},ii=class extends yt{constructor(i,e=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Sd(n){return j(n)&&n.name==="AuthImplicitGrantRedirectError"}var zn=class extends yt{constructor(i,e=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Fi=class extends yt{constructor(i,e){super(i,"AuthRetryableFetchError",e,void 0)}};function rs(n){return j(n)&&n.name==="AuthRetryableFetchError"}var Gn=class extends yt{constructor(i,e,t){super(i,"AuthWeakPasswordError",e,"weak_password"),this.reasons=t}};var Rp=function(n,i){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},ni=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Op=[502,503,504];function wd(n){return h(this,null,function*(){var i;if(!gd(n))throw new Fi(ni(n),0);if(Op.includes(n.status))throw new Fi(ni(n),n.status);let e;try{e=yield n.json()}catch(s){throw new Pi(ni(s),s)}let t,r=yd(n);if(r&&r.getTime()>=fa["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?t=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(t=e.error_code),t){if(t==="weak_password")throw new Gn(ni(e),n.status,((i=e.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(t==="session_not_found")throw new ze}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Gn(ni(e),n.status,e.weak_password.reasons);throw new ns(ni(e),n.status||500,t)})}var Pp=(n,i,e,t)=>{let r={method:n,headers:i?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),r.body=JSON.stringify(t),Object.assign(Object.assign({},r),e))};function B(n,i,e,t){return h(this,null,function*(){var r;let s=Object.assign({},t?.headers);s[jn]||(s[jn]=fa["2024-01-01"].name),t?.jwt&&(s.Authorization=`Bearer ${t.jwt}`);let o=(r=t?.query)!==null&&r!==void 0?r:{};t?.redirectTo&&(o.redirect_to=t.redirectTo);let l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=yield Np(n,i,e+l,{headers:s,noResolveJson:t?.noResolveJson},{},t?.body);return t?.xform?t?.xform(a):{data:Object.assign({},a),error:null}})}function Np(n,i,e,t,r,s){return h(this,null,function*(){let o=Pp(i,t,r,s),l;try{l=yield n(e,Object.assign({},o))}catch(a){throw console.error(a),new Fi(ni(a),0)}if(l.ok||(yield wd(l)),t?.noResolveJson)return l;try{return yield l.json()}catch(a){yield wd(a)}})}function bt(n){var i;let e=null;Fp(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=fd(n.expires_in)));let t=(i=n.user)!==null&&i!==void 0?i:n;return{data:{session:e,user:t},error:null}}function ga(n){let i=bt(n);return!i.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,t)=>e&&typeof t=="string",!0)&&(i.data.weak_password=n.weak_password),i}function ot(n){var i;return{data:{user:(i=n.user)!==null&&i!==void 0?i:n},error:null}}function Cd(n){return{data:n,error:null}}function Td(n){let{action_link:i,email_otp:e,hashed_token:t,redirect_to:r,verification_type:s}=n,o=Rp(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:i,email_otp:e,hashed_token:t,redirect_to:r,verification_type:s},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Ed(n){return n}function Fp(n){return n.access_token&&n.refresh_token&&n.expires_in}var Lp=function(n,i){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Li=class{constructor({url:i="",headers:e={},fetch:t}){this.url=i,this.headers=e,this.fetch=is(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i,e="global"){return h(this,null,function*(){try{return yield B(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}})}inviteUserByEmail(t){return h(this,arguments,function*(i,e={}){try{return yield B(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:ot})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}})}generateLink(i){return h(this,null,function*(){try{let{options:e}=i,t=Lp(i,["options"]),r=Object.assign(Object.assign({},t),e);return"newEmail"in t&&(r.new_email=t?.newEmail,delete r.newEmail),yield B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Td,redirectTo:e?.redirectTo})}catch(e){if(j(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(i){return h(this,null,function*(){try{return yield B(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:ot})}catch(e){if(j(e))return{data:{user:null},error:e};throw e}})}listUsers(i){return h(this,null,function*(){var e,t,r,s,o,l,a;try{let c={nextPage:null,lastPage:0,total:0},d=yield B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(e=i?.page)===null||e===void 0?void 0:e.toString())!==null&&t!==void 0?t:"",per_page:(s=(r=i?.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Ed});if(d.error)throw d.error;let g=yield d.json(),b=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,S=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return S.length>0&&(S.forEach(p=>{let T=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(p.split(";")[1].split("=")[1]);c[`${O}Page`]=T}),c.total=parseInt(b)),{data:Object.assign(Object.assign({},g),c),error:null}}catch(c){if(j(c))return{data:{users:[]},error:c};throw c}})}getUserById(i){return h(this,null,function*(){try{return yield B(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:ot})}catch(e){if(j(e))return{data:{user:null},error:e};throw e}})}updateUserById(i,e){return h(this,null,function*(){try{return yield B(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:e,headers:this.headers,xform:ot})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}})}deleteUser(i,e=!1){return h(this,null,function*(){try{return yield B(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:e},xform:ot})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}})}_listFactors(i){return h(this,null,function*(){try{let{data:e,error:t}=yield B(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:e,error:t}}catch(e){if(j(e))return{data:null,error:e};throw e}})}_deleteFactor(i){return h(this,null,function*(){try{return{data:yield B(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(e){if(j(e))return{data:null,error:e};throw e}})}};var Id={getItem:n=>Pt()?globalThis.localStorage.getItem(n):null,setItem:(n,i)=>{Pt()&&globalThis.localStorage.setItem(n,i)},removeItem:n=>{Pt()&&globalThis.localStorage.removeItem(n)}};function _a(n={}){return{getItem:i=>n[i]||null,setItem:(i,e)=>{n[i]=e},removeItem:i=>{delete n[i]}}}function Md(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ri={debug:!!(globalThis&&Pt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Wn=class extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}},ss=class extends Wn{};function va(n,i,e){return h(this,null,function*(){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,i);let t=new globalThis.AbortController;return i>0&&setTimeout(()=>{t.abort(),ri.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},i),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},r=>h(this,null,function*(){if(r){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return yield e()}finally{ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(i===0)throw ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ss(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ri.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}Md();var Vp={url:dd,storageKey:ud,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},qn=30*1e3,kd=3;function Ad(n,i,e){return h(this,null,function*(){return yield e()})}var ya=(()=>{class n{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Vp),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Li({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=is(s.fetch),this.lock=s.lock||Ad,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Je()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=va:this.lock=Ad,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pt()?this.storage=Id:(this.memoryStorage={},this.storage=_a(this.memoryStorage)):(this.memoryStorage={},this.storage=_a(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",o=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ts}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let t=md(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":(yield this._isPKCECallback(t))&&(r="pkce"),Je()&&this.detectSessionInUrl&&r!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Sd(o)){let c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:l,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",a),yield this._saveSession(l),setTimeout(()=>h(this,null,function*(){a==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield this._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return j(t)?{error:t}:{error:new Pi("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var t,r,s;try{let o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:bt}),{data:l,error:a}=o;if(a||!l)return{data:{user:null,session:null},error:a};let c=l.session,d=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(j(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return h(this,null,function*(){var t,r,s;try{let o;if("email"in e){let{email:g,password:b,options:S}=e,p=null,T=null;this.flowType==="pkce"&&([p,T]=yield ei(this.storage,this.storageKey)),o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:g,password:b,data:(t=S?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:p,code_challenge_method:T},xform:bt})}else if("phone"in e){let{phone:g,password:b,options:S}=e;o=yield B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(r=S?.data)!==null&&r!==void 0?r:{},channel:(s=S?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:bt})}else throw new ti("You must provide either an email or phone number and a password");let{data:l,error:a}=o;if(a||!l)return{data:{user:null,session:null},error:a};let c=l.session,d=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(j(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{let t;if("email"in e){let{email:o,password:l,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ga})}else if("phone"in e){let{phone:o,password:l,options:a}=e;t=yield B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ga})}else throw new ti("You must provide either an email or phone number and a password");let{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ni}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return h(this,null,function*(){var t,r,s,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){let t=yield $n(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{let{data:o,error:l}=yield B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:bt});if(yield Bn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ni}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(j(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:t,provider:r,token:s,access_token:o,nonce:l}=e,a=yield B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:bt}),{data:c,error:d}=a;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ni}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return h(this,null,function*(){var t,r,s,o,l;try{if("email"in e){let{email:a,options:c}=e,d=null,g=null;this.flowType==="pkce"&&([d,g]=yield ei(this.storage,this.storageKey));let{error:b}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){let{phone:a,options:c}=e,{data:d,error:g}=yield B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(l=c?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:g}}throw new ti("You must provide either an email or phone number.")}catch(a){if(j(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){return h(this,null,function*(){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:l,error:a}=yield B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:bt});if(a)throw a;if(!l)throw new Error("An error occurred on token verification.");let c=l.session,d=l.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(j(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return h(this,null,function*(){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=yield ei(this.storage,this.storageKey)),yield B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Cd})}catch(o){if(j(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ze;let{error:s}=yield B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(j(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:s,options:o}=e,{error:l}=yield B(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){let{phone:r,type:s,options:o}=e,{data:l,error:a}=yield B(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:a}}throw new ti("You must provide either an email or phone number and a type")}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(t=>h(this,null,function*(){return t}))}))})}_acquireLock(e,t){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=h(this,null,function*(){return yield r,yield t()});return this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push(h(this,null,function*(){try{yield r}catch{}})),yield r;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=yield $n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,g)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,g))})}return{data:{session:e},error:null}}let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ot}):yield this._useSession(t=>h(this,null,function*(){var r,s,o;let{data:l,error:a}=t;if(a)throw a;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ze}:yield B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ot})}))}catch(t){if(j(t))return xd(t)&&(yield this._removeSession(),yield Bn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(r){return h(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(r){return h(this,arguments,function*(e,t={}){try{return yield this._useSession(s=>h(this,null,function*(){let{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new ze;let a=o.session,c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=yield ei(this.storage,this.storageKey));let{data:g,error:b}=yield B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:a.access_token,xform:ot});if(b)throw b;return a.user=g.user,yield this._saveSession(a),yield this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}}))}catch(s){if(j(s))return{data:{user:null},error:s};throw s}})}_decodeJWT(e){return ma(e)}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new ze;let t=Date.now()/1e3,r=t,s=!0,o=null,l=ma(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){let{session:a,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};o=a}else{let{data:a,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(j(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;if(!e){let{data:l,error:a}=t;if(a)throw a;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ze;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return h(this,null,function*(){try{if(!Je())throw new ii("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ii(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new zn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ii("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zn("No code detected.");let{data:ge,error:Ie}=yield this._exchangeCodeForSession(e.code);if(Ie)throw Ie;let De=new URL(window.location.href);return De.searchParams.delete("code"),window.history.replaceState(window.history.state,"",De.toString()),{data:{session:ge.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:a,expires_at:c,token_type:d}=e;if(!o||!a||!l||!d)throw new ii("No session defined in URL");let g=Math.round(Date.now()/1e3),b=parseInt(a),S=g+b;c&&(S=parseInt(c));let p=S-g;p*1e3<=qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${b}s`);let T=S-b;g-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,S,g):g-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,S,g);let{data:O,error:Z}=yield this._getUser(o);if(Z)throw Z;let Ee={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:b,expires_at:S,refresh_token:l,token_type:d,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Ee,redirectType:e.type},error:null}}catch(r){if(j(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let t=yield $n(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>h(this,null,function*(){var r;let{data:s,error:o}=t;if(o)return{error:o};let l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){let{error:a}=yield this.admin.signOut(l,e);if(a&&!(bd(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(yield this._removeSession(),yield Bn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let t=pd(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(t)}))}),{data:{subscription:r}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var r,s;try{let{data:{session:o},error:l}=t;if(l)throw l;yield(r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(r){return h(this,arguments,function*(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield ei(this.storage,this.storageKey,!0));try{return yield B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(j(l))return{data:null,error:l};throw l}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:t,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}})}linkIdentity(e){return h(this,null,function*(){var t;try{let{data:r,error:s}=yield this._useSession(o=>h(this,null,function*(){var l,a,c,d,g;let{data:b,error:S}=o;if(S)throw S;let p=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield B(this.fetch,"GET",p,{headers:this.headers,jwt:(g=(d=b.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})}));if(s)throw s;return Je()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(j(r))return{data:{provider:e.provider,url:null},error:r};throw r}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r,s;let{data:o,error:l}=t;if(l)throw l;return yield B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return h(this,null,function*(){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return yield vd(s=>h(this,null,function*(){return s>0&&(yield _d(200*Math.pow(2,s-1))),this._debug(t,"refreshing attempt",s),yield B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bt})}),(s,o)=>{let l=200*Math.pow(2,s);return o&&rs(o)&&Date.now()+l-r<qn})}catch(r){if(this._debug(t,"error",r),j(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return h(this,null,function*(){let r=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Je()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=yield $n(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&(yield this._removeSession());return}let s=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+ha;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${ha}s`),o){if(this.autoRefreshToken&&r.refresh_token){let{error:l}=yield this._callRefreshToken(r.refresh_token);l&&(console.error(l),rs(l)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",l),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var t,r;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Un;let{data:o,error:l}=yield this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new ze;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),j(o)){let l={session:null,error:o};return rs(o)||(yield this._removeSession()),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,t,r=!0){return h(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let o=[],l=Array.from(this.stateChangeEmitters.values()).map(a=>h(this,null,function*(){try{yield a.callback(e,t)}catch(c){o.push(c)}}));if(yield Promise.all(l),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield pa(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Bn(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),qn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(t=>h(this,null,function*(){let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((r.expires_at*1e3-e)/qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qn}ms, refresh threshold is ${kd} ticks`),s<=kd&&(yield this._callRefreshToken(r.refresh_token))}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Wn)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Je()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,r){return h(this,null,function*(){let s=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[o,l]=yield ei(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(a.toString())}if(r?.queryParams){let o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:s,error:o}=t;return o?{data:null,error:o}:yield B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r,s;let{data:o,error:l}=t;if(l)return{data:null,error:l};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=yield B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(t){if(j(t))return{data:null,error:t};throw t}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:s,error:o}=t;if(o)return{data:null,error:o};let{data:l,error:a}=yield B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:a})}))}catch(t){if(j(t))return{data:null,error:t};throw t}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:s,error:o}=t;return o?{data:null,error:o}:yield B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})}))}catch(t){if(j(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};let r=e?.factors||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var t,r;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let l=this._decodeJWT(s.access_token),a=null;l.aal&&(a=l.aal);let c=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let g=l.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}))})}}return n.nextInstanceID=0,n})();var jp=ya,ba=jp;var os=class extends ba{constructor(i){super(i)}};var Up=function(n,i,e,t){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(d){try{c(t.next(d))}catch(g){o(g)}}function a(d){try{c(t.throw(d))}catch(g){o(g)}}function c(d){d.done?s(d.value):r(d.value).then(l,a)}c((t=t.apply(n,i||[])).next())})},as=class{constructor(i,e,t){var r,s,o;if(this.supabaseUrl=i,this.supabaseKey=e,!i)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let l=ld(i);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;let a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:rd,realtime:od,auth:Object.assign(Object.assign({},sd),{storageKey:a}),global:nd},d=cd(t??{},c);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ad(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new zc(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new En(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ln(this.storageUrl,this.headers,this.fetch)}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,e={},t={}){return this.rest.rpc(i,e,t)}channel(i,e={config:{}}){return this.realtime.channel(i,e)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var i,e;return Up(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:t}=yield this.auth.getSession();return(e=(i=t.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,storageKey:s,flowType:o,lock:l,debug:a},c,d){var g;let b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new os({url:this.authUrl,headers:Object.assign(Object.assign({},b),c),storageKey:s,autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,flowType:o,lock:l,debug:a,fetch:d,hasCustomAuthorizationHeader:(g="Authorization"in this.headers)!==null&&g!==void 0?g:!1})}_initRealtimeClient(i){return new Nn(this.realtimeUrl,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(i,e,t){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==t?this.changedAccessToken=t:i==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Dd=(n,i,e)=>new as(n,i,e);var Yn={production:!1,supabaseUrl:"https://nrapqjwyqvwopwoxevlw.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yYXBxand5cXZ3b3B3b3hldmx3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA4MDU2MzQsImV4cCI6MjA0NjM4MTYzNH0.hq-X6YEAD7DG9WIiJhqwRb3ZtMruaEzAbr0Wm4TBoQU"};var Q=class n{supabase;constructor(){this.supabase=Dd(Yn.supabaseUrl,Yn.supabaseKey,{auth:{persistSession:!0}})}get client(){return this.supabase}uploadFile(i,e){return h(this,null,function*(){try{let{data:t,error:r}=yield this.supabase.storage.from("user_upload").exists(e);if(r)throw r;if(t)return`${Yn.supabaseUrl}/storage/v1/object/public/user_upload/${e}`;let{data:s,error:o}=yield this.supabase.storage.from("user_upload").upload(e,i),l=`${Yn.supabaseUrl}/storage/v1/object/public/user_upload/${e}`;if(o)throw o;return l}catch(t){throw console.error("Error uploading file:",t),t}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var at=class n{constructor(i){this.supabase=i;this.initSession(),this.supabase.client.auth.onAuthStateChange((e,t)=>{this._session=t,this._user=t?.user??null})}_user=null;_session=null;initSession(){return h(this,null,function*(){let{data:i,error:e}=yield this.supabase.client.auth.getSession();!e&&i.session&&(this._session=i.session,this._user=i.session.user)})}signUp(i,e){return h(this,null,function*(){let{data:t,error:r}=yield this.supabase.client.auth.signUp({email:i,password:e});if(r)throw r;return t})}signIn(i,e){return h(this,null,function*(){let{data:t,error:r}=yield this.supabase.client.auth.signInWithPassword({email:i,password:e});if(r)throw r;return t})}signOut(){return h(this,null,function*(){let{error:i}=yield this.supabase.client.auth.signOut();if(i)throw i})}get session(){return this._session}get user(){return this._user}isLoggedIn(){return!!this._user}static \u0275fac=function(e){return new(e||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function $p(n,i){if(n&1){let e=G();pt(0),u(1,"nav")(2,"a",1)(3,"b"),_(4,"PANOU ADMINISTRARE"),f()(),u(5,"a",2),_(6,"Toate Rug\u0103ciunile"),f(),u(7,"a",3),_(8,"Tipuri de Rug\u0103ciuni"),f(),u(9,"a",4),_(10,"Sec\u021Biuni"),f(),u(11,"a",5),_(12,"Texte"),f(),u(13,"div",6)(14,"span"),_(15),f(),u(16,"button",7),w("click",function(){E(e);let r=y();return I(r.onLogout())}),_(17,"Delogare"),f()()(),ie(18,"hr"),mt()}if(n&2){let e=y();v(15),ne(e.auth.user==null?null:e.auth.user.email)}}var ls=class n{constructor(i,e){this.auth=i;this.router=e}title="my-prayer-admin";onLogout(){return h(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/login"])}catch(i){console.error("Error logging out:",i)}})}static \u0275fac=function(e){return new(e||n)(A(at),A(be))};static \u0275cmp=X({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"],[2,"display","inline","color","black"],["routerLink","/prayers"],["routerLink","/prayerTypes"],["routerLink","/sections"],["routerLink","/liturgicalTexts"],[2,"display","flex","float","right","width","min-content","gap","1rem"],[3,"click"]],template:function(e,t){e&1&&(D(0,$p,19,1,"ng-container",0),ie(1,"router-outlet")),e&2&&x("ngIf",t.auth.isLoggedIn())},dependencies:[ae,Ue,Ho,Be],styles:["nav[_ngcontent-%COMP%]{margin:1rem}a[_ngcontent-%COMP%]{margin-right:1rem;text-decoration:none;color:#790822}"]})};var Ud=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,t){this._renderer=e,this._elementRef=t}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(t){return new(t||n)(A(Ye),A(Pe))};static \u0275dir=K({type:n})}return n})(),tr=(()=>{class n extends Ud{static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275dir=K({type:n,features:[Ke]})}return n})(),Nt=new z(""),Bp={provide:Nt,useExisting:et(()=>wa),multi:!0},wa=(()=>{class n extends tr{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275dir=K({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){t&1&&w("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Te([Bp]),Ke]})}return n})(),Hp={provide:Nt,useExisting:et(()=>de),multi:!0};function zp(){let n=pi()?pi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Gp=new z(""),de=(()=>{class n extends Ud{_compositionMode;_composing=!1;constructor(e,t,r){super(e,t),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!zp())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(t){return new(t||n)(A(Ye),A(Pe),A(Gp,8))};static \u0275dir=K({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){t&1&&w("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Te([Hp]),Ke]})}return n})();var $d=new z(""),Bd=new z("");function Hd(n){return n!=null}function zd(n){return mr(n)?Ce(n):n}function Gd(n){let i={};return n.forEach(e=>{i=e!=null?C(C({},i),e):i}),Object.keys(i).length===0?null:i}function Wd(n,i){return i.map(e=>e(n))}function Wp(n){return!n.validate}function qd(n){return n.map(i=>Wp(i)?i:e=>i.validate(e))}function qp(n){if(!n)return null;let i=n.filter(Hd);return i.length==0?null:function(e){return Gd(Wd(e,i))}}function Ca(n){return n!=null?qp(qd(n)):null}function Yp(n){if(!n)return null;let i=n.filter(Hd);return i.length==0?null:function(e){let t=Wd(e,i).map(zd);return Ha(t).pipe(H(Gd))}}function Ta(n){return n!=null?Yp(qd(n)):null}function Rd(n,i){return n===null?[i]:Array.isArray(n)?[...n,i]:[n,i]}function Kp(n){return n._rawValidators}function Zp(n){return n._rawAsyncValidators}function Sa(n){return n?Array.isArray(n)?n:[n]:[]}function ds(n,i){return Array.isArray(n)?n.includes(i):n===i}function Od(n,i){let e=Sa(i);return Sa(n).forEach(r=>{ds(e,r)||e.push(r)}),e}function Pd(n,i){return Sa(i).filter(e=>!ds(n,e))}var us=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Ca(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Ta(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i=void 0){this.control&&this.control.reset(i)}hasError(i,e){return this.control?this.control.hasError(i,e):!1}getError(i,e){return this.control?this.control.getError(i,e):null}},Ui=class extends us{name;get formDirective(){return null}get path(){return null}},er=class extends us{_parent=null;name=null;valueAccessor=null},hs=class{_cd;constructor(i){this._cd=i}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Qp={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ab=Y(C({},Qp),{"[class.ng-submitted]":"isSubmitted"}),pe=(()=>{class n extends hs{constructor(e){super(e)}static \u0275fac=function(t){return new(t||n)(A(er,2))};static \u0275dir=K({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){t&2&&hi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Ke]})}return n})(),Yd=(()=>{class n extends hs{constructor(e){super(e)}static \u0275fac=function(t){return new(t||n)(A(Ui,10))};static \u0275dir=K({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){t&2&&hi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Ke]})}return n})();var Kn="VALID",cs="INVALID",Vi="PENDING",Zn="DISABLED",$i=class{},fs=class extends $i{value;source;constructor(i,e){super(),this.value=i,this.source=e}},Jn=class extends $i{pristine;source;constructor(i,e){super(),this.pristine=i,this.source=e}},Xn=class extends $i{touched;source;constructor(i,e){super(),this.touched=i,this.source=e}},ji=class extends $i{status;source;constructor(i,e){super(),this.status=i,this.source=e}};function Kd(n){return(gs(n)?n.validators:n)||null}function Jp(n){return Array.isArray(n)?Ca(n):n||null}function Zd(n,i){return(gs(i)?i.asyncValidators:n)||null}function Xp(n){return Array.isArray(n)?Ta(n):n||null}function gs(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function em(n,i,e){let t=n.controls;if(!(i?Object.keys(t):t).length)throw new te(1e3,"");if(!t[e])throw new te(1001,"")}function tm(n,i,e){n._forEachChild((t,r)=>{if(e[r]===void 0)throw new te(1002,"")})}var ps=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(i,e){this._assignValidators(i),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get status(){return Dt(this.statusReactive)}set status(i){Dt(()=>this.statusReactive.set(i))}_status=Qi(()=>this.statusReactive());statusReactive=zt(void 0);get valid(){return this.status===Kn}get invalid(){return this.status===cs}get pending(){return this.status==Vi}get disabled(){return this.status===Zn}get enabled(){return this.status!==Zn}errors;get pristine(){return Dt(this.pristineReactive)}set pristine(i){Dt(()=>this.pristineReactive.set(i))}_pristine=Qi(()=>this.pristineReactive());pristineReactive=zt(!0);get dirty(){return!this.pristine}get touched(){return Dt(this.touchedReactive)}set touched(i){Dt(()=>this.touchedReactive.set(i))}_touched=Qi(()=>this.touchedReactive());touchedReactive=zt(!1);get untouched(){return!this.touched}_events=new Ve;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._assignValidators(i)}setAsyncValidators(i){this._assignAsyncValidators(i)}addValidators(i){this.setValidators(Od(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(Od(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(Pd(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(Pd(i,this._rawAsyncValidators))}hasValidator(i){return ds(this._rawValidators,i)}hasAsyncValidator(i){return ds(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){let e=this.touched===!1;this.touched=!0;let t=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsTouched(Y(C({},i),{sourceControl:t})),e&&i.emitEvent!==!1&&this._events.next(new Xn(!0,t))}markAllAsTouched(i={}){this.markAsTouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(i))}markAsUntouched(i={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=i.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:t})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,t),e&&i.emitEvent!==!1&&this._events.next(new Xn(!1,t))}markAsDirty(i={}){let e=this.pristine===!0;this.pristine=!1;let t=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsDirty(Y(C({},i),{sourceControl:t})),e&&i.emitEvent!==!1&&this._events.next(new Jn(!1,t))}markAsPristine(i={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=i.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:i.emitEvent})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i,t),e&&i.emitEvent!==!1&&this._events.next(new Jn(!0,t))}markAsPending(i={}){this.status=Vi;let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new ji(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.markAsPending(Y(C({},i),{sourceControl:e}))}disable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=Zn,this.errors=null,this._forEachChild(r=>{r.disable(Y(C({},i),{onlySelf:!0}))}),this._updateValue();let t=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new fs(this.value,t)),this._events.next(new ji(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(C({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=Kn,this._forEachChild(t=>{t.enable(Y(C({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Y(C({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(i,e){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kn||this.status===Vi)&&this._runAsyncValidator(t,i.emitEvent)}let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new fs(this.value,e)),this._events.next(new ji(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(Y(C({},i),{sourceControl:e}))}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zn:Kn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i,e){if(this.asyncValidator){this.status=Vi,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=zd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:i})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let i=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,i}return!1}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(i){let e=i;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,r)=>t&&t._find(r),this)}getError(i,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i,e,t){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),(i||t)&&this._events.next(new ji(this.status,e)),this._parent&&this._parent._updateControlsErrors(i,e,t)}_initObservables(){this.valueChanges=new he,this.statusChanges=new he}_calculateStatus(){return this._allControlsDisabled()?Zn:this.errors?cs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vi)?Vi:this._anyControlsHaveStatus(cs)?cs:Kn}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i,e){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!i.onlySelf&&this._parent._updatePristine(i,e),r&&this._events.next(new Jn(this.pristine,e))}_updateTouched(i={},e){this.touched=this._anyControlsTouched(),this._events.next(new Xn(this.touched,e)),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,e)}_onDisabledChange=[];_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){gs(i)&&i.updateOn!=null&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){let e=this._parent&&this._parent.dirty;return!i&&!!e&&!this._parent._anyControlsDirty()}_find(i){return null}_assignValidators(i){this._rawValidators=Array.isArray(i)?i.slice():i,this._composedValidatorFn=Jp(this._rawValidators)}_assignAsyncValidators(i){this._rawAsyncValidators=Array.isArray(i)?i.slice():i,this._composedAsyncValidatorFn=Xp(this._rawAsyncValidators)}},ms=class extends ps{constructor(i,e,t){super(Kd(e),Zd(t,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,t={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,t={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){tm(this,!0,i),Object.keys(i).forEach(t=>{em(this,!0,t),this.controls[t].setValue(i[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){i!=null&&(Object.keys(i).forEach(t=>{let r=this.controls[t];r&&r.patchValue(i[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((t,r)=>{t.reset(i?i[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,t)=>(i[t]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&i(t,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&i(t))return!0;return!1}_reduceValue(){let i={};return this._reduceChildren(i,(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(i,e){let t=i;return this._forEachChild((r,s)=>{t=e(t,r,s)}),t}_allControlsDisabled(){for(let i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}};var Ea=new z("CallSetDisabledState",{providedIn:"root",factory:()=>Ia}),Ia="always";function im(n,i){return[...i.path,n]}function Qd(n,i,e=Ia){Jd(n,i),i.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&i.valueAccessor.setDisabledState?.(n.disabled),rm(n,i),om(n,i),sm(n,i),nm(n,i)}function Nd(n,i){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function nm(n,i){if(i.valueAccessor.setDisabledState){let e=t=>{i.valueAccessor.setDisabledState(t)};n.registerOnDisabledChange(e),i._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Jd(n,i){let e=Kp(n);i.validator!==null?n.setValidators(Rd(e,i.validator)):typeof e=="function"&&n.setValidators([e]);let t=Zp(n);i.asyncValidator!==null?n.setAsyncValidators(Rd(t,i.asyncValidator)):typeof t=="function"&&n.setAsyncValidators([t]);let r=()=>n.updateValueAndValidity();Nd(i._rawValidators,r),Nd(i._rawAsyncValidators,r)}function rm(n,i){i.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Xd(n,i)})}function sm(n,i){i.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Xd(n,i),n.updateOn!=="submit"&&n.markAsTouched()})}function Xd(n,i){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function om(n,i){let e=(t,r)=>{i.valueAccessor.writeValue(t),r&&i.viewToModelUpdate(t)};n.registerOnChange(e),i._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function am(n,i){n==null,Jd(n,i)}function lm(n,i){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(i,e.currentValue)}function cm(n){return Object.getPrototypeOf(n.constructor)===tr}function dm(n,i){n._syncPendingControls(),i.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function um(n,i){if(!i)return null;Array.isArray(i);let e,t,r;return i.forEach(s=>{s.constructor===de?e=s:cm(s)?t=s:r=s}),r||t||e||null}var hm={provide:Ui,useExisting:et(()=>Ma)},Qn=Promise.resolve(),Ma=(()=>{class n extends Ui{callSetDisabledState;get submitted(){return Dt(this.submittedReactive)}_submitted=Qi(()=>this.submittedReactive());submittedReactive=zt(!1);_directives=new Set;form;ngSubmit=new he;options;constructor(e,t,r){super(),this.callSetDisabledState=r,this.form=new ms({},Ca(e),Ta(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Qn.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Qd(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Qn.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Qn.then(()=>{let t=this._findContainer(e.path),r=new ms({});am(r,e),t.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Qn.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Qn.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),dm(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(t){return new(t||n)(A($d,10),A(Bd,10),A(Ea,8))};static \u0275dir=K({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){t&1&&w("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Te([hm]),Ke]})}return n})();function Fd(n,i){let e=n.indexOf(i);e>-1&&n.splice(e,1)}function Ld(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fm=class extends ps{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(i=null,e,t){super(Kd(e),Zd(t,e)),this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gs(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Ld(i)?this.defaultValue=i.value:this.defaultValue=i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Fd(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Fd(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(i){Ld(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};var pm={provide:er,useExisting:et(()=>ue)},Vd=Promise.resolve(),ue=(()=>{class n extends er{_changeDetectorRef;callSetDisabledState;control=new fm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new he;constructor(e,t,r,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this._parent=e,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=um(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let t=e.name.previousValue;this.formDirective.removeControl({name:t,path:this._getPath(t)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),lm(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Vd.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let t=e.isDisabled.currentValue,r=t!==0&&At(t);Vd.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?im(e,this._parent):[e]}static \u0275fac=function(t){return new(t||n)(A(Ui,9),A($d,10),A(Bd,10),A(Nt,10),A(fi,8),A(Ea,8))};static \u0275dir=K({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Te([pm]),Ke,It]})}return n})(),eu=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=K({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),mm={provide:Nt,useExisting:et(()=>ir),multi:!0},ir=(()=>{class n extends tr{writeValue(e){let t=e??"";this.setProperty("value",t)}registerOnChange(e){this.onChange=t=>{e(t==""?null:parseFloat(t))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275dir=K({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){t&1&&w("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Te([mm]),Ke]})}return n})();var gm={provide:Nt,useExisting:et(()=>lt),multi:!0};function tu(n,i){return n==null?`${i}`:(i&&typeof i=="object"&&(i="Object"),`${n}: ${i}`.slice(0,50))}function _m(n){return n.split(":")[0]}var lt=(()=>{class n extends tr{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let t=this._getOptionId(e),r=tu(t,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){let t=_m(e);return this._optionMap.has(t)?this._optionMap.get(t):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275dir=K({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){t&1&&w("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Te([gm]),Ke]})}return n})(),Ft=(()=>{class n{_element;_renderer;_select;id;constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(tu(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(t){return new(t||n)(A(Pe),A(Ye),A(lt,9))};static \u0275dir=K({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),vm={provide:Nt,useExisting:et(()=>iu),multi:!0};function jd(n,i){return n==null?`${i}`:(typeof i=="string"&&(i=`'${i}'`),i&&typeof i=="object"&&(i="Object"),`${n}: ${i}`.slice(0,50))}function ym(n){return n.split(":")[0]}var iu=(()=>{class n extends tr{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let t;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));t=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else t=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{let r=[],s=t.selectedOptions;if(s!==void 0){let o=s;for(let l=0;l<o.length;l++){let a=o[l],c=this._getOptionValue(a.value);r.push(c)}}else{let o=t.options;for(let l=0;l<o.length;l++){let a=o[l];if(a.selected){let c=this._getOptionValue(a.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){let t=ym(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275dir=K({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){t&1&&w("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Te([vm]),Ke]})}return n})(),Lt=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(jd(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(jd(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(t){return new(t||n)(A(Pe),A(Ye),A(iu,9))};static \u0275dir=K({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var bm=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({})}return n})();var me=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ea,useValue:e.callSetDisabledState??Ia}]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({imports:[bm]})}return n})();var re=class{constructor(i){this.supabase=i}get client(){return this.supabase.client}getAll(){return h(this,null,function*(){let{data:i,error:e}=yield this.client.from(this.tableName).select("*").order("created_at",{ascending:!0});if(e)throw e;return i??[]})}getById(i){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").eq("id",i).single();if(t)throw t;return e})}create(i){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).insert([i]).select().single();if(t)throw t;return e})}update(i,e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).update(e).eq("id",i).select().single();if(r)throw r;return t})}delete(i){return h(this,null,function*(){let{error:e}=yield this.client.from(this.tableName).delete().eq("id",i);if(e)throw e})}bulkUpdate(i){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).upsert(i).select();if(console.log(t),t||!e)throw t;return e})}getPaginated(i,e,t){return h(this,null,function*(){let r=this.client.from(this.tableName).select("*");for(let l of t)r.filter(l.field,l.operator,l.value);let{data:s,error:o}=yield r.range((i-1)*e,i*e-1);if(o)throw o;return s??[]})}count(){return h(this,null,function*(){let{data:i,error:e}=yield this.client.from(this.tableName).select("id",{count:"exact"});if(e)throw e;return i?.length??0})}};var Bi=class n extends re{constructor(e){super(e);this.supabase=e}tableName="prayers";getAll(){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").order("prayer_type_id",{ascending:!0}).order("sequence",{ascending:!0});if(t)throw t;return e??[]})}getById(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).select("*, sections: prayers_sections(*, section: sections(*)), date_groups: prayer_date_group(*, date_group(*))").order("sequence",{foreignTable:"prayers_sections"}).eq("id",e).single();if(r)throw r;return t})}getParyerWithSectionsRecursively(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.rpc("get_prayer_with_sections_recursive",{request_prayer_id:e});if(r)throw r;return t})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var ct=class n extends re{constructor(e){super(e);this.supabase=e}tableName="prayer_type";getAll(){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*");if(t)throw t;return e??[]})}getTree(){return h(this,null,function*(){let{data:e,error:t}=yield this.supabase.client.rpc("get_prayer_types");if(t)throw console.error("Error calling get_prayer_types:",t),t;return e})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var xm=n=>["/prayers",n];function Sm(n,i){if(n&1&&(u(0,"li")(1,"a",5),_(2),f()()),n&2){let e=i.$implicit;v(),x("routerLink",Ze(3,xm,e.id)),v(),ve("",e.title," ",e.subtitle!=null&&e.subtitle.length?"- "+e.subtitle:"","")}}var vs=class n{constructor(i,e){this.prayersService=i;this.prayerTypesService=e}prayerTypes=[];prayers=[];newPrayer=null;ngOnInit(){return h(this,null,function*(){this.newPrayer={title:"",subtitle:"",sequence:1},this.prayers=yield this.prayersService.getAll(),this.prayerTypes=yield this.prayerTypesService.getAll()})}addPrayer(){let i=this.newPrayer?.title.trim();i&&this.prayersService.create({title:i}).then(e=>{this.newPrayer={title:"",subtitle:"",sequence:1},this.prayers.splice(0,0,e)}).catch(e=>{alert("Error creating prayer: "+e)})}static \u0275fac=function(e){return new(e||n)(A(Bi),A(ct))};static \u0275cmp=X({type:n,selectors:[["app-prayers-list"]],decls:10,vars:2,consts:[[2,"margin-bottom","1rem"],["for","title"],["id","title","type","text","placeholder","Titlu rug\u0103ciune",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h2"),_(2,"Rug\u0103ciuni"),f(),u(3,"label",1),_(4,"Adaug\u0103 o rug\u0103ciune nou\u0103: "),f(),u(5,"input",2),F("ngModelChange",function(s){return N(t.newPrayer.title,s)||(t.newPrayer.title=s),s}),f(),u(6,"button",3),w("click",function(){return t.addPrayer()}),_(7,"Adaug\u0103"),f()(),u(8,"ul"),D(9,Sm,3,5,"li",4),f()),e&2&&(v(5),P("ngModel",t.newPrayer.title),v(4),x("ngForOf",t.prayers))},dependencies:[ae,we,Be,me,de,pe,ue],encapsulation:2})};var ys=class n extends re{constructor(e){super(e);this.supabase=e}tableName="prayers_sections";create(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).insert([e]).select("*, section: sections(*)").single();if(r)throw r;return t})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vt=class n extends re{constructor(e){super(e);this.supabase=e}tableName="sections";static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var bs=class n extends re{constructor(e){super(e);this.supabase=e}tableName="prayer_date_group";create(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).insert([e]).select("*, date_group(*, date_group_type(*))").single();if(r)throw r;return t})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var xs=class n extends re{constructor(e){super(e);this.supabase=e}tableName="date_group";getAll(){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*, date_group_type(*)").order("date_group_type_id",{ascending:!0});if(t)throw t;return e??[]})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var ru=n=>["/sections",n];function Em(n,i){if(n&1&&(u(0,"option",14),_(1),f()),n&2){let e=i.$implicit;x("value",e.id),v(),ne(e.type)}}function Im(n,i){if(n&1){let e=G();u(0,"div")(1,"div")(2,"h2")(3,"button",5),w("click",function(){E(e);let r=y();return I(r.goBack())}),u(4,"i",11),_(5,"arrow_back"),f()(),_(6),u(7,"button",5),w("click",function(){E(e);let r=y();return I(r.deletePrayer())}),u(8,"i",11),_(9,"delete"),f()()(),u(10,"h3"),_(11,"Detalii rug\u0103ciune"),f(),u(12,"table",12)(13,"tr")(14,"td"),_(15,"Titlu:"),f(),u(16,"td")(17,"input",2),F("ngModelChange",function(r){E(e);let s=y();return N(s.prayer.title,r)||(s.prayer.title=r),I(r)}),f()()(),u(18,"tr")(19,"td"),_(20,"Subtitlu:"),f(),u(21,"td")(22,"input",2),F("ngModelChange",function(r){E(e);let s=y();return N(s.prayer.subtitle,r)||(s.prayer.subtitle=r),I(r)}),f()()(),u(23,"tr")(24,"td"),_(25,"Ordine:"),f(),u(26,"td")(27,"input",13),F("ngModelChange",function(r){E(e);let s=y();return N(s.prayer.sequence,r)||(s.prayer.sequence=r),I(r)}),f()()(),u(28,"tr")(29,"td"),_(30,"Tip:"),f(),u(31,"td")(32,"select",2),F("ngModelChange",function(r){E(e);let s=y();return N(s.prayer.prayer_type_id,r)||(s.prayer.prayer_type_id=r),I(r)}),D(33,Em,2,2,"option",4),f()()()(),u(34,"button",5),w("click",function(){E(e);let r=y();return I(r.updatePrayer())}),_(35,"Salveaz\u0103"),f()()()}if(n&2){let e=y();v(6),_e("",e.prayer.title," "),v(11),P("ngModel",e.prayer.title),v(5),P("ngModel",e.prayer.subtitle),v(5),P("ngModel",e.prayer.sequence),v(5),P("ngModel",e.prayer.prayer_type_id),v(),x("ngForOf",e.prayerTypes)}}function Mm(n,i){n&1&&(u(0,"p"),_(1,"Nu sunt sec\u021Biuni ad\u0103ugate"),f())}function km(n,i){if(n&1){let e=G();u(0,"li")(1,"p")(2,"a",15),_(3),f(),u(4,"button",5),w("click",function(){let r=E(e).$implicit,s=y().$implicit,o=y();return I(o.deleteSection(r.id,s.id))}),u(5,"i",16),_(6,"delete"),f()()()()}if(n&2){let e=i.$implicit;v(2),x("routerLink",Ze(3,ru,e.section==null?null:e.section.id)),v(),ve("",e.section==null?null:e.section.title," - ",e.section==null?null:e.section.subtitle,"")}}function Am(n,i){if(n&1&&(u(0,"option",14),_(1),f()),n&2){let e=i.$implicit;x("value",e.id),v(),ne(e.title)}}function Dm(n,i){if(n&1){let e=G();u(0,"li")(1,"label",17),_(2,"Sec\u021Biune existent\u0103:"),f(),u(3,"select",2),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.newPrayerSection.section_id,r)||(s.newPrayerSection.section_id=r),I(r)}),u(4,"option",18),_(5,"-- Alege\u021Bi --"),f(),D(6,Am,2,2,"option",4),f(),u(7,"button",5),w("click",function(){E(e);let r=y().$implicit,s=y();return I(s.addPrayerSection(r.id))}),u(8,"i",16),_(9,"save"),f()(),u(10,"button",5),w("click",function(){E(e);let r=y(2);return I(r.hideNewSubsectionForm())}),u(11,"i",16),_(12,"delete"),f()()()}if(n&2){let e=y(2);v(3),P("ngModel",e.newPrayerSection.section_id),v(3),x("ngForOf",e.sections)}}function Rm(n,i){if(n&1){let e=G();u(0,"li")(1,"label",17),_(2,"Titlu sec\u021Biune nou\u0103:"),f(),u(3,"input",6),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.newSectionTitle,r)||(s.newSectionTitle=r),I(r)}),f(),u(4,"button",5),w("click",function(){E(e);let r=y().$implicit,s=y();return I(s.addNewPrayerSection(r.id))}),u(5,"i",16),_(6,"save"),f()(),u(7,"button",5),w("click",function(){E(e);let r=y(2);return I(r.hideNewSubsectionForm())}),u(8,"i",16),_(9,"delete"),f()()()}if(n&2){let e=y(2);v(3),P("ngModel",e.newSectionTitle)}}function Om(n,i){if(n&1){let e=G();u(0,"li")(1,"p")(2,"a",15),_(3),f(),u(4,"span"),_(5),f(),u(6,"button",5),w("click",function(){let r=E(e).$implicit,s=y();return I(s.deleteSection(r.id))}),u(7,"i",16),_(8,"delete"),f()(),u(9,"button",5),w("click",function(){let r=E(e).$implicit,s=y();return I(s.displayNewSubsectionForm(r.id))}),u(10,"i",16),_(11,"add"),f()()(),u(12,"ul"),D(13,km,7,5,"li",1)(14,Dm,13,2,"li",0)(15,Rm,10,1,"li",0),f()()}if(n&2){let e=i.$implicit,t=y();v(2),x("routerLink",Ze(7,ru,e.section==null?null:e.section.id)),v(),ve("",e.section==null?null:e.section.title," ",!(e.section==null||e.section.subtitle==null)&&e.section.subtitle.length?"- "+(e.section==null?null:e.section.subtitle):"",""),v(2),ne(" "),v(8),x("ngForOf",e.subsections),v(),x("ngIf",(t.newPrayerSection==null?null:t.newPrayerSection.parent_id)===e.id),v(),x("ngIf",(t.newPrayerSection==null?null:t.newPrayerSection.parent_id)===e.id)}}function Pm(n,i){if(n&1&&(u(0,"option",14),_(1),f()),n&2){let e=i.$implicit;x("value",e.id),v(),ve("",e.title," ",e.subtitle!=null&&e.subtitle.length?"- "+e.subtitle:"","")}}function Nm(n,i){n&1&&(u(0,"p"),_(1,"Nu sunt grupe de dat\u0103 ad\u0103ugate"),f())}function Fm(n,i){if(n&1){let e=G();u(0,"li")(1,"p"),_(2),u(3,"button",5),w("click",function(){let r=E(e).$implicit,s=y();return I(s.deletePrayerDateGroup(r.id))}),u(4,"i",16),_(5,"delete"),f()()()()}if(n&2){let e=i.$implicit;v(2),ve(" ",e.date_group==null||e.date_group.date_group_type==null?null:e.date_group.date_group_type.name," - ",e.date_group==null?null:e.date_group.title," ")}}function Lm(n,i){if(n&1&&(u(0,"option",14),_(1),f()),n&2){let e=i.$implicit;x("value",e.id),v(),ve("",e.date_group_type==null?null:e.date_group_type.name," - ",e.title,"")}}var Ss=class n{constructor(i,e,t,r,s,o,l){this.route=i;this.prayersService=e;this.prayerTypesService=t;this.prayerSectionService=r;this.sectionsService=s;this.prayerDateGroupService=o;this.dateGroupService=l}dateGroups=[];prayerTypes=[];sections=[];prayer=null;id;newPrayerSection=null;newSectionTitle="";newSectionSubtitle="";newPrayerDateGroup=null;ngOnInit(){return h(this,null,function*(){this.id=this.route.snapshot.paramMap.get("id")||"",this.prayer=yield this.prayersService.getParyerWithSectionsRecursively(this.id),this.newPrayerSection={prayer_id:this.id,section_id:"",sequence:1},this.newPrayerDateGroup={prayer_id:this.id,date_group_id:0,sequence:1},yield this.getPrayerTypes(),yield this.getSections(),yield this.getDateGroups()})}getDateGroups(){return h(this,null,function*(){this.dateGroups=yield this.dateGroupService.getAll()})}getPrayerTypes(){return h(this,null,function*(){this.prayerTypes=yield this.prayerTypesService.getAll()})}getSections(){return h(this,null,function*(){this.sections=yield this.sectionsService.getAll()})}updatePrayer(){return h(this,null,function*(){if(!this.prayer)return;(yield this.prayersService.update(this.prayer.id,{title:this.prayer.title,subtitle:this.prayer.subtitle,sequence:this.prayer.sequence,prayer_type_id:this.prayer.prayer_type_id}))&&alert("Prayer updated successfully!")})}deletePrayer(){return h(this,null,function*(){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 rug\u0103ciune?"))try{yield this.prayersService.delete(this.prayer.id),location.href="/prayers"}catch(i){alert("Eroare la \u0219tergerea rug\u0103ciunii: "+i)}})}deleteSection(i,e=null){return h(this,null,function*(){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 sec\u021Biune?"))try{if(yield this.prayerSectionService.delete(i),e){let t=this.prayer.sections.find(r=>r.id===e);t&&(t.subsections=t.subsections?.filter(r=>r.id!==i)??[])}else this.prayer.sections=this.prayer.sections?.filter(t=>t.id!==i)??[]}catch(t){alert("Eroare la \u0219tergerea sec\u021Biunii: "+t)}})}displayNewSubsectionForm(i){this.newPrayerSection.parent_id=i}hideNewSubsectionForm(){this.newPrayerSection.parent_id=null,this.newPrayerSection.section_id=""}addPrayerSection(i=null){this.prayer&&(this.newPrayerSection=Y(C({},this.newPrayerSection),{parent_id:i,sequence:1}),this.prayerSectionService.create(this.newPrayerSection).then(e=>{if(this.newPrayerSection={prayer_id:this.id,section_id:"",sequence:1},i){let t=this.prayer.sections.find(r=>r.id===i);t&&t.subsections.push(e)}else this.prayer.sections.push(e)}).catch(e=>{alert("Error creating subsection: "+e)}))}addNewPrayerSection(i=null){this.newSectionTitle&&this.sectionsService.create({title:this.newSectionTitle,subtitle:this.newSectionSubtitle,audio_url:""}).then(e=>{this.newPrayerSection={prayer_id:this.id,section_id:e.id,sequence:1},this.addPrayerSection(i),this.newSectionTitle=""}).catch(e=>{alert("Error creating section: "+e)})}goBack(){window.history.back()}goToSection(i){location.href=`/sections/${i}`}deletePrayerDateGroup(i){if(this.prayer&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi aceast\u0103 grup\u0103 de dat\u0103?"))try{this.prayerDateGroupService.delete(i),this.prayer.date_groups=this.prayer.date_groups?.filter(e=>e.id!==i)??[]}catch(e){alert("Eroare la \u0219tergerea datei: "+e)}}addPrayerDateGroup(){this.prayer&&this.prayerDateGroupService.create(this.newPrayerDateGroup).then(i=>{this.newPrayerDateGroup={prayer_id:this.id,date_group_id:0,sequence:1},this.prayer.date_groups.push(i)}).catch(i=>{alert("Error creating date group: "+i)})}static \u0275fac=function(e){return new(e||n)(A(ke),A(Bi),A(ct),A(ys),A(Vt),A(bs),A(xs))};static \u0275cmp=X({type:n,selectors:[["app-prayer-detail"]],decls:44,vars:11,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["placeholder","Titlu",3,"ngModelChange","ngModel"],["placeholder","Subtitlu",3,"ngModelChange","ngModel"],["for","date_group"],["id","date_group",3,"ngModelChange","ngModel"],["value","0"],[1,"material-icons",2,"font-size","16px"],[2,"border-collapse","collapse","background","transparent"],["type","number",3,"ngModelChange","ngModel"],[3,"value"],[3,"routerLink"],[1,"material-icons",2,"font-size","12px"],["for","section"],["selected",""]],template:function(e,t){e&1&&(D(0,Im,36,6,"div",0),ie(1,"hr"),u(2,"div")(3,"div")(4,"h3"),_(5,"Sec\u021Biuni"),f(),D(6,Mm,2,0,"p",0),u(7,"ul"),D(8,Om,16,9,"li",1),f()(),ie(9,"hr"),u(10,"div")(11,"h4"),_(12,"Adaug\u0103 o sec\u021Biune existent\u0103"),f(),u(13,"select",2),F("ngModelChange",function(s){return N(t.newPrayerSection.section_id,s)||(t.newPrayerSection.section_id=s),s}),u(14,"option",3),_(15,"-- Alege\u021Bi --"),f(),D(16,Pm,2,3,"option",4),f(),u(17,"button",5),w("click",function(){return t.addPrayerSection()}),_(18,"Adaug\u0103"),f(),u(19,"h4"),_(20,"Creeaza \u0219i adaug\u0103 o sec\u021Biune nou\u0103"),f(),u(21,"input",6),F("ngModelChange",function(s){return N(t.newSectionTitle,s)||(t.newSectionTitle=s),s}),f(),u(22,"input",7),F("ngModelChange",function(s){return N(t.newSectionSubtitle,s)||(t.newSectionSubtitle=s),s}),f(),u(23,"button",5),w("click",function(){return t.addNewPrayerSection()}),_(24,"Adaug\u0103"),f()()(),ie(25,"hr"),u(26,"div")(27,"div")(28,"h3"),_(29,"Grupe de dat\u0103"),f(),D(30,Nm,2,0,"p",0),u(31,"ul"),D(32,Fm,6,2,"li",1),f(),u(33,"h4"),_(34,"Adaug\u0103 o nou\u0103 grup\u0103 de dat\u0103"),f(),u(35,"label",8),_(36,"Grup\u0103 de dat\u0103: "),f(),u(37,"select",9),F("ngModelChange",function(s){return N(t.newPrayerDateGroup.date_group_id,s)||(t.newPrayerDateGroup.date_group_id=s),s}),u(38,"option",10),_(39,"-- Alege\u021Bi --"),f(),D(40,Lm,2,3,"option",4),f(),ie(41,"br"),u(42,"button",5),w("click",function(){return t.addPrayerDateGroup()}),_(43,"Adaug\u0103"),f()()()),e&2&&(x("ngIf",t.prayer),v(6),x("ngIf",!(!(t.prayer==null||t.prayer.sections==null)&&t.prayer.sections.length)),v(2),x("ngForOf",t.prayer==null?null:t.prayer.sections),v(5),P("ngModel",t.newPrayerSection.section_id),v(3),x("ngForOf",t.sections),v(5),P("ngModel",t.newSectionTitle),v(),P("ngModel",t.newSectionSubtitle),v(8),x("ngIf",!(!(t.prayer==null||t.prayer.date_groups==null)&&t.prayer.date_groups.length)),v(2),x("ngForOf",t.prayer==null?null:t.prayer.date_groups),v(5),P("ngModel",t.newPrayerDateGroup.date_group_id),v(3),x("ngForOf",t.dateGroups))},dependencies:[ae,we,Ue,me,Ft,Lt,de,ir,lt,pe,ue,kc,Be],styles:["h2[_ngcontent-%COMP%]{margin-bottom:1rem}"]})};function Vm(n,i){if(n&1){let e=G();pt(0),u(1,"p"),_(2),u(3,"button",3),w("click",function(){E(e);let r=y();return I(r.enableEdit())}),u(4,"i",4),_(5,"edit"),f()(),u(6,"button",3),w("click",function(){E(e);let r=y();return I(r.addSubtype())}),u(7,"i",4),_(8,"add"),f()(),u(9,"button",3),w("click",function(){E(e);let r=y();return I(r.deleteType())}),u(10,"i",4),_(11,"delete"),f()()(),mt()}if(n&2){let e=y();v(2),_e(" ",e.node.type," ")}}function jm(n,i){if(n&1){let e=G();u(0,"input",5),F("ngModelChange",function(r){E(e);let s=y();return N(s.tempName,r)||(s.tempName=r),I(r)}),f(),u(1,"button",3),w("click",function(){E(e);let r=y();return I(r.saveEdit())}),u(2,"i",4),_(3,"save"),f()(),u(4,"button",3),w("click",function(){E(e);let r=y();return I(r.cancelEdit())}),u(5,"i",4),_(6,"cancel"),f()()}if(n&2){let e=y();P("ngModel",e.tempName)}}function Um(n,i){if(n&1){let e=G();u(0,"li")(1,"app-prayer-type-subitem",7),w("refreshNeeded",function(){E(e);let r=y(2);return I(r.onChildRefreshNeeded())}),f()()}if(n&2){let e=i.$implicit;v(),x("node",e)}}function $m(n,i){if(n&1&&(u(0,"ul"),D(1,Um,2,1,"li",6),f()),n&2){let e=y();v(),x("ngForOf",e.node.subtypes)}}var ws=class n{constructor(i){this.prayerTypeService=i}node;refreshNeeded=new he;isEditing=!1;tempName="";enableEdit(){this.isEditing=!0,this.tempName=this.node.type}cancelEdit(){this.isEditing=!1,this.tempName=""}saveEdit(){return h(this,null,function*(){let i=this.tempName.trim();if(!i){alert("Name cannot be empty");return}try{yield this.prayerTypeService.update(this.node.id,{type:i}),this.node.type=i,this.isEditing=!1,this.refreshNeeded.emit()}catch(e){console.error("Error updating prayer type:",e)}})}addSubtype(){return h(this,null,function*(){let i=prompt("Enter subtype name:");if(i)try{yield this.prayerTypeService.create({type:i,parent_type_id:this.node.id,sequence:1}),this.refreshNeeded.emit()}catch(e){console.error("Error creating subtype:",e)}})}deleteType(){return h(this,null,function*(){if(confirm(`Are you sure you want to delete "${this.node.type}"?`))try{yield this.prayerTypeService.delete(this.node.id),this.refreshNeeded.emit()}catch(i){console.error("Error deleting prayer type:",i)}})}onChildRefreshNeeded(){this.refreshNeeded.emit()}static \u0275fac=function(e){return new(e||n)(A(ct))};static \u0275cmp=X({type:n,selectors:[["app-prayer-type-subitem"]],inputs:{node:"node"},outputs:{refreshNeeded:"refreshNeeded"},decls:4,vars:3,consts:[["editMode",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"click"],[1,"material-icons",2,"font-size","14px"],[3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"refreshNeeded","node"]],template:function(e,t){if(e&1&&D(0,Vm,12,1,"ng-container",1)(1,jm,7,1,"ng-template",null,0,to)(3,$m,2,1,"ul",2),e&2){let r=eo(2);x("ngIf",!t.isEditing)("ngIfElse",r),v(3),x("ngIf",t.node.subtypes==null?null:t.node.subtypes.length)}},dependencies:[n,ae,we,Ue,me,de,pe,ue],encapsulation:2})};function Bm(n,i){if(n&1){let e=G();u(0,"li")(1,"app-prayer-type-subitem",4),w("refreshNeeded",function(){E(e);let r=y();return I(r.onRefreshNeeded())}),f()()}if(n&2){let e=i.$implicit;v(),x("node",e)}}var Cs=class n{constructor(i){this.prayerTypeService=i}prayerTypes=[];newRootTypeName="";ngOnInit(){return h(this,null,function*(){yield this.loadData()})}loadData(){return h(this,null,function*(){try{this.prayerTypes=yield this.prayerTypeService.getTree()}catch(i){console.error("Error loading prayer types:",i)}})}addRootType(){return h(this,null,function*(){let i=this.newRootTypeName.trim();if(i)try{yield this.prayerTypeService.create({type:i,parent_type_id:null,sequence:1}),this.newRootTypeName="",yield this.loadData()}catch(e){console.error("Error creating root type:",e)}})}onRefreshNeeded(){return h(this,null,function*(){yield this.loadData()})}static \u0275fac=function(e){return new(e||n)(A(ct))};static \u0275cmp=X({type:n,selectors:[["app-prayer-types-list"]],decls:10,vars:2,consts:[[2,"margin-bottom","1rem"],["type","text","placeholder","Nou tip de rug\u0103ciune",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[3,"refreshNeeded","node"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h2"),_(2,"Tipuri de rug\u0103ciuni"),f(),u(3,"label"),_(4,"Adaug\u0103 un tip nou de rug\u0103ciune: "),f(),u(5,"input",1),F("ngModelChange",function(s){return N(t.newRootTypeName,s)||(t.newRootTypeName=s),s}),f(),u(6,"button",2),w("click",function(){return t.addRootType()}),_(7,"Adaug\u0103"),f()(),u(8,"ul"),D(9,Bm,2,1,"li",3),f()),e&2&&(v(5),P("ngModel",t.newRootTypeName),v(4),x("ngForOf",t.prayerTypes))},dependencies:[ae,we,me,de,pe,ue,ws],encapsulation:2})};var dt=class n{constructor(i,e){this.auth=i;this.router=e}canActivate(){return this.auth.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||n)(R(at),R(be))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function Hm(n,i){if(n&1&&(u(0,"div",8),_(1),f()),n&2){let e=y();v(),_e(" ",e.errorMsg," ")}}var Ts=class n{constructor(i,e){this.authService=i;this.router=e}email="";password="";errorMsg="";ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/prayer-types"])}onLogin(){return h(this,null,function*(){this.errorMsg="";try{yield this.authService.signIn(this.email,this.password),this.router.navigate(["/prayers"])}catch(i){this.errorMsg=i.message||"Login failed",console.error("Login error:",i)}})}static \u0275fac=function(e){return new(e||n)(A(at),A(be))};static \u0275cmp=X({type:n,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"container"],[1,"login-container"],["style","color:red;",4,"ngIf"],[1,"form-container",3,"ngSubmit"],[1,"input-container"],["name","email","type","email",3,"ngModelChange","ngModel"],["name","password","type","password",3,"ngModelChange","ngModel"],["type","submit"],[2,"color","red"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"div",1)(2,"h2"),_(3,"Admin Login"),f(),D(4,Hm,2,1,"div",2),u(5,"form",3),w("ngSubmit",function(){return t.onLogin()}),u(6,"div",4)(7,"label"),_(8,"Email:"),f(),u(9,"input",5),F("ngModelChange",function(s){return N(t.email,s)||(t.email=s),s}),f()(),u(10,"div",4),_(11,"` "),u(12,"label"),_(13,"Password:"),f(),u(14,"input",6),F("ngModelChange",function(s){return N(t.password,s)||(t.password=s),s}),f()(),u(15,"button",7),_(16,"Login"),f()()()()),e&2&&(v(4),x("ngIf",t.errorMsg),v(5),P("ngModel",t.email),v(5),P("ngModel",t.password))},dependencies:[ae,Ue,me,eu,de,pe,Yd,ue,Ma],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100vw;height:100vh}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;border:1px solid black;padding:1rem;height:min-content;border-radius:5px;gap:.5rem}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border-radius:5px;border:1px solid black}.container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;border-radius:5px;border:1px solid black;cursor:pointer;margin-top:1rem}"]})};var Aa=(e=>(e.PLAIN="PlainText",e.QUOTE="Quote",e))(Aa||{});var jt=class n extends re{constructor(e){super(e);this.supabase=e}tableName="liturgical_texts";getById(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).select("*, texts: text_elements(*)").order("sequence",{foreignTable:"text_elements"}).eq("id",e).single();if(r)throw r;return t})}getAll(){return h(this,null,function*(){let{data:e,error:t}=yield this.client.from(this.tableName).select("*").order("title",{ascending:!0});if(t)throw t;return e??[]})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Es=class n extends re{constructor(e){super(e);this.supabase=e}tableName="text_elements";updateSequence(e,t){return h(this,null,function*(){return this.update(e,{sequence:t})})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function Gm(n,i){if(n&1){let e=G();u(0,"div")(1,"h2")(2,"button",10),w("click",function(){E(e);let r=y();return I(r.goBack())}),u(3,"i",11),_(4,"arrow_back"),f()(),_(5),u(6,"button",10),w("click",function(){E(e);let r=y();return I(r.deleteText())}),u(7,"i",12),_(8,"delete"),f()()(),u(9,"p"),_(10," Schimb\u0103 titlul: "),u(11,"input",13),F("ngModelChange",function(r){E(e);let s=y();return N(s.text.title,r)||(s.text.title=r),I(r)}),f(),ie(12,"br"),u(13,"button",10),w("click",function(){E(e);let r=y();return I(r.saveTitle())}),_(14,"Salveaz\u0103"),f()()()}if(n&2){let e=y();v(5),_e(" ",e.textTitle," "),v(6),P("ngModel",e.text.title)}}function Wm(n,i){n&1&&(u(0,"p"),_(1,"Nu sunt texte ad\u0103ugate"),f())}function qm(n,i){if(n&1&&(u(0,"option",16),_(1),f()),n&2){let e=i.$implicit;x("value",e),v(),ne(e)}}function Ym(n,i){if(n&1){let e=G();u(0,"p")(1,"textarea",14),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editedTextElement.text,r)||(s.editedTextElement.text=r),I(r)}),f(),u(2,"label",5),_(3,"Eviden\u021Biere prima liter\u0103: "),f(),u(4,"input",6),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editedTextElement.highlight,r)||(s.editedTextElement.highlight=r),I(r)}),f(),u(5,"label",7),_(6,"Tip text: "),f(),u(7,"select",8),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editedTextElement.type,r)||(s.editedTextElement.type=r),I(r)}),D(8,qm,2,2,"option",9),f(),u(9,"button",10),w("click",function(){E(e);let r=y().index,s=y();return I(s.editTextElement(r))}),u(10,"i",15),_(11,"save"),f()(),u(12,"button",10),w("click",function(){E(e);let r=y(2);return I(r.clearEditedTextElement())}),u(13,"i",15),_(14,"cancel"),f()()()}if(n&2){let e=y(2);v(),P("ngModel",e.editedTextElement.text),v(3),P("ngModel",e.editedTextElement.highlight),v(3),P("ngModel",e.editedTextElement.type),v(),x("ngForOf",e.textTypes)}}function Km(n,i){n&1&&(u(0,"span"),_(1,"\u201E"),f())}function Zm(n,i){if(n&1&&(u(0,"span")(1,"b",20),_(2),f(),_(3),f()),n&2){let e=y(2).$implicit;v(2),ne(e.text[0]),v(),ne(e.text.slice(1))}}function Qm(n,i){if(n&1&&(u(0,"span"),_(1),f()),n&2){let e=y(2).$implicit;v(),ne(e.text)}}function Jm(n,i){n&1&&(u(0,"span"),_(1,"\u201D"),f())}function Xm(n,i){if(n&1){let e=G();u(0,"p"),D(1,Km,2,0,"span",0)(2,Zm,4,2,"span",0)(3,Qm,2,1,"span",0)(4,Jm,2,0,"span",0),u(5,"span",17)(6,"button",18),w("click",function(){E(e);let r=y().index,s=y();return I(s.moveUp(r))}),_(7,"\u2191"),f(),u(8,"button",19),w("click",function(){E(e);let r=y().index,s=y();return I(s.moveDown(r))}),_(9,"\u2193"),f(),u(10,"button",10),w("click",function(){E(e);let r=y(),s=r.$implicit,o=r.index,l=y();return I(l.deleteTextElement(s.id,o))}),u(11,"i",15),_(12,"delete"),f()(),u(13,"button",10),w("click",function(){E(e);let r=y().$implicit,s=y();return I(s.setEditedTextElement(r))}),u(14,"i",15),_(15,"edit"),f()()()()}if(n&2){let e=y(),t=e.$implicit,r=e.index,s=y();v(),x("ngIf",t.type=="Quote"),v(),x("ngIf",t.highlight),v(),x("ngIf",!t.highlight),v(),x("ngIf",t.type=="Quote"),v(2),x("disabled",r===0),v(2),x("disabled",r===(s.text==null?null:s.text.texts.length)-1)}}function eg(n,i){if(n&1&&(u(0,"li"),D(1,Ym,15,4,"p",0)(2,Xm,16,6,"p",0),f()),n&2){let e=i.$implicit,t=y();v(),x("ngIf",(t.editedTextElement==null?null:t.editedTextElement.id)&&e.id==(t.editedTextElement==null?null:t.editedTextElement.id)),v(),x("ngIf",!(t.editedTextElement!=null&&t.editedTextElement.id)||e.id!=(t.editedTextElement==null?null:t.editedTextElement.id))}}function tg(n,i){if(n&1&&(u(0,"option",16),_(1),f()),n&2){let e=i.$implicit;x("value",e),v(),ne(e)}}var Is=class n{constructor(i,e,t){this.route=i;this.litTextService=e;this.textElementsService=t}textId;text=null;editedTitle="";newTextElement=null;editedTextElement=null;sectionStartTime=0;textTypes=Object.values(Aa);textTitle="";ngOnInit(){return h(this,null,function*(){this.textId=this.route.snapshot.paramMap.get("id")||"",this.sectionStartTime=parseInt(this.route.snapshot.paramMap.get("sectionStartTime")||"0"),this.newTextElement={text_id:this.textId,type:"PlainText"},this.editedTextElement={},yield this.loadLiturgicalText()})}loadLiturgicalText(){return h(this,null,function*(){this.text=yield this.litTextService.getById(this.textId),this.textTitle=this.text?.title??""})}loadTextElements(){return h(this,null,function*(){if(!this.text)return;let{data:i,error:e}=yield this.textElementsService.client.from("text_elements").select("*").eq("text_id",this.text.id).order("sequence");!e&&i&&(this.text.texts=i)})}saveTitle(){return h(this,null,function*(){if(this.text)try{(yield this.litTextService.update(this.text.id,{title:this.text.title??null}))&&(alert("Textul a fost salvat!"),this.textTitle=this.text.title??"")}catch(i){console.error("Error updating title:",i)}})}addTextElement(){return h(this,null,function*(){if(!this.textId)return;let i=this.newTextElement?.text.trim();if(i)try{let e=0;this.text?.texts&&this.text.texts.length>0&&(e=Math.max(...this.text.texts.map(t=>t.sequence))),yield this.textElementsService.create({text:i,sequence:e+1,text_id:this.textId,type:this.newTextElement?.type??"PlainText",highlight:this.newTextElement?.highlight??!1}),this.newTextElement={text_id:this.textId,type:"PlainText"},yield this.loadTextElements()}catch(e){console.error("Error adding text element:",e)}})}goBack(){history.back()}deleteText(){return h(this,null,function*(){if(this.text&&confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi acest text? Nu \xEEl po\u021Bi recupera ulterior!"))try{yield this.litTextService.delete(this.text.id),location.href="/liturgicalTexts"}catch(i){console.error("Error deleting text:",i)}})}deleteTextElement(i,e){return h(this,null,function*(){if(confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi acest text? Nu \xEEl po\u021Bi recupera ulterior!"))try{yield this.textElementsService.delete(i),this.text?.texts?.splice(e,1)}catch(t){console.error("Error deleting text element:",t)}})}setEditedTextElement(i){this.editedTextElement=C({},i)}clearEditedTextElement(){this.editedTextElement={}}editTextElement(i){return h(this,null,function*(){if(!(!this.editedTextElement?.id||!this.editedTextElement.text))try{yield this.textElementsService.update(this.editedTextElement.id,C({},this.editedTextElement)),this.text?.texts?.splice(i,1,C({},this.editedTextElement)),this.editedTextElement={}}catch(e){alert("A intervenit o eroare: "+e.message)}})}moveUp(i){return h(this,null,function*(){if(!this.text?.texts||i===0)return;let e=this.text.texts[i],t=this.text.texts[i-1];try{let r=e.sequence;e.sequence=t.sequence,t.sequence=r,yield this.textElementsService.update(e.id,{sequence:e.sequence}),yield this.textElementsService.update(t.id,{sequence:t.sequence}),this.text.texts[i]=t,this.text.texts[i-1]=e}catch(r){console.error("Error moving element up:",r)}})}moveDown(i){return h(this,null,function*(){if(!this.text?.texts||i===this.text.texts.length-1)return;let e=this.text.texts[i],t=this.text.texts[i+1];try{let r=e.sequence;e.sequence=t.sequence,t.sequence=r,yield this.textElementsService.update(e.id,{sequence:e.sequence}),yield this.textElementsService.update(t.id,{sequence:t.sequence}),this.text.texts[i]=t,this.text.texts[i+1]=e}catch(r){console.error("Error moving element down:",r)}})}secondsToTimeFormat(i){let e=Math.floor(i/60),t=i%60;return`${e}:${t<10?"0"+t:t}`}static \u0275fac=function(e){return new(e||n)(A(ke),A(jt),A(Es))};static \u0275cmp=X({type:n,selectors:[["app-liturgical-text-detail"]],decls:24,vars:7,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"margin-top","1rem"],["for","text"],["id","text","rows","4",2,"width","100%",3,"ngModelChange","ngModel"],["for","highlight"],["id","highlight","type","checkbox",3,"ngModelChange","ngModel"],["for","type"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["title","\xCEnapoi",1,"material-icons",2,"font-size","16px"],["title","\u0218terge",1,"material-icons",2,"font-size","16px"],[2,"width","fit-content",3,"ngModelChange","ngModel"],["rows","4",2,"width","100%",3,"ngModelChange","ngModel"],["title","\u0218terge",1,"material-icons",2,"font-size","12px"],[3,"value"],[2,"display","inline","margin-left","1rem"],["title","Mut\u0103 \xEEn sus",3,"click","disabled"],["title","Mut\u0103 \xEEn jos",3,"click","disabled"],[2,"font-size","24px"]],template:function(e,t){e&1&&(D(0,Gm,15,2,"div",0),ie(1,"hr"),u(2,"div")(3,"h3"),_(4,"Texte"),f(),D(5,Wm,2,0,"p",0),u(6,"ol"),D(7,eg,3,2,"li",1),f()(),u(8,"div",2)(9,"h4"),_(10,"Adaug\u0103 un text nou"),f(),u(11,"label",3),_(12,"Text:"),f(),u(13,"textarea",4),F("ngModelChange",function(s){return N(t.newTextElement.text,s)||(t.newTextElement.text=s),s}),f(),u(14,"label",5),_(15,"Eviden\u021Biere prima liter\u0103: "),f(),u(16,"input",6),F("ngModelChange",function(s){return N(t.newTextElement.highlight,s)||(t.newTextElement.highlight=s),s}),f(),u(17,"label",7),_(18,"Tip text: "),f(),u(19,"select",8),F("ngModelChange",function(s){return N(t.newTextElement.type,s)||(t.newTextElement.type=s),s}),D(20,tg,2,2,"option",9),f(),ie(21,"br"),u(22,"button",10),w("click",function(){return t.addTextElement()}),_(23,"Adaug\u0103"),f()()),e&2&&(x("ngIf",t.text),v(5),x("ngIf",!(!(t.text==null||t.text.texts==null)&&t.text.texts.length)),v(2),x("ngForOf",t.text==null?null:t.text.texts),v(6),P("ngModel",t.newTextElement.text),v(3),P("ngModel",t.newTextElement.highlight),v(3),P("ngModel",t.newTextElement.type),v(),x("ngForOf",t.textTypes))},dependencies:[ae,we,Ue,me,Ft,Lt,de,wa,lt,pe,ue],encapsulation:2})};var ig=()=>[10,15,25],ng=n=>["/liturgicalTexts",n];function rg(n,i){if(n&1&&(u(0,"li")(1,"a",9),_(2),f()()),n&2){let e=i.$implicit;v(),x("routerLink",Ze(2,ng,e.id)),v(),_e(" ",e.title?e.title:"F\u0103r\u0103 Titlu"," ")}}function sg(n,i){if(n&1&&(u(0,"option",10),_(1),f()),n&2){let e=i.$implicit;x("value",e),v(),ne(e)}}var Ms=class n{constructor(i){this.litTextService=i}liturgicalTexts=[];newLiturgicalTextName="";searchText="";currentPage=1;totalPages=1;pageSize=10;ngOnInit(){return h(this,null,function*(){yield this.loadData(),yield this.getTotalPages()})}getTotalPages(){return h(this,null,function*(){let i=yield this.litTextService.count();this.totalPages=Math.ceil(i/this.pageSize)})}loadData(){return h(this,null,function*(){this.liturgicalTexts=yield this.litTextService.getPaginated(this.currentPage,this.pageSize,this.searchText.length?[{field:"title",operator:"ilike",value:`%${this.searchText}%`}]:[])})}addLitirgucalText(){return h(this,null,function*(){let i=this.newLiturgicalTextName.trim()??null;try{let e=yield this.litTextService.create({title:i.length>0?i:void 0});this.newLiturgicalTextName="",this.liturgicalTexts.splice(0,0,e)}catch(e){alert("Error creating root type: "+e)}})}searchByTitle(){return h(this,null,function*(){if(this.searchText.length===0){yield this.loadData(),yield this.getTotalPages();return}this.currentPage=1,this.totalPages=1,this.loadData()})}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadData())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadData())}changedPageSize(){this.currentPage=1,this.loadData(),this.getTotalPages()}static \u0275fac=function(e){return new(e||n)(A(jt))};static \u0275cmp=X({type:n,selectors:[["app-liturgical-texts-list"]],decls:24,vars:10,consts:[[2,"margin-bottom","1rem"],["type","text","placeholder","Caut\u0103 dup\u0103 titlu",3,"input","ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"click","disabled"],["title","\u0218terge",1,"material-icons",2,"font-size","12px"],["type","text","placeholder","Text liturgic nou",3,"ngModelChange","ngModel"],[2,"margin-left","1rem",3,"click"],[3,"routerLink"],[3,"value"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h2"),_(2,"Texte liturgice"),f(),u(3,"label"),_(4,"Caut\u0103 dup\u0103 titlu: "),f(),u(5,"input",1),w("input",function(){return t.searchByTitle()}),F("ngModelChange",function(s){return N(t.searchText,s)||(t.searchText=s),s}),f(),u(6,"ul"),D(7,rg,3,4,"li",2),f(),u(8,"p")(9,"span"),_(10),f(),u(11,"select",3),F("ngModelChange",function(s){return N(t.pageSize,s)||(t.pageSize=s),s}),w("change",function(){return t.changedPageSize()}),D(12,sg,2,2,"option",4),f(),u(13,"button",5),w("click",function(){return t.previousPage()}),u(14,"i",6),_(15,"arrow_left"),f()(),u(16,"button",5),w("click",function(){return t.nextPage()}),u(17,"i",6),_(18,"arrow_right"),f()()(),u(19,"label"),_(20,"Adaug\u0103 un text nou: "),f(),u(21,"input",7),F("ngModelChange",function(s){return N(t.newLiturgicalTextName,s)||(t.newLiturgicalTextName=s),s}),f(),u(22,"button",8),w("click",function(){return t.addLitirgucalText()}),_(23,"Adaug\u0103"),f()()),e&2&&(v(5),P("ngModel",t.searchText),v(2),x("ngForOf",t.liturgicalTexts),v(3),ve("Pagina ",t.currentPage,"/",t.totalPages,", Rug\u0103ciuni per pagin\u0103: "),v(),P("ngModel",t.pageSize),v(),x("ngForOf",al(9,ig)),v(),x("disabled",t.currentPage===1),v(3),x("disabled",t.currentPage===t.totalPages),v(5),P("ngModel",t.newLiturgicalTextName))},dependencies:[ae,we,Be,me,Ft,Lt,de,lt,pe,ue],encapsulation:2})};var og=n=>["/sections",n];function ag(n,i){if(n&1&&(u(0,"li")(1,"a",4)(2,"p"),_(3),f()()()),n&2){let e=i.$implicit;v(),x("routerLink",Ze(3,og,e.id)),v(2),ve(" ",e.title," ",e.subtitle?" - "+e.subtitle:""," ")}}var ks=class n{constructor(i){this.sectionsService=i}sections=[];newSectionTitle="";ngOnInit(){return h(this,null,function*(){yield this.loadSections()})}loadSections(){return h(this,null,function*(){this.sections=yield this.sectionsService.getAll()})}addSection(){return h(this,null,function*(){let i=this.newSectionTitle.trim();if(i)try{yield this.sectionsService.create({title:i,audio_url:"",subtitle:null,image_url:null}),this.newSectionTitle="",yield this.loadSections()}catch(e){console.error("Eroare la crearea noii sec\u021Biuni:",e)}})}static \u0275fac=function(e){return new(e||n)(A(Vt))};static \u0275cmp=X({type:n,selectors:[["app-sections-list"]],decls:11,vars:2,consts:[["for","newSectionTitle"],["id","newSectionTitle",3,"ngModelChange","ngModel"],[2,"margin-left","1rem",3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){e&1&&(u(0,"div")(1,"h2"),_(2,"Sec\u021Biuni"),f(),u(3,"p")(4,"label",0),_(5,"Ad\u0103uga\u021Bi o sec\u021Biune nou\u0103: "),f(),u(6,"input",1),F("ngModelChange",function(s){return N(t.newSectionTitle,s)||(t.newSectionTitle=s),s}),f(),u(7,"button",2),w("click",function(){return t.addSection()}),_(8," Ad\u0103uga\u021Bi "),f()(),u(9,"ul"),D(10,ag,4,5,"li",3),f()()),e&2&&(v(6),P("ngModel",t.newSectionTitle),v(4),x("ngForOf",t.sections))},dependencies:[ae,we,me,de,pe,ue,Be],encapsulation:2})};var As=class n{constructor(i,e){this.el=i;this.renderer=e;this.renderer.setAttribute(this.el.nativeElement,"placeholder","mm:ss")}_value=0;onChange=()=>{};onTouched=()=>{};timeBlur=new he;onBlur(i){this._value=this.parseValue(i),this.onChange(this._value),this.onTouched(),this.timeBlur.emit(this._value);let e=this.formatValue(i);this.renderer.setProperty(this.el.nativeElement,"value",e)}writeValue(i){this._value=i||0;let e=this.formatValueFromSeconds(this._value);this.renderer.setProperty(this.el.nativeElement,"value",e)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}parseValue(i){let e=i.split(":"),t=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10);return t*60+r}formatValue(i){let e=i.split(":"),t=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10);return r>=60&&(t+=Math.floor(r/60),r=r%60),`${this.pad(t)}:${this.pad(r)}`}formatValueFromSeconds(i){let e=Math.floor(i/60),t=i%60;return`${this.pad(e)}:${this.pad(t)}`}pad(i){return i<10?"0"+i:i.toString()}static \u0275fac=function(e){return new(e||n)(A(Pe),A(Ye))};static \u0275dir=K({type:n,selectors:[["","timeInput",""]],hostBindings:function(e,t){e&1&&w("blur",function(s){return t.onBlur(s.target.value)})},outputs:{timeBlur:"timeBlur"},features:[Te([{provide:Nt,useExisting:et(()=>n),multi:!0}])]})};var Ds=class n{transform(i){let e=Math.floor(i/60),t=i%60;return`${e}:${t.toString().padStart(2,"0")}`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Qs({name:"timeFormat",type:n,pure:!0})};function Ra(n){return Array.isArray(n)?n:[n]}var Oa;try{Oa=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Oa=!1}var Rs=(()=>{class n{_platformId=k(Ht);isBrowser=this._platformId?_l(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Oa)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var su=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({})}return n})();var lg=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ou=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({providers:[lg]})}return n})();var au=new Set,si,cg=(()=>{class n{_platform=k(Rs);_nonce=k(qi,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ug}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&dg(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dg(n,i){if(!au.has(n))try{si||(si=document.createElement("style"),i&&si.setAttribute("nonce",i),si.setAttribute("type","text/css"),document.head.appendChild(si)),si.sheet&&(si.sheet.insertRule(`@media ${n} {body{ }}`,0),au.add(n))}catch(e){console.error(e)}}function ug(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var cu=(()=>{class n{_mediaMatcher=k(cg);_zone=k(Me);_queries=new Map;_destroySubject=new Ve;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return lu(Ra(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=lu(Ra(e)).map(o=>this._registerQuery(o).observable),s=li(r);return s=ar(s.pipe(Tt(1)),s.pipe(Ya(1),za(0))),s.pipe(H(o=>{let l={matches:!1,breakpoints:{}};return o.forEach(({matches:a,query:c})=>{l.matches=l.matches||a,l.breakpoints[c]=a}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let t=this._mediaMatcher.matchMedia(e),s={observable:new Ua(o=>{let l=a=>this._zone.run(()=>o.next(a));return t.addListener(l),()=>{t.removeListener(l)}}).pipe(cr(t),H(({matches:o})=>({query:e,matches:o})),dr(this._destroySubject)),mql:t};return this._queries.set(e,s),s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lu(n){return n.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}var oi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(oi||{}),du="cdk-high-contrast-black-on-white",uu="cdk-high-contrast-white-on-black",Pa="cdk-high-contrast-active",hu=(()=>{class n{_platform=k(Rs);_hasCheckedHighContrastMode;_document=k(ye);_breakpointSubscription;constructor(){this._breakpointSubscription=k(cu).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return oi.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let t=this._document.defaultView||window,r=t&&t.getComputedStyle?t.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return oi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return oi.BLACK_ON_WHITE}return oi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Pa,du,uu),this._hasCheckedHighContrastMode=!0;let t=this.getHighContrastMode();t===oi.BLACK_ON_WHITE?e.add(Pa,du):t===oi.WHITE_ON_BLACK&&e.add(Pa,uu)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Na=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({})}return n})();var Hi=(()=>{class n{constructor(){k(hu)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({imports:[Na,Na]})}return n})();var nr=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({imports:[Hi,ou,Hi]})}return n})();var pu=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=se({imports:[Hi,nr,nr,su,Hi]})}return n})();var Os=class n extends re{constructor(e){super(e);this.supabase=e}tableName="section_texts";create(e){return h(this,null,function*(){let{data:t,error:r}=yield this.client.from(this.tableName).insert([e]).select("*, text: liturgical_texts(*), section_text_elements(*, text_element: text_elements(*))").single();if(r)throw r;return t})}static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ps=class n extends re{constructor(e){super(e);this.supabase=e}tableName="section_text_elements";static \u0275fac=function(t){return new(t||n)(R(Q))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var yg=n=>["/liturgicalTexts",n];function bg(n,i){if(n&1&&(u(0,"audio",30),ie(1,"source",31),_(2," Your browser does not support the audio element."),f()),n&2){let e=y(2);v(),x("src",e.section.audio_url,Ks)}}function xg(n,i){if(n&1&&ie(0,"img",32),n&2){let e=y(2);x("src",e.section.image_url,Ks)}}function Sg(n,i){if(n&1){let e=G();u(0,"div")(1,"h2")(2,"button",19),w("click",function(){E(e);let r=y();return I(r.goBack())}),u(3,"i",20),_(4,"arrow_back"),f()(),_(5),u(6,"button",19),w("click",function(){E(e);let r=y();return I(r.deleteSection())}),u(7,"i",21),_(8,"delete"),f()()(),u(9,"div",22)(10,"div")(11,"table",23)(12,"tr")(13,"td")(14,"label"),_(15,"Titlu:"),f()(),u(16,"td")(17,"input",24),F("ngModelChange",function(r){E(e);let s=y();return N(s.editedTitle,r)||(s.editedTitle=r),I(r)}),f()()(),u(18,"tr")(19,"td")(20,"label"),_(21,"Subtitlu:"),f()(),u(22,"td")(23,"input",24),F("ngModelChange",function(r){E(e);let s=y();return N(s.editedSubtitle,r)||(s.editedSubtitle=r),I(r)}),f()()(),u(24,"tr")(25,"td")(26,"label"),_(27,"Audio URL:"),f()(),u(28,"td")(29,"input",24),F("ngModelChange",function(r){E(e);let s=y();return N(s.editedAudioUrl,r)||(s.editedAudioUrl=r),I(r)}),f()(),u(30,"td")(31,"input",25),w("change",function(r){E(e);let s=y();return I(s.onFileSelected(r))}),f()()(),u(32,"tr")(33,"td")(34,"label"),_(35,"URL Imagine:"),f()(),u(36,"td")(37,"input",24),F("ngModelChange",function(r){E(e);let s=y();return N(s.editedImageUrl,r)||(s.editedImageUrl=r),I(r)}),f()()(),u(38,"tr")(39,"td",26)(40,"button",19),w("click",function(){E(e);let r=y();return I(r.saveSection())}),ie(41,"i",27),_(42," Salveaz\u0103 "),f()()()(),D(43,bg,3,1,"audio",28),f(),D(44,xg,1,1,"img",29),f()()}if(n&2){let e=y();v(5),ve("",e.section.title," ",e.section.subtitle!==null?" - "+e.section.subtitle:""," "),v(12),P("ngModel",e.editedTitle),v(6),P("ngModel",e.editedSubtitle),v(6),P("ngModel",e.editedAudioUrl),v(8),P("ngModel",e.editedImageUrl),v(6),x("ngIf",e.section.audio_url),v(),x("ngIf",e.section.image_url)}}function wg(n,i){if(n&1&&(u(0,"h4"),_(1),u(2,"a",39),_(3),f(),u(4,"span",40),_(5),Mt(6,"timeFormat"),Mt(7,"timeFormat"),f()()),n&2){let e,t=y(2),r=t.$implicit,s=t.index;v(),ve(" ",s+1,". ",(r==null?null:r.repetition)>1?r.repetition+" x":""," "),v(),x("routerLink",Ze(10,yg,r.liturgical_text_id)),v(),_e(" ",!(r==null||r.text==null||r.text.title==null)&&r.text.title.length?r==null||r.text==null?null:r.text.title:"F\u0103r\u0103 Titlu",", "),v(2),ve(" ",kt(6,6,(e=r.start_time)!==null&&e!==void 0?e:0)," \u2192 ",kt(7,8,(e=r.end_time)!==null&&e!==void 0?e:0)," ")}}function Cg(n,i){if(n&1&&(pt(0),D(1,wg,8,12,"h4",0),mt()),n&2){let e=y(2);v(),x("ngIf",e.allLitTexts&&e.allLitTexts.length)}}function Tg(n,i){if(n&1){let e=G();pt(0),u(1,"span"),_(2),u(3,"label"),_(4,"Repet\u0103ri: "),f(),u(5,"input",41),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editingSectionText.repetition,r)||(s.editingSectionText.repetition=r),I(r)}),f()(),u(6,"span",40)(7,"input",42),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editingSectionText.start_time,r)||(s.editingSectionText.start_time=r),I(r)}),f(),_(8," \u2192 "),u(9,"input",43),F("ngModelChange",function(r){E(e);let s=y(2);return N(s.editingSectionText.end_time,r)||(s.editingSectionText.end_time=r),I(r)}),f()(),mt()}if(n&2){let e=y(),t=e.$implicit,r=e.index,s=y();v(2),ve(" ",r+1,". ",t.text==null?null:t.text.title,", "),v(3),P("ngModel",s.editingSectionText.repetition),v(2),P("ngModel",s.editingSectionText.start_time),v(2),P("ngModel",s.editingSectionText.end_time)}}function Eg(n,i){if(n&1){let e=G();u(0,"button",19),w("click",function(){E(e);let r=y(2).$implicit,s=y();return I(s.playSectionText(r))}),u(1,"i",50),_(2,"play_arrow"),f()()}}function Ig(n,i){if(n&1){let e=G();u(0,"button",19),w("click",function(){E(e);let r=y(3);return I(r.pauseSectionText())}),u(1,"i",50),_(2,"pause"),f()()}}function Mg(n,i){if(n&1){let e=G();u(0,"button",19),w("click",function(){E(e);let r=y(3);return I(r.stopPlayingSectionText())}),u(1,"i",50),_(2,"stop"),f()()}}function kg(n,i){if(n&1){let e=G();u(0,"div",44)(1,"button",45),w("click",function(){E(e);let r=y().index,s=y();return I(s.moveUp(r))}),_(2,"\u2191"),f(),u(3,"button",46),w("click",function(){E(e);let r=y().index,s=y();return I(s.moveDown(r))}),_(4,"\u2193"),f(),u(5,"button",19),w("click",function(){E(e);let r=y(),s=r.$implicit,o=r.index,l=y();return I(l.deleteSectionText(s,o))}),u(6,"i",47),_(7,"delete"),f()(),u(8,"button",19),w("click",function(){E(e);let r=y().$implicit,s=y();return I(s.setEditingSectionText(r))}),u(9,"i",48),_(10,"edit"),f()(),D(11,Eg,3,0,"button",49)(12,Ig,3,0,"button",49)(13,Mg,3,0,"button",49),f()}if(n&2){let e=y(),t=e.$implicit,r=e.index,s=y();v(),x("disabled",r===0),v(2),x("disabled",r===s.sectionTexts.length-1),v(8),x("ngIf",s.playingSectionText==null||s.playingSectionText.id!==t.id||s.playingSectionText.id===t.id&&s.audio.paused),v(),x("ngIf",!s.audio.paused&&s.playingSectionText!==null&&s.playingSectionText.id===t.id),v(),x("ngIf",s.playingSectionText!==null&&s.playingSectionText.id===t.id)}}function Ag(n,i){if(n&1){let e=G();u(0,"div",44)(1,"button",19),w("click",function(){E(e);let r=y(2);return I(r.saveEditedSectionText())}),u(2,"i",51),_(3,"save"),f()(),u(4,"button",19),w("click",function(){E(e);let r=y(2);return I(r.clearEditingSectionText())}),u(5,"i",52),_(6,"cancel"),f()(),u(7,"span"),_(8),Mt(9,"timeFormat"),f()()}if(n&2){let e=y(2);v(8),ne(kt(9,1,e.floor(e.currentTime)))}}function Dg(n,i){n&1&&(u(0,"p"),_(1,"Nu exist\u0103 texte ad\u0103ugate"),f())}function Rg(n,i){n&1&&(u(0,"i",50),_(1,"pause"),f())}function Og(n,i){n&1&&(u(0,"i",50),_(1,"play_arrow"),f())}function Pg(n,i){if(n&1){let e=G();u(0,"button",19),w("click",function(){E(e);let r=y().index,s=y(3);return I(s.setEndTimeToCurrentTime(r))}),u(1,"i",50),_(2,"timer"),f()()}}function Ng(n,i){if(n&1){let e=G();u(0,"li")(1,"div",55)(2,"div",56),_(3),f(),u(4,"div",57)(5,"input",58),w("timeBlur",function(){let r=E(e).index,s=y(3);return I(s.onTextElementStartTimeChanged(r))}),F("ngModelChange",function(r){let s=E(e).$implicit;return N(s.start_time,r)||(s.start_time=r),I(r)}),f(),_(6," \u2192 "),u(7,"input",59),w("timeBlur",function(){let r=E(e).index,s=y(3);return I(s.onTextElementEndTimeChanged(r))}),F("ngModelChange",function(r){let s=E(e).$implicit;return N(s.end_time,r)||(s.end_time=r),I(r)}),f(),u(8,"span"),_(9),f(),u(10,"button",19),w("click",function(){let r=E(e).$implicit,s=y(3);return I(s.playAudioPart(r.start_time,r.end_time))}),D(11,Rg,2,0,"i",60)(12,Og,2,0,"i",60),f(),D(13,Pg,3,0,"button",49),f()()()}if(n&2){let e=i.$implicit,t=i.index,r=y(3);v(3),_e("",e.text_element.text," "),v(2),P("ngModel",e.start_time),v(2),x("disabled",t<r.editingSectionText.section_text_elements.length-1),P("ngModel",e.end_time),v(2),ne(" "),v(2),x("ngIf",!r.audio.paused&&r.audio.currentTime>=e.start_time&&r.audio.currentTime<e.end_time),v(),x("ngIf",r.audio.paused||r.audio.currentTime>=e.end_time||r.audio.currentTime<e.start_time),v(),x("ngIf",!r.audio.paused&&r.audio.currentTime>=e.start_time&&r.audio.currentTime<e.end_time)}}function Fg(n,i){if(n&1&&(pt(0),u(1,"div",53)(2,"ol"),D(3,Dg,2,0,"p",0)(4,Ng,14,8,"li",54),f()(),mt()),n&2){let e=y(2);v(3),x("ngIf",!(e.editingSectionText.section_text_elements!=null&&e.editingSectionText.section_text_elements.length)),v(),x("ngForOf",e.editingSectionText.section_text_elements)}}function Lg(n,i){n&1&&(u(0,"p"),_(1,"Nu exist\u0103 texte ad\u0103ugate"),f())}function Vg(n,i){if(n&1&&(u(0,"div")(1,"b"),_(2),u(3,"span"),_(4),Mt(5,"timeFormat"),f(),_(6," \u2192 "),u(7,"span"),_(8),Mt(9,"timeFormat"),f()()()),n&2){let e,t,r=y().$implicit,s=y(2).$implicit;v(2),_e(" ",r.text_element.text," "),v(2),ne(kt(5,3,((e=s.start_time)!==null&&e!==void 0?e:0)+r.start_time)),v(4),ne(kt(9,5,((t=s.start_time)!==null&&t!==void 0?t:0)+r.end_time))}}function jg(n,i){if(n&1&&(u(0,"div"),_(1),u(2,"span"),_(3),Mt(4,"timeFormat"),f(),_(5," \u2192 "),u(6,"span"),_(7),Mt(8,"timeFormat"),f()()),n&2){let e,t,r=y().$implicit,s=y(2).$implicit;v(),_e(" ",r.text_element.text," "),v(2),ne(kt(4,3,((e=s.start_time)!==null&&e!==void 0?e:0)+r.start_time)),v(4),ne(kt(8,5,((t=s.start_time)!==null&&t!==void 0?t:0)+r.end_time))}}function Ug(n,i){if(n&1&&(u(0,"li"),D(1,Vg,10,7,"div",0)(2,jg,9,7,"div",0),f()),n&2){let e=i.$implicit,t=y(2).$implicit,r=y();v(),x("ngIf",(!r.audio.paused||r.playingSectionText!=null&&r.playingSectionText.id===t.id)&&t.start_time+e.start_time<=r.currentTime&&t.start_time+e.end_time>r.currentTime),v(),x("ngIf",r.audio.paused&&(r.playingSectionText==null||r.playingSectionText.id!==t.id)||t.start_time+e.start_time>r.currentTime||t.start_time+e.end_time<r.currentTime)}}function $g(n,i){if(n&1&&(u(0,"div",53)(1,"ol"),D(2,Lg,2,0,"p",0)(3,Ug,3,2,"li",54),f()()),n&2){let e=y().$implicit;v(2),x("ngIf",!(e.section_text_elements!=null&&e.section_text_elements.length)),v(),x("ngForOf",e.section_text_elements)}}function Bg(n,i){if(n&1&&(u(0,"li",33)(1,"div",34)(2,"div",35),D(3,Cg,2,1,"ng-container",0)(4,Tg,10,5,"ng-container",0),f(),u(5,"div",36),D(6,kg,14,5,"div",37)(7,Ag,10,3,"div",37),f()(),D(8,Fg,5,2,"ng-container",0),pt(9),D(10,$g,4,2,"div",38),mt(),f()),n&2){let e=i.$implicit,t=y();v(3),x("ngIf",t.editingSectionText===null||t.editingSectionText.id!==e.id),v(),x("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id),v(2),x("ngIf",t.editingSectionText===null),v(),x("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id),v(),x("ngIf",t.editingSectionText!==null&&t.editingSectionText.id===e.id),v(2),x("ngIf",t.editingSectionText==null||t.editingSectionText.id!==e.id)}}function Hg(n,i){if(n&1&&(u(0,"option",61),_(1),f()),n&2){let e=i.$implicit;x("value",e.id),v(),_e(" ",e.title," ")}}function zg(n,i){if(n&1){let e=G();u(0,"tr")(1,"td")(2,"label",62),_(3,"Titlu:"),f()(),u(4,"td")(5,"input",63),F("ngModelChange",function(r){E(e);let s=y();return N(s.newLiturgicalTextTitle,r)||(s.newLiturgicalTextTitle=r),I(r)}),f()()()}if(n&2){let e=y();v(5),P("ngModel",e.newLiturgicalTextTitle)}}var Ns=class n{constructor(i,e,t,r,s,o,l){this.route=i;this.router=e;this.sectionsService=t;this.sectionTextsService=r;this.litTextsService=s;this.sectionTextElementsService=o;this.supabaseService=l}sectionId;section=null;sectionTexts=[];allLitTexts=[];editedTitle="";editedSubtitle="";editedAudioUrl="";editedImageUrl="";audio=new Audio;selectedLitTextId="new";newStartTime=0;newEndTime=0;newRepetitions=1;timeOut;newLiturgicalTextTitle="";editingSectionText=null;currentTime=0;uploadedFile=null;floor=Math.floor;playingSectionText=null;ngOnInit(){return h(this,null,function*(){this.sectionId=this.route.snapshot.paramMap.get("id")||"",yield this.loadSection(),yield this.loadAllLitTexts(),yield this.loadSectionTexts()})}loadSection(){return h(this,null,function*(){this.section=yield this.sectionsService.getById(this.sectionId),this.section&&(this.audio.src=this.section.audio_url,this.audio.ontimeupdate=()=>{this.currentTime=this.audio.currentTime},this.editedTitle=this.section.title||"",this.editedSubtitle=this.section.subtitle||"",this.editedAudioUrl=this.section.audio_url,this.editedImageUrl=this.section.image_url||"")})}deleteSection(){return h(this,null,function*(){if(confirm("\u0218terge aceast\u0103 sec\u021Biune?"))try{yield this.sectionsService.delete(this.sectionId),alert("Sec\u021Biune \u0219tears\u0103 cu succes!"),this.router.navigate(["/sections"])}catch(i){console.error("Eroare la \u0219tergere:",i)}})}loadAllLitTexts(){return h(this,null,function*(){this.allLitTexts=yield this.litTextsService.getAll()})}loadSectionTexts(){return h(this,null,function*(){let{data:i,error:e}=yield this.sectionTextsService.client.from("section_texts").select("*, text: liturgical_texts(*, texts: text_elements(*)), section_text_elements: section_text_elements(*, text_element: text_elements(*))").eq("prayer_section_id",this.sectionId).order("sequence",{ascending:!0}).order("sequence",{ascending:!0,foreignTable:"liturgical_texts.text_elements"}).order("sequence",{ascending:!0,foreignTable:"section_text_elements"});!e&&i&&(this.sectionTexts=i,this.newStartTime=this.sectionTexts.length>0?this.sectionTexts[this.sectionTexts.length-1].end_time:0)})}saveSection(){return h(this,null,function*(){if(!this.section)return;if(this.uploadedFile){let e=this.uploadedFile.name;try{let t=yield this.supabaseService.uploadFile(this.uploadedFile,e);this.editedAudioUrl=t}catch(t){alert("Eroare la \xEEnc\u0103rcarea fi\u0219ierului: "+t.name+" - "+t.message)}}let i={title:this.editedTitle.trim()||null,subtitle:this.editedSubtitle.trim()||null,audio_url:this.editedAudioUrl.trim(),image_url:this.editedImageUrl.trim()||null};try{let e=yield this.sectionsService.update(this.section.id,i);e&&(this.section.title=e.title,this.section.subtitle=e.subtitle,this.section.audio_url=e.audio_url,this.section.image_url=e.image_url,alert("Sec\u021Biune salvat\u0103 cu succes!"))}catch(e){console.error("Eroare la salvarea sec\u021Biunii:",e)}})}addLiturgicalTextToSection(){return h(this,null,function*(){if(!this.selectedLitTextId)return;let i=0;this.sectionTexts.length>0&&(i=Math.max(...this.sectionTexts.map(e=>e.sequence)));try{if(this.selectedLitTextId==="new"){let s=yield this.litTextsService.create({title:this.newLiturgicalTextTitle});this.selectedLitTextId=s.id}let e=yield this.sectionTextsService.create({prayer_section_id:this.sectionId,liturgical_text_id:this.selectedLitTextId,sequence:i+1,repetition:this.newRepetitions,start_time:this.newStartTime??null,end_time:this.newEndTime??null}),{data:t,error:r}=yield this.sectionTextElementsService.client.from("section_text_elements").select("*, text_element: text_elements(*)").eq("section_text_id",e.id).order("sequence",{ascending:!0});r||(e.section_text_elements=t),this.newStartTime=e.end_time??0,this.newEndTime=(e.end_time??0)+60,this.sectionTexts.push(e)}catch(e){console.error("Eroare la ad\u0103ugarea textului:",e)}})}deleteSectionText(i,e){return h(this,null,function*(){if(confirm("\u0218terge acest text din sec\u021Biune?"))try{yield this.sectionTextsService.delete(i.id),this.sectionTexts.splice(e,1)}catch(t){console.error("Eroare la \u0219tergere:",t)}})}moveUp(i){return h(this,null,function*(){if(i===0)return;let e=this.sectionTexts[i],t=this.sectionTexts[i-1],r=e.sequence;e.sequence=t.sequence,t.sequence=r;try{yield this.sectionTextsService.update(e.id,{sequence:e.sequence}),yield this.sectionTextsService.update(t.id,{sequence:t.sequence}),this.sectionTexts[i]=t,this.sectionTexts[i-1]=e}catch(s){console.error("Eroare la mutare \xEEn sus:",s)}})}moveDown(i){return h(this,null,function*(){if(i===this.sectionTexts.length-1)return;let e=this.sectionTexts[i],t=this.sectionTexts[i+1],r=e.sequence;e.sequence=t.sequence,t.sequence=r;try{yield this.sectionTextsService.update(e.id,{sequence:e.sequence}),yield this.sectionTextsService.update(t.id,{sequence:t.sequence}),this.sectionTexts[i]=t,this.sectionTexts[i+1]=e}catch(s){console.error("Eroare la mutare \xEEn jos:",s)}})}setEditingSectionText(i){this.editingSectionText=JSON.parse(JSON.stringify(i)),this.editingSectionText.section_text_elements?.forEach(e=>{e.start_time=(this.editingSectionText?.start_time??0)+e.start_time,e.end_time=(this.editingSectionText?.start_time??0)+e.end_time}),this.stopPlayingSectionText()}clearEditingSectionText(){this.editingSectionText=null}saveEditedSectionText(){return h(this,null,function*(){if(!this.editingSectionText)return;let i=yield this.sectionTextsService.update(this.editingSectionText.id,{start_time:this.editingSectionText.start_time,end_time:this.editingSectionText.end_time,repetition:this.editingSectionText.repetition}),e=this.sectionTexts.find(r=>r.id===this.editingSectionText?.id),t=this.editingSectionText.section_text_elements?.map(r=>({start_time:r.start_time-(this.editingSectionText?.start_time??0),end_time:r.end_time-(this.editingSectionText?.start_time??0),text_element_id:r.text_element_id,section_text_id:r.section_text_id}))??[];yield this.sectionTextElementsService.bulkUpdate(t),e.section_text_elements=this.editingSectionText.section_text_elements?.map(r=>({start_time:r.start_time-(this.editingSectionText?.start_time??0),end_time:r.end_time-(this.editingSectionText?.start_time??0),text_element_id:r.text_element_id,section_text_id:r.section_text_id,text_element:r.text_element}))??[],e.repetition=i.repetition,e.start_time=i.start_time,e.end_time=i.end_time,this.editingSectionText=null})}goBack(){window.history.back()}onFileSelected(i){let t=i.target?.files?.[0];t?(this.uploadedFile=t,this.editedAudioUrl=t.name):this.uploadedFile=null}onLitTextSelected(i){let e=i.target;this.selectedLitTextId=e.value;let t=this.allLitTexts.find(r=>r.id===this.selectedLitTextId);this.newEndTime=this.newStartTime??0}playAudioPart(i,e){!this.section||!this.section.audio_url?.length||(this.audio.src!==this.section?.audio_url&&(this.audio.src=this.section?.audio_url??""),this.audio.paused||this.audio.currentTime>=e||this.audio.currentTime<i?(clearTimeout(this.timeOut),this.currentTime=i,this.audio.currentTime=i,this.audio.play(),this.audio.loop=!1,this.timeOut=setTimeout(()=>{this.audio.pause()},(e-i)*1e3)):(this.audio.pause(),clearTimeout(this.timeOut),this.currentTime=0))}forcePlayAudioPart(i,e){clearTimeout(this.timeOut),this.audio.pause(),this.audio.currentTime=i,this.audio.play(),this.audio.loop=!1,this.timeOut=setTimeout(()=>{this.currentTime=0,this.audio.pause(),this.playingSectionText=null},(e-i)*1e3)}playSectionText(i){if(this.playingSectionText!=null&&this.playingSectionText.id===i.id){this.audio.paused?this.audio.play():this.audio.pause();return}this.playingSectionText=i,this.playAudioPart(i.start_time??0,i.end_time??0)}pauseSectionText(){this.audio.pause()}stopPlayingSectionText(){this.audio.pause(),clearTimeout(this.timeOut),this.currentTime=0,this.playingSectionText=null}onTextElementStartTimeChanged(i){if(!this.editingSectionText)return;let e=this.editingSectionText.section_text_elements[i];if(i===0&&(this.editingSectionText.start_time=e.start_time),i>0){let t=this.editingSectionText.section_text_elements[i-1];t.end_time=e.start_time}e.end_time<=e.start_time&&(e.end_time=e.start_time+60),this.forcePlayAudioPart(e.start_time,e.end_time)}onTextElementEndTimeChanged(i){if(!this.editingSectionText)return;let e=this.editingSectionText.section_text_elements[i];if(i===this.editingSectionText.section_text_elements.length-1&&(this.editingSectionText.end_time=e.end_time),i<this.editingSectionText.section_text_elements.length-1){let t=this.editingSectionText.section_text_elements[i+1];t.start_time=e.end_time,t.end_time<=t.start_time&&(t.end_time=t.start_time+60),this.forcePlayAudioPart(t.start_time,t.end_time)}}setEndTimeToCurrentTime(i){if(!this.editingSectionText||i>=this.editingSectionText.section_text_elements.length||i<0)return;let e=this.editingSectionText.section_text_elements[i];e.end_time=Math.floor(this.currentTime),this.onTextElementEndTimeChanged(i)}static \u0275fac=function(e){return new(e||n)(A(ke),A(be),A(Vt),A(Os),A(jt),A(Ps),A(Q))};static \u0275cmp=X({type:n,selectors:[["app-section-detail"]],decls:46,vars:9,consts:[[4,"ngIf"],[3,"align"],[2,"display","flex","justify-content","left"],[1,"sections-texts",2,"margin-top","20px","padding-left","0"],["style","padding: 8px; display: flex; justify-content: center; align-items: left; flex-direction:column;",4,"ngFor","ngForOf"],[2,"border-collapse","collapse"],["for","litTextSelect"],["id","litTextSelect",3,"ngModelChange","change","ngModel"],["value",""],["value","new","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","startTime"],["id","startTime","type","text","placeholder","Ex: 0","timeInput","",3,"ngModelChange","ngModel"],["for","endTime"],["id","endTime","type","text","placeholder","Ex: 20","timeInput","",3,"ngModelChange","ngModel"],["for","repetitions"],["id","repetitions","type","number","placeholder","Ex: 1",3,"ngModelChange","ngModel"],[2,"width","100px","margin","10px auto",3,"click"],[1,"fa","fa-plus"],[3,"click"],["title","\xCEnapoi",1,"material-icons",2,"font-size","16px"],["title","\u0218terge",1,"material-icons",2,"font-size","16px"],[2,"display","flex","justify-content","space-between"],[1,"section-edit-fields",2,"border-collapse","collapse"],[3,"ngModelChange","ngModel"],["type","file",3,"change"],["colspan","2",2,"text-align","left"],[1,"fa","fa-save"],["controls","",4,"ngIf"],["alt","Section Image","style","margin-left: 20px; max-width: 200px; max-height: 200px;",3,"src",4,"ngIf"],["controls",""],["type","audio/mpeg",3,"src"],["alt","Section Image",2,"margin-left","20px","max-width","200px","max-height","200px",3,"src"],[2,"padding","8px","display","flex","justify-content","center","align-items","left","flex-direction","column"],[2,"display","flex","justify-content","space-between","width","fit-content","gap","2rem"],[2,"display","flex"],[2,"display","flex","justify-content","center","align-items","center"],["style","display: flex; gap: 0.1rem",4,"ngIf"],["style","width: 800px;",4,"ngIf"],[3,"routerLink"],[2,"margin-left","10px"],["type","number",2,"width","60px",3,"ngModelChange","ngModel"],["id","startTime","type","text","timeInput","",2,"width","60px",3,"ngModelChange","ngModel"],["id","endTime","type","text","timeInput","",2,"width","60px",3,"ngModelChange","ngModel"],[2,"display","flex","gap","0.1rem"],["title","Mut\u0103 \xEEn sus",3,"click","disabled"],["title","Mut\u0103 \xEEn jos",3,"click","disabled"],["title","\u0218terge",1,"material-icons",2,"font-size","12px"],["title","Editeaz\u0103",1,"material-icons",2,"font-size","12px"],[3,"click",4,"ngIf"],["title","Play",1,"material-icons",2,"font-size","12px"],["title","Salveaza",1,"material-icons",2,"font-size","12px"],["title","Renun\u021B\u0103",1,"material-icons",2,"font-size","12px"],[2,"width","800px"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","justify-content","center","align-items","end"],[2,"width","800px","min-height","64px"],[2,"width","400px"],["type","text","timeInput","",2,"width","60px",3,"timeBlur","ngModelChange","ngModel"],["type","text","timeInput","",2,"width","60px",3,"timeBlur","ngModelChange","disabled","ngModel"],["class","material-icons","style","font-size:12px","title","Play",4,"ngIf"],[3,"value"],["for","newTextTitle"],["id","newTextTitle","type","text","placeholder","Ex: N\u0103sc\u0103toare de Dumnezeu",3,"ngModelChange","ngModel"]],template:function(e,t){e&1&&(D(0,Sg,45,8,"div",0),ie(1,"hr"),u(2,"div")(3,"h3",1),_(4,"Texte \xEEn sec\u021Biune"),f(),u(5,"div",2)(6,"ol",3),D(7,Bg,11,6,"li",4),f()()(),ie(8,"hr"),u(9,"div")(10,"h3"),_(11,"Ad\u0103uga\u021Bi un text nou \xEEn sec\u021Biune"),f(),u(12,"table",5)(13,"tr")(14,"td")(15,"label",6),_(16,"Selecta\u021Bi un text liturgic:"),f()(),u(17,"td")(18,"select",7),F("ngModelChange",function(s){return N(t.selectedLitTextId,s)||(t.selectedLitTextId=s),s}),w("change",function(s){return t.onLitTextSelected(s)}),u(19,"option",8),_(20,"-- Alege\u021Bi --"),f(),u(21,"option",9),_(22,"-- Text nou --"),f(),D(23,Hg,2,2,"option",10),f()()(),D(24,zg,6,1,"tr",0),u(25,"tr")(26,"td")(27,"label",11),_(28,"Timp \xEEnceput:"),f()(),u(29,"td")(30,"input",12),F("ngModelChange",function(s){return N(t.newStartTime,s)||(t.newStartTime=s),s}),f()()(),u(31,"tr")(32,"td")(33,"label",13),_(34,"Timp sf\xE2r\u0219it:"),f()(),u(35,"td")(36,"input",14),F("ngModelChange",function(s){return N(t.newEndTime,s)||(t.newEndTime=s),s}),f()()(),u(37,"tr")(38,"td")(39,"label",15),_(40,"Repet\u0103ri:"),f()(),u(41,"td")(42,"input",16),F("ngModelChange",function(s){return N(t.newRepetitions,s)||(t.newRepetitions=s),s}),f()()()(),u(43,"button",17),w("click",function(){return t.addLiturgicalTextToSection()}),ie(44,"i",18),_(45," Ad\u0103uga\u021Bi "),f()()),e&2&&(x("ngIf",t.section),v(3),x("align","left"),v(4),x("ngForOf",t.sectionTexts),v(11),P("ngModel",t.selectedLitTextId),v(5),x("ngForOf",t.allLitTexts),v(),x("ngIf",t.selectedLitTextId==="new"),v(6),P("ngModel",t.newStartTime),v(6),P("ngModel",t.newEndTime),v(6),P("ngModel",t.newRepetitions))},dependencies:[ae,we,Ue,me,Ft,Lt,de,ir,lt,pe,ue,Be,As,Ds,pu,nr],styles:[".section_edit_fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:10px;gap:1rem}.highlight[_ngcontent-%COMP%]{font-weight:700}.sections-texts[_ngcontent-%COMP%]{list-style-type:upper-roman!important}"]})};var mu=[{path:"",redirectTo:"prayers",pathMatch:"full"},{path:"prayers",component:vs,canActivate:[dt]},{path:"prayers/:id",component:Ss,canActivate:[dt]},{path:"prayerTypes",component:Cs,canActivate:[dt]},{path:"liturgicalTexts",component:Ms,canActivate:[dt]},{path:"liturgicalTexts/:id",component:Is,canActivate:[dt]},{path:"sections",component:ks,canActivate:[dt]},{path:"sections/:id",component:Ns,canActivate:[dt]},{path:"login",component:Ts}];var m=function(n){return n.SEPARATOR="separator",n.PERCENT="percent",n.IP="IP",n.CPF_CNPJ="CPF_CNPJ",n.MONTH="M",n.MONTHS="M0",n.MINUTE="m",n.HOUR="h",n.HOURS="H",n.MINUTES="m0",n.HOURS_HOUR="Hh",n.SECONDS="s0",n.HOURS_MINUTES_SECONDS="Hh:m0:s0",n.EMAIL_MASK="A*@A*.A*",n.HOURS_MINUTES="Hh:m0",n.MINUTES_SECONDS="m0:s0",n.DAYS_MONTHS_YEARS="d0/M0/0000",n.DAYS_MONTHS="d0/M0",n.DAYS="d0",n.DAY="d",n.SECOND="s",n.LETTER_S="S",n.DOT=".",n.COMMA=",",n.CURLY_BRACKETS_LEFT="{",n.CURLY_BRACKETS_RIGHT="}",n.MINUS="-",n.OR="||",n.HASH="#",n.EMPTY_STRING="",n.SYMBOL_STAR="*",n.SYMBOL_QUESTION="?",n.SLASH="/",n.WHITE_SPACE=" ",n.NUMBER_ZERO="0",n.NUMBER_NINE="9",n.BACKSPACE="Backspace",n.DELETE="Delete",n.ARROW_LEFT="ArrowLeft",n.ARROW_UP="ArrowUp",n.DOUBLE_ZERO="00",n}(m||{}),Fa=new z("ngx-mask config"),gu=new z("new ngx-mask config"),_u=new z("initial ngx-mask config"),Gg={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showMaskTyped:!1,instantPrefix:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:!1,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:n=>n,outputTransformFn:n=>n,maskFilled:new he,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},bw=[m.HOURS_MINUTES_SECONDS,m.HOURS_MINUTES,m.MINUTES_SECONDS],xw=[m.PERCENT,m.HOURS_HOUR,m.SECONDS,m.MINUTES,m.SEPARATOR,m.DAYS_MONTHS_YEARS,m.DAYS_MONTHS,m.DAYS,m.MONTHS],Wg=(()=>{class n{_config=k(Fa);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;instantPrefix=this._config.instantPrefix;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMask(e,t,r=0,s=!1,o=!1,l=()=>{}){if(!t||typeof e!="string")return m.EMPTY_STRING;let a=0,c="",d=!1,g=!1,b=1,S=!1,p=e,T=r;p.slice(0,this.prefix.length)===this.prefix&&(p=p.slice(this.prefix.length,p.length)),this.suffix&&p.length>0&&(p=this.checkAndRemoveSuffix(p)),p==="("&&this.prefix&&(p="");let O=p.toString().split(m.EMPTY_STRING);if(this.allowNegativeNumbers&&p.slice(a,a+1)===m.MINUS&&(c+=p.slice(a,a+1)),t===m.IP){let q=p.split(m.DOT);this.ipError=this._validIP(q),t="099.099.099.099"}let Z=[];for(let q=0;q<p.length;q++)p[q]?.match("\\d")&&Z.push(p[q]??m.EMPTY_STRING);if(t===m.CPF_CNPJ&&(this.cpfCnpjError=Z.length!==11&&Z.length!==14,Z.length>11?t="00.000.000/0000-00":t="000.000.000-00"),t.startsWith(m.PERCENT)){if(p.match("[a-z]|[A-Z]")||p.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!o){p=this._stripToDecimal(p);let ut=this.getPrecision(t);p=this.checkInputPrecision(p,ut,this.decimalMarker)}let q=typeof this.decimalMarker=="string"?this.decimalMarker:m.DOT;if(p.indexOf(q)>0&&!this.percentage(p.substring(0,p.indexOf(q)))){let ut=p.substring(0,p.indexOf(q)-1);this.allowNegativeNumbers&&p.slice(a,a+1)===m.MINUS&&!o&&(ut=p.substring(0,p.indexOf(q))),p=`${ut}${p.substring(p.indexOf(q),p.length)}`}let L="";this.allowNegativeNumbers&&p.slice(a,a+1)===m.MINUS?L=`${m.MINUS}${p.slice(a+1,a+p.length)}`:L=p,this.percentage(L)?c=this._splitPercentZero(p):c=this._splitPercentZero(p.substring(0,p.length-1))}else if(t.startsWith(m.SEPARATOR)){(p.match("[w\u0430-\u044F\u0410-\u042F]")||p.match("[\u0401\u0451\u0410-\u044F]")||p.match("[a-z]|[A-Z]")||p.match(/[-@#!$%\\^&*()_'+|~=`{}\]:";<>.?/]/)||p.match("[^A-Za-z0-9,]"))&&(p=this._stripToDecimal(p));let q=this.getPrecision(t),L=this.decimalMarker;if(Array.isArray(this.decimalMarker)&&(this.actualValue.includes(this.decimalMarker[0])||this.actualValue.includes(this.decimalMarker[1])?L=this.actualValue.includes(this.decimalMarker[0])?this.decimalMarker[0]:this.decimalMarker[1]:L=this.decimalMarker.find(J=>J!==this.thousandSeparator)),o){let{decimalMarkerIndex:J,nonZeroIndex:le}=this._findFirstNonZeroAndDecimalIndex(p,L),ht=p[0]===m.MINUS,sr=p[0]===m.NUMBER_ZERO,or=p[0]===L,zi=p[1]===L;(or&&!le||ht&&zi&&!le||sr&&!J&&!le)&&(p=m.NUMBER_ZERO),J&&le&&ht&&T===1&&(J<le||J>le)&&(p=m.MINUS+p.slice(le)),!J&&le&&p.length>le&&(p=ht?m.MINUS+p.slice(le):p.slice(le)),J&&le&&T===0&&(J<le&&(p=p.slice(J-1)),J>le&&(p=p.slice(le)))}q===0?p=this.allowNegativeNumbers?p.length>2&&p[0]===m.MINUS&&p[1]===m.NUMBER_ZERO&&p[2]!==this.thousandSeparator&&p[2]!==m.COMMA&&p[2]!==m.DOT?"-"+p.slice(2,p.length):p[0]===m.NUMBER_ZERO&&p.length>1&&p[1]!==this.thousandSeparator&&p[1]!==m.COMMA&&p[1]!==m.DOT?p.slice(1,p.length):p:p.length>1&&p[0]===m.NUMBER_ZERO&&p[1]!==this.thousandSeparator&&p[1]!==m.COMMA&&p[1]!==m.DOT?p.slice(1,p.length):p:(p[0]===L&&p.length>1&&!o&&(p=m.NUMBER_ZERO+p.slice(0,p.length+1),this.plusOnePosition=!0),p[0]===m.NUMBER_ZERO&&p[1]!==L&&p[1]!==this.thousandSeparator&&!o&&(p=p.length>1?p.slice(0,1)+L+p.slice(1,p.length+1):p,this.plusOnePosition=!0),this.allowNegativeNumbers&&!o&&p[0]===m.MINUS&&(p[1]===L||p[1]===m.NUMBER_ZERO)&&(p=p[1]===L&&p.length>2?p.slice(0,1)+m.NUMBER_ZERO+p.slice(1,p.length):p[1]===m.NUMBER_ZERO&&p.length>2&&p[2]!==L?p.slice(0,2)+L+p.slice(2,p.length):p,this.plusOnePosition=!0));let ut=this._charToRegExpExpression(this.thousandSeparator),Re='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(ut,"");if(Array.isArray(this.decimalMarker))for(let J of this.decimalMarker)Re=Re.replace(this._charToRegExpExpression(J),m.EMPTY_STRING);else Re=Re.replace(this._charToRegExpExpression(this.decimalMarker),"");let ai=new RegExp("["+Re+"]");p.match(ai)&&(p=p.substring(0,p.length-1)),p=this.checkInputPrecision(p,q,this.decimalMarker);let Ut=p.replace(new RegExp(ut,"g"),"");c=this._formatWithSeparators(Ut,this.thousandSeparator,this.decimalMarker,q);let Fs=c.indexOf(m.COMMA)-p.indexOf(m.COMMA),Xe=c.length-p.length,rr=o&&c.length<e.length&&this.separatorLimit;if((c[T-1]===this.thousandSeparator||c[T-this.prefix.length])&&this.prefix&&o)T=T-1;else if(Xe>0&&c[T]!==this.thousandSeparator||rr){g=!0;let J=0;do this._shift.add(T+J),J++;while(J<Xe)}else c[T-1]===this.thousandSeparator||Xe===-4||Xe===-3||c[T]===this.thousandSeparator?(this._shift.clear(),this._shift.add(T-1)):Fs!==0&&T>0&&!(c.indexOf(m.COMMA)>=T&&T>3)||!(c.indexOf(m.DOT)>=T&&T>3)&&Xe<=0?(this._shift.clear(),g=!0,b=Xe,T+=Xe,this._shift.add(T)):this._shift.clear()}else for(let q=0,L=O[0];q<O.length&&a!==t.length;q++,L=O[q]??m.EMPTY_STRING){let ut=m.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(L,t[a]??m.EMPTY_STRING)&&t[a+1]===m.SYMBOL_QUESTION)c+=L,a+=2;else if(t[a+1]===m.SYMBOL_STAR&&d&&this._checkSymbolMask(L,t[a+2]??m.EMPTY_STRING))c+=L,a+=3,d=!1;else if(this._checkSymbolMask(L,t[a]??m.EMPTY_STRING)&&t[a+1]===m.SYMBOL_STAR&&!ut)c+=L,d=!0;else if(t[a+1]===m.SYMBOL_QUESTION&&this._checkSymbolMask(L,t[a+2]??m.EMPTY_STRING))c+=L,a+=3;else if(this._checkSymbolMask(L,t[a]??m.EMPTY_STRING)){if(t[a]===m.HOURS&&(this.apm?Number(L)>9:Number(L)>2)){T=this.leadZeroDateTime?T:T+1,a+=1,this._shiftStep(a),q--,this.leadZeroDateTime&&(c+="0");continue}if(t[a]===m.HOUR&&(this.apm?c.length===1&&Number(c)>1||c==="1"&&Number(L)>2||p.slice(a-1,a).length===1&&Number(p.slice(a-1,a))>2||p.slice(a-1,a)==="1"&&Number(L)>2:c==="2"&&Number(L)>3||(c.slice(a-2,a)==="2"||c.slice(a-3,a)==="2"||c.slice(a-4,a)==="2"||c.slice(a-1,a)==="2")&&Number(L)>3&&a>10)){T=T+1,a+=1,q--;continue}if((t[a]===m.MINUTE||t[a]===m.SECOND)&&Number(L)>5){T=this.leadZeroDateTime?T:T+1,a+=1,this._shiftStep(a),q--,this.leadZeroDateTime&&(c+="0");continue}let Re=31,ai=p[a],Ut=p[a+1],Fs=p[a+2],Xe=p[a-1],rr=p[a-2],J=p.slice(a-3,a-1),le=p.slice(a-1,a+1),ht=p.slice(a,a+2),sr=p.slice(a-2,a);if(t[a]===m.DAY){let or=t.slice(0,2)===m.MONTHS,zi=t.slice(0,2)===m.MONTHS&&this.specialCharacters.includes(rr);if(Number(L)>3&&this.leadZeroDateTime||!or&&(Number(ht)>Re||Number(le)>Re||this.specialCharacters.includes(Ut))||(zi?Number(le)>Re||!this.specialCharacters.includes(ai)&&this.specialCharacters.includes(Fs)||this.specialCharacters.includes(ai):Number(ht)>Re||this.specialCharacters.includes(Ut)&&!o)){T=this.leadZeroDateTime?T:T+1,a+=1,this._shiftStep(a),q--,this.leadZeroDateTime&&(c+="0");continue}}if(t[a]===m.MONTH){let zi=a===0&&(Number(L)>2||Number(ht)>12||this.specialCharacters.includes(Ut)&&!o),bu=t.slice(a+2,a+3),xu=J.includes(bu)&&t.includes("d0")&&(this.specialCharacters.includes(rr)&&Number(le)>12&&!this.specialCharacters.includes(ai)||this.specialCharacters.includes(ai)),Su=Number(J)<=Re&&!this.specialCharacters.includes(J)&&this.specialCharacters.includes(Xe)&&(Number(ht)>12||this.specialCharacters.includes(Ut)),wu=Number(ht)>12&&a===5||this.specialCharacters.includes(Ut)&&a===5,Cu=Number(J)>Re&&!this.specialCharacters.includes(J)&&!this.specialCharacters.includes(sr)&&Number(sr)>12&&t.includes("d0"),Tu=Number(J)<=Re&&!this.specialCharacters.includes(J)&&!this.specialCharacters.includes(Xe)&&Number(le)>12;if(Number(L)>1&&this.leadZeroDateTime||zi||xu||Tu||Cu||Su||wu&&!this.leadZeroDateTime){T=this.leadZeroDateTime?T:T+1,a+=1,this._shiftStep(a),q--,this.leadZeroDateTime&&(c+="0");continue}}c+=L,a++}else this.specialCharacters.includes(L)&&t[a]===L?(c+=L,a++):this.specialCharacters.indexOf(t[a]??m.EMPTY_STRING)!==-1?(c+=t[a],a++,this._shiftStep(a),q--):t[a]===m.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(a):this.patterns[t[a]??m.EMPTY_STRING]&&this.patterns[t[a]??m.EMPTY_STRING]?.optional?(O[a]&&t!=="099.099.099.099"&&t!=="000.000.000-00"&&t!=="00.000.000/0000-00"&&!t.match(/^9+\.0+$/)&&!this.patterns[t[a]??m.EMPTY_STRING]?.optional&&(c+=O[a]),t.includes(m.NUMBER_NINE+m.SYMBOL_STAR)&&t.includes(m.NUMBER_ZERO+m.SYMBOL_STAR)&&a++,a++,q--):this.maskExpression[a+1]===m.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[a+2]??m.EMPTY_STRING)&&this._findSpecialChar(L)===this.maskExpression[a+2]&&d||this.maskExpression[a+1]===m.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[a+2]??m.EMPTY_STRING)&&this._findSpecialChar(L)===this.maskExpression[a+2]&&d?(a+=3,c+=L):this.showMaskTyped&&this.specialCharacters.indexOf(L)<0&&L!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(S=!0)}c[T-1]&&c.length+1===t.length&&this.specialCharacters.indexOf(t[t.length-1]??m.EMPTY_STRING)!==-1&&(c+=t[t.length-1]);let Ee=T+1;for(;this._shift.has(Ee);)b++,Ee++;let ge=s&&!t.startsWith(m.SEPARATOR)?a:this._shift.has(T)?b:0;S&&ge--,l(ge,g),b<0&&this._shift.clear();let Ie=!1;o&&(Ie=O.every(q=>this.specialCharacters.includes(q)));let De=`${this.prefix}${Ie?m.EMPTY_STRING:c}${this.showMaskTyped?"":this.suffix}`;c.length===0&&(De=this.instantPrefix?`${this.prefix}${c}`:`${c}`);let wt=p.length===1&&this.specialCharacters.includes(t[0])&&p!==t[0];if(!this._checkSymbolMask(p,t[1])&&wt)return"";if(c.includes(m.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(o&&c===m.MINUS)return"";De=`${m.MINUS}${this.prefix}${c.split(m.MINUS).join(m.EMPTY_STRING)}${this.suffix}`}return De}_findDropSpecialChar(e){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(t=>t===e):this._findSpecialChar(e)}_findSpecialChar(e){return this.specialCharacters.find(t=>t===e)}_checkSymbolMask(e,t){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[t]?.pattern&&this.patterns[t]?.pattern.test(e))??!1}_formatWithSeparators=(e,t,r,s)=>{let o=[],l="";if(Array.isArray(r)){let b=new RegExp(r.map(S=>"[\\^$.|?*+()".indexOf(S)>=0?`\\${S}`:S).join("|"));o=e.split(b),l=e.match(b)?.[0]??m.EMPTY_STRING}else o=e.split(r),l=r;let a=o.length>1?`${l}${o[1]}`:m.EMPTY_STRING,c=o[0]??m.EMPTY_STRING,d=this.separatorLimit.replace(/\s/g,m.EMPTY_STRING);d&&+d&&(c[0]===m.MINUS?c=`-${c.slice(1,c.length).slice(0,d.length)}`:c=c.slice(0,d.length));let g=/(\d+)(\d{3})/;for(;t&&g.test(c);)c=c.replace(g,"$1"+t+"$2");return typeof s>"u"?c+a:s===0?c:c+a.substring(0,s+1)};percentage=e=>{let t=e.replace(",","."),r=Number(this.allowNegativeNumbers&&e.includes(m.MINUS)?t.slice(1,e.length):t);return!isNaN(r)&&r>=0&&r<=100};getPrecision=e=>{let t=e.split(m.DOT);return t.length>1?Number(t[t.length-1]):1/0};checkAndRemoveSuffix=e=>{for(let t=this.suffix?.length-1;t>=0;t--){let r=this.suffix.substring(t,this.suffix?.length);if(e.includes(r)&&t!==this.suffix?.length-1&&(t-1<0||!e.includes(this.suffix.substring(t-1,this.suffix?.length))))return e.replace(r,m.EMPTY_STRING)}return e};checkInputPrecision=(e,t,r)=>{let s=e,o=r;if(t<1/0){if(Array.isArray(o)){let d=o.find(g=>g!==this.thousandSeparator);o=d||o[0]}let l=new RegExp(this._charToRegExpExpression(o)+`\\d{${t}}.*$`),a=s.match(l),c=(a&&a[0]?.length)??0;if(c-1>t){let d=c-1-t;s=s.substring(0,s.length-d)}t===0&&this._compareOrIncludes(s[s.length-1],o,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s};_stripToDecimal(e){return e.split(m.EMPTY_STRING).filter((t,r)=>{let s=typeof this.decimalMarker=="string"?t===this.decimalMarker:this.decimalMarker.includes(t);return t.match("^-?\\d")||t===this.thousandSeparator||s||t===m.MINUS&&r===0&&this.allowNegativeNumbers}).join(m.EMPTY_STRING)}_charToRegExpExpression(e){return e&&(e===" "?"\\s":"[\\^$.|?*+()".indexOf(e)>=0?`\\${e}`:e)}_shiftStep(e){this._shift.add(e+this.prefix.length||0)}_compareOrIncludes(e,t,r){return Array.isArray(t)?t.filter(s=>s!==r).includes(e):e===t}_validIP(e){return!(e.length===4&&!e.some((t,r)=>e.length!==r+1?t===m.EMPTY_STRING||Number(t)>255:t===m.EMPTY_STRING||Number(t.substring(0,3))>255))}_splitPercentZero(e){if(e===m.MINUS&&this.allowNegativeNumbers)return e;let t=typeof this.decimalMarker=="string"?e.indexOf(this.decimalMarker):e.indexOf(m.DOT),r=this.allowNegativeNumbers&&e.includes(m.MINUS)?"-":"";if(t===-1){let s=parseInt(r?e.slice(1,e.length):e,10);return isNaN(s)?m.EMPTY_STRING:`${r}${s}`}else{let s=parseInt(e.replace("-","").substring(0,t),10),o=e.substring(t+1),l=isNaN(s)?"":s.toString(),a=typeof this.decimalMarker=="string"?this.decimalMarker:m.DOT;return l===m.EMPTY_STRING?m.EMPTY_STRING:`${r}${l}${a}${o}`}}_findFirstNonZeroAndDecimalIndex(e,t){let r=null,s=null;for(let o=0;o<e.length;o++){let l=e[o];if(l===t&&r===null&&(r=o),l&&l>="1"&&l<="9"&&s===null&&(s=o),r!==null&&s!==null)break}return{decimalMarkerIndex:r,nonZeroIndex:s}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),qg=(()=>{class n extends Wg{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;maskChanged=!1;maskExpressionArray=[];triggerOnMaskChange=!1;previousValue="";currentValue="";writingValue=!1;_emitValue=!1;_start;_end;onChange=e=>{};_elementRef=k(Pe,{optional:!0});document=k(ye);_config=k(Fa);_renderer=k(Ye,{optional:!0});applyMask(e,t,r=0,s=!1,o=!1,l=()=>{}){if(!t)return e!==this.actualValue?this.actualValue:e;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():m.EMPTY_STRING,this.maskExpression===m.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||m.HASH)),this.maskExpression===m.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||m.HASH)),!e&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let a=e&&typeof this.selStart=="number"?e[this.selStart]??m.EMPTY_STRING:m.EMPTY_STRING,c="",d=r;if((this.hiddenInput||e&&e.indexOf(m.SYMBOL_STAR)>=0)&&!this.writingValue){let p=e&&e.length===1?e.split(m.EMPTY_STRING):this.actualValue.split(m.EMPTY_STRING);o&&(p=p.slice(0,r).concat(p.slice(r+1))),this.showMaskTyped&&(e=this.removeMask(e),p=this.removeMask(p.join("")).split(m.EMPTY_STRING)),typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):e!==m.EMPTY_STRING&&p.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(e.length>p.length?p.splice(this.selStart,0,a):e.length<p.length&&(p.length-e.length===1?o?p.splice(this.selStart-1,1):p.splice(e.length-1,1):p.splice(this.selStart,this.selEnd-this.selStart))):p=[],this.showMaskTyped&&!this.hiddenInput&&(c=this.removeMask(e)),this.actualValue.length?p.length<e.length?c=this.shiftTypedSymbols(p.join(m.EMPTY_STRING)):p.length===e.length?c=p.join(m.EMPTY_STRING):c=e:c=e}if(s&&(this.hiddenInput||!this.hiddenInput)&&(c=e),o&&this.specialCharacters.indexOf(this.maskExpression[d]??m.EMPTY_STRING)!==-1&&this.showMaskTyped&&!this.prefix&&(c=this.currentValue),this.deletedSpecialCharacter&&d&&(this.specialCharacters.includes(this.actualValue.slice(d,d+1))?d=d+1:t.slice(d-1,d+1)!==m.MONTHS&&(d=d-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(c=this.removeMask(c)),this.maskChanged?c=e:c=c&&c.length?c:e,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s&&!this.writingValue){let p=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(p),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let g=super.applyMask(c,t,d,s,o,l);if(this.actualValue=this.getActualValue(g),this.thousandSeparator===m.DOT&&this.decimalMarker===m.DOT&&(this.decimalMarker=m.COMMA),this.maskExpression.startsWith(m.SEPARATOR)&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(p=>!this._compareOrIncludes(p,this.decimalMarker,this.thousandSeparator))),(g||g==="")&&(this.previousValue=this.currentValue,this.currentValue=g,this._emitValue=this.previousValue!==this.currentValue||this.maskChanged||this.writingValue||this.previousValue===this.currentValue&&s),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(g)):this.formControlResult(g)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?`${this.hideInput(g,this.maskExpression)}${this.maskIsShown.slice(g.length)}`:g;let b=g.length,S=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(m.HOURS)){let p=this._numberSkipedSymbols(g);return`${g}${S.slice(b+p)}`}else if(this.maskExpression===m.IP||this.maskExpression===m.CPF_CNPJ)return`${g}${S}`;return`${g}${S.slice(b)}`}_numberSkipedSymbols(e){let t=/(^|\D)(\d\D)/g,r=t.exec(e),s=0;for(;r!=null;)s+=1,r=t.exec(e);return s}applyValueChanges(e,t,r,s=()=>{}){let o=this._elementRef?.nativeElement;o&&(o.value=this.applyMask(o.value,this.maskExpression,e,t,r,s),o!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(e,t){return e.split(m.EMPTY_STRING).map((r,s)=>this.patterns&&this.patterns[t[s]??m.EMPTY_STRING]&&this.patterns[t[s]??m.EMPTY_STRING]?.symbol?this.patterns[t[s]??m.EMPTY_STRING]?.symbol:r).join(m.EMPTY_STRING)}getActualValue(e){let t=e.split(m.EMPTY_STRING).filter((r,s)=>{let o=this.maskExpression[s]??m.EMPTY_STRING;return this._checkSymbolMask(r,o)||this.specialCharacters.includes(o)&&r===o});return t.join(m.EMPTY_STRING)===e?t.join(m.EMPTY_STRING):e}shiftTypedSymbols(e){let t="";return(e&&e.split(m.EMPTY_STRING).map((s,o)=>{if(this.specialCharacters.includes(e[o+1]??m.EMPTY_STRING)&&e[o+1]!==this.maskExpression[o+1])return t=s,e[o+1];if(t.length){let l=t;return t=m.EMPTY_STRING,l}return s})||[]).join(m.EMPTY_STRING)}numberToString(e){return!e&&e!==0||this.maskExpression.startsWith(m.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(m.SEPARATOR)&&this.separatorLimit.length>14&&String(e).length>14?String(e):Number(e).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${m.MINUS}/`,m.MINUS)}showMaskInInput(e){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(e){if(this.maskExpression===m.IP)return this._checkForIp(e);if(this.maskExpression===m.CPF_CNPJ)return this._checkForCpfCnpj(e)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let e=this._elementRef?.nativeElement;e&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==e.value.replace(this.placeHolderCharacter,m.EMPTY_STRING).length&&(this.formElementProperty=["value",m.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([e,t]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,e,t))}checkDropSpecialCharAmount(e){return e.split(m.EMPTY_STRING).filter(r=>this._findDropSpecialChar(r)).length}removeMask(e){return this._removeMask(this._removeSuffix(this._removePrefix(e)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(e){if(e===m.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let t=[];for(let r=0;r<e.length;r++){let s=e[r]??m.EMPTY_STRING;s&&s.match("\\d")&&t.push(s)}return t.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>3&&t.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>6&&t.length<=9?this.placeHolderCharacter:(t.length>9&&t.length<=12,"")}_checkForCpfCnpj(e){let t=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,r=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(e===m.HASH)return t;let s=[];for(let o=0;o<e.length;o++){let l=e[o]??m.EMPTY_STRING;l&&l.match("\\d")&&s.push(l)}return s.length<=3?t.slice(s.length,t.length):s.length>3&&s.length<=6?t.slice(s.length+1,t.length):s.length>6&&s.length<=9?t.slice(s.length+2,t.length):s.length>9&&s.length<11?t.slice(s.length+3,t.length):s.length===11?"":s.length===12?e.length===17?r.slice(16,r.length):r.slice(15,r.length):s.length>12&&s.length<=14?r.slice(s.length+4,r.length):""}_getActiveElement(e=this.document){let t=e?.activeElement?.shadowRoot;return t?.activeElement?this._getActiveElement(t):e.activeElement}formControlResult(e){if(this.writingValue&&!e){this.onChange(this.outputTransformFn(null));return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))),this.writingValue=!1,this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(e)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===e?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))):this.onChange(this.outputTransformFn(this._toNumber(e)))}_toNumber(e){if(!this.isNumberValue||e===m.EMPTY_STRING||this.maskExpression.startsWith(m.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return e;if(String(e).length>14&&this.maskExpression.startsWith(m.SEPARATOR))return String(e);let t=Number(e);if(this.maskExpression.startsWith(m.SEPARATOR)&&Number.isNaN(t)){let r=String(e).replace(",",".");return Number(r)}return Number.isNaN(t)?e:t}_removeMask(e,t){return this.maskExpression.startsWith(m.PERCENT)&&e.includes(m.DOT)?e:e&&e.replace(this._regExpForRemove(t),m.EMPTY_STRING)}_removePrefix(e){return this.prefix?e&&e.replace(this.prefix,m.EMPTY_STRING):e}_removeSuffix(e){return this.suffix?e&&e.replace(this.suffix,m.EMPTY_STRING):e}_retrieveSeparatorValue(e){let t=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(r=>this.dropSpecialCharacters.includes(r)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&e.includes(m.WHITE_SPACE)&&this.maskExpression.includes(m.SYMBOL_STAR)&&(t=t.filter(r=>r!==m.WHITE_SPACE)),this._removeMask(e,t)}_regExpForRemove(e){return new RegExp(e.map(t=>`\\${t}`).join("|"),"gi")}_replaceDecimalMarkerToDot(e){let t=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return e.replace(this._regExpForRemove(t),m.DOT)}_checkSymbols(e){let t=e;if(t===m.EMPTY_STRING)return t;this.maskExpression.startsWith(m.PERCENT)&&this.decimalMarker===m.COMMA&&(t=t.replace(m.COMMA,m.DOT));let r=this._retrieveSeparatorPrecision(this.maskExpression),s=this.specialCharacters.length===0?this._retrieveSeparatorValue(t):this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(t));return this.isNumberValue&&r?t===this.decimalMarker?null:s.length>14?String(s):this._checkPrecision(this.maskExpression,s):s}_checkPatternForSpace(){for(let e in this.patterns)if(this.patterns[e]&&this.patterns[e]?.hasOwnProperty("pattern")){let t=this.patterns[e]?.pattern.toString(),r=this.patterns[e]?.pattern;if(t?.includes(m.WHITE_SPACE)&&r?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(e){let t=e.match(new RegExp("^separator\\.([^d]*)"));return t?Number(t[1]):null}_checkPrecision(e,t){let r=this.getPrecision(e),s=t;return e.indexOf("2")>0||this.leadZero&&Number(r)>0?(this.decimalMarker===m.COMMA&&this.leadZero&&(s=s.replace(",",".")),this.leadZero?Number(s).toFixed(Number(r)):Number(s).toFixed(2)):this.numberToString(s)}_repeatPatternSymbols(e){return e.match(/{[0-9]+}/)&&e.split(m.EMPTY_STRING).reduce((t,r,s)=>{if(this._start=r===m.CURLY_BRACKETS_LEFT?s:this._start,r!==m.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(r)?t+r:t;this._end=s;let o=Number(e.slice(this._start+1,this._end)),l=new Array(o+1).join(e[this._start-1]);if(e.slice(0,this._start).length>1&&e.includes(m.LETTER_S)){let a=e.slice(0,this._start-1);return a.includes(m.CURLY_BRACKETS_LEFT)?t+l:a+t+l}else return t+l},"")||e}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=qe(n)))(r||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Yg(){let n=k(_u),i=k(gu);return i instanceof Function?C(C({},n),i()):C(C({},n),i)}function Kg(n){return[{provide:gu,useValue:n},{provide:_u,useValue:Gg},{provide:Fa,useFactory:Yg},qg]}function vu(n){return Bt(Kg(n))}var Zg="@",Qg=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=k(Xa,{optional:!0});loadingSchedulerFn=k(Jg,{optional:!0});_engine;constructor(e,t,r,s,o){this.doc=e,this.delegate=t,this.zone=r,this.animationType=s,this.moduleImpl=o}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-LJ2QTNN5.js").then(r=>r),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(r=>{throw new te(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,t){let r=this.delegate.createRenderer(e,t);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new La(r);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let l=o.createRenderer(e,t);s.use(l),this.scheduler?.notify(11)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(t){hr()};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),La=class{delegate;replay=[];\u0275type=1;constructor(i){this.delegate=i}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,t,r){this.delegate.insertBefore(i,e,t,r)}removeChild(i,e,t){this.delegate.removeChild(i,e,t)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,t,r){this.delegate.setAttribute(i,e,t,r)}removeAttribute(i,e,t){this.delegate.removeAttribute(i,e,t)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,t,r){this.delegate.setStyle(i,e,t,r)}removeStyle(i,e,t){this.delegate.removeStyle(i,e,t)}setProperty(i,e,t){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(i,e,t)),this.delegate.setProperty(i,e,t)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,t){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(i,e,t)),this.delegate.listen(i,e,t)}shouldReplay(i){return this.replay!==null&&i.startsWith(Zg)}},Jg=new z("");function yu(n="animations"){return nl("NgAsyncAnimations"),Bt([{provide:fr,useFactory:(i,e,t)=>new Qg(i,e,t,n),deps:[ye,yr,Me]},{provide:qs,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Xg(n){return()=>n.initSession()}Dl(ls,{providers:[Cc(mu),vu(),{provide:Zi,useFactory:Xg,deps:[at],multi:!0},yu()]});export{Xg as initSessionFactory};
