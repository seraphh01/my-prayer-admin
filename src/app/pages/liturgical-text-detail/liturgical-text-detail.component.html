
<div *ngIf="text">
    <h2>
        <button (click)="goBack()"><i class="material-icons" style="font-size:16px" title="Înapoi">arrow_back</i></button>
        {{ textTitle }} 
        <button (click)="deleteText()"><i class="material-icons" style="font-size:16px" title="Șterge">delete</i></button></h2>
    <p>
      Schimbă titlul:
      <input [(ngModel)]="text.title" style="width: fit-content" />
      <br>
      Durata audio(secunde):
      <input [(ngModel)]="text.audio_time" style="width: fit-content" />
      <br>
      <button (click)="saveTitle()">Salvează</button>
    </p>
</div>
  
  <hr />
  
  <h3>Texte</h3>

  <p *ngIf="!text?.texts?.length">Nu sunt texte adăugate</p>
<ol>
    <li *ngFor="let elem of text?.texts; let i = index">
      <p *ngIf="editedTextElement?.id && elem.id == editedTextElement?.id; ">
        <textarea [(ngModel)]="editedTextElement!.text" rows="4" style="width:100%" ></textarea>
        <label for="start_time">Timp de început(secunde): </label>
        <input [(ngModel)]="editedTextElement!.start_time" />
        <label for="end_time">Timp de sfârșit(secunde): </label>
        <input [(ngModel)]="editedTextElement!.end_time" />
        <button (click)="editTextElement(i)"><i class="material-icons" style="font-size:12px" title="Șterge">save</i></button>
        <button (click)="clearEditedTextElement()"><i class="material-icons" style="font-size:12px" title="Șterge">cancel</i></button>
      </p>
        <p *ngIf="!editedTextElement?.id || elem.id != editedTextElement?.id; ">
          {{ elem.text }} <span *ngIf="elem.start_time != null && elem.end_time != null">{{ elem.start_time }} → {{ elem.end_time }}</span>

          <span style="display: inline; margin-left: 1rem;">
            <button (click)="moveUp(i)" [disabled]="i === 0" title="Mută în sus">↑</button>
            <button (click)="moveDown(i)" [disabled]="i === text?.texts!.length - 1" title="Mută în jos">↓</button>
            <button (click)="deleteTextElement(elem.id, i)"><i class="material-icons" style="font-size:12px" title="Șterge">delete</i></button>
            <button (click)="setEditedTextElement(elem)"><i class="material-icons" style="font-size:12px" title="Șterge">edit</i></button>
          </span>

      </p>

    </li>
</ol>
  
  <div style="margin-top:1rem;">
    <h4>Adaugă un text nou</h4>
    <label for="text">Text:</label>
    <textarea id="text" [(ngModel)]="newTextElement!.text" rows="4" style="width:100%" ></textarea>
    <label for="start_time">Timp de început(secunde): </label>
    <input [(ngModel)]="newTextElement!.start_time" type="number" />
    <label for="end_time">Timp de sfârșit(secunde): </label>
    <input [(ngModel)]="newTextElement!.end_time" type="number" />
    <br />
    <button (click)="addTextElement()">Adaugă</button>
  </div>
  